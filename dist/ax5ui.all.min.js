"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};(function(){var t,e,i=this,n=window,a=document,o=(document.documentElement,/^(["'](\\.|[^"\\\n\r])*?["']|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/),s=/^-ms-/,l=/[\-_]([\da-z])/gi,r=/([A-Z])/g,u=/\./,c=/[-|+]?[\D]/gi,d=/\D/gi,h=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),p=/&/g,f=/=/,m=/[ ]+/g,g={};g.guid=1,g.getGuid=function(){return g.guid++},g.info=t=function(){function i(t,i){return t={href:n.location.href,param:n.location.search,referrer:a.referrer,pathname:n.location.pathname,hostname:n.location.hostname,port:n.location.port},i=t.href.split(/[\?#]/),t.param=t.param.replace("?",""),t.url=i[0],t.href.search("#")>-1&&(t.hashdata=e.last(i)),i=null,t.baseUrl=e.left(t.href,"?").replace(t.pathname,""),t}function o(e,i,n){return t.errorMsg&&t.errorMsg[e]?{className:e,errorCode:i,methodName:n,msg:t.errorMsg[e][i]}:{className:e,errorCode:i,methodName:n}}var s="0.0.1",l="",r=function(){console.error(e.toArray(arguments).join(":"))},u={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,INSERT:45,SPACE:32},c=[{label:"SUN"},{label:"MON"},{label:"TUE"},{label:"WED"},{label:"THU"},{label:"FRI"},{label:"SAT"}],d=function(t,e,i,n,a,o){return t=navigator.userAgent.toLowerCase(),e=-1!=t.search(/mobile/g),o,-1!=t.search(/iphone/g)?{name:"iphone",version:0,mobile:!0}:-1!=t.search(/ipad/g)?{name:"ipad",version:0,mobile:!0}:-1!=t.search(/android/g)?(n=/(android)[ \/]([\w.]+)/.exec(t)||[],o=n[2]||"0",{name:"android",version:o,mobile:e}):(i="",n=/(opr)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],a=n[1]||"",o=n[2]||"0","msie"==a&&(a="ie"),{name:a,version:o,mobile:e})}(),h=!("undefined"==typeof window||"undefined"==typeof navigator||!n.document),p=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",f={},m="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return{errorMsg:f,version:s,baseUrl:l,onerror:r,eventKeys:u,weekNames:c,browser:d,isBrowser:h,supportTouch:m,wheelEnm:p,urlUtil:i,getError:o}}(),g.util=e=function(){function v(t,e){if(D(t))return[];var i,n=0,a=t.length,o=void 0===a||"function"==typeof t;if(o){for(i in t)if("undefined"!=typeof t[i]&&e.call(t[i],i,t[i])===!1)break}else for(;a>n&&("undefined"==typeof t[n]||e.call(t[n],n,t[n++])!==!1););return t}function b(t,e){if(D(t))return[];var i,n,a=0,o=t.length,s=[];if(j(t)){for(i in t)if("undefined"!=typeof t[i]){if(n=void 0,(n=e.call(t[i],i,t[i]))===!1)break;s.push(n)}}else for(;o>a;)if("undefined"!=typeof t[a]){if(n=void 0,(n=e.call(t[a],a,t[a++]))===!1)break;s.push(n)}return s}function y(t,e){if(D(t))return-1;var i,n=0,a=t.length;if(j(t))for(i in t){if("undefined"!=typeof t[i]&&q(e)&&e.call(t[i],i,t[i]))return i;if(t[i]==e)return i}else for(;a>n;){if("undefined"!=typeof t[n]&&q(e)&&e.call(t[n],n,t[n]))return n;if(t[n]==e)return n;n++}return-1}function x(t,e,i){var n,a,o;if(q(e)&&"undefined"==typeof i&&(i=e,e=0),"undefined"==typeof e&&(e=0),Q(t)){for(n=0,a=t.length;a>n;n++)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e}if(j(t)){for(n in t)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e}return console.error("argument error : ax5.util.sum - use Array or Object"),e}function w(t,e,i){var n,a,o;if(q(e)&&"undefined"==typeof i&&(i=e,e=0),"undefined"==typeof e&&(e=0),Q(t)){for(n=0,a=t.length;a>n;n++)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e/a}if(j(t)){for(n in t)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e/a}return console.error("argument error : ax5.util.sum - use Array or Object"),e}function k(t,e){var n,a,o;if(Q(t)){for(n=0,a=t.length,o=t[n];a-1>n&&("undefined"==typeof t[n]||(o=e.call(i,o,t[++n]))!==!1););return o}if(j(t)){for(n in t)if("undefined"!=typeof t[n]&&(o=e.call(i,o,t[n]))===!1)break;return o}return console.error("argument error : ax5.util.reduce - use Array or Object"),null}function _(t,e){for(var n=t.length-1,a=t[n];n>0&&("undefined"==typeof t[n]||(a=e.call(i,a,t[--n]))!==!1););return a}function $(t,e){if(D(t))return[];var i,n,a=0,o=t.length,s=[];if(j(t))for(i in t)"undefined"!=typeof t[i]&&(n=e.call(t[i],i,t[i]))&&s.push(t[i]);else for(;o>a;)"undefined"!=typeof t[a]&&((n=e.call(t[a],a,t[a]))&&s.push(t[a]),a++);return s}function S(t){var e="";if(g.util.isArray(t)){var i=0,n=t.length;for(e+="[";n>i;i++)i>0&&(e+=","),e+=S(t[i]);e+="]"}else if(g.util.isObject(t)){e+="{";var a=[];v(t,function(t,e){a.push('"'+t+'": '+S(e))}),e+=a.join(", "),e+="}"}else g.util.isString(t)?e='"'+t+'"':g.util.isNumber(t)?e=t:g.util.isUndefined(t)?e="undefined":g.util.isFunction(t)&&(e='"{Function}"');return e}function C(t,e){if(!e&&!o.test(t))return{error:500,msg:"syntax error"};try{return new Function("","return "+t)()}catch(i){return{error:500,msg:"syntax error"}}}function T(t){var e;return null!=t&&t==t.window?e="window":t&&1==t.nodeType?e="element":t&&11==t.nodeType?e="fragment":"undefined"==typeof t?e="undefined":"[object Object]"==ht.call(t)?e="object":"[object Array]"==ht.call(t)?e="array":"[object String]"==ht.call(t)?e="string":"[object Number]"==ht.call(t)?e="number":"[object NodeList]"==ht.call(t)?e="nodelist":"function"==typeof t&&(e="function"),e}function E(t){return null!=t&&t==t.window}function I(t){return!(!t||1!=t.nodeType&&11!=t.nodeType)}function j(t){return"[object Object]"==ht.call(t)}function Q(t){return"[object Array]"==ht.call(t)}function q(t){return"function"==typeof t}function N(t){return"[object String]"==ht.call(t)}function P(t){return"[object Number]"==ht.call(t)}function K(t){return"[object NodeList]"==ht.call(t)||t&&t[0]&&1==t[0].nodeType}function O(t){return"undefined"==typeof t}function D(t){return"undefined"==typeof t||null===t||""===t}function z(t){return t instanceof Date&&!isNaN(t.valueOf())}function M(t){var e=!1;if(t){if(t instanceof Date&&!isNaN(t.valueOf()))e=!0;else if(t=t.replace(/\D/g,""),t.length>7){var i=t.substr(4,2),n=t.substr(6,2);t=et(t),t.getMonth()==i-1&&t.getDate()==n&&(e=!0)}}else;return e}function A(t){if(j(t)){var e=Object.keys(t),i={};return i[e[0]]=t[e[0]],i}return Q(t)?t[0]:void console.error("ax5.util.object.first","argument type error")}function L(t){if(j(t)){var e=Object.keys(t),i={};return i[e[e.length-1]]=t[e[e.length-1]],i}return Q(t)?t[t.length-1]:void console.error("ax5.util.object.last","argument type error")}function G(t,e,i,n){var o;return"number"==typeof i&&(o=new Date,o.setDate(o.getDate()+i)),n=n||{},a.cookie=[escape(t),"=",escape(e),o?"; expires="+o.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}function V(t){for(var e=t+"=",i=a.cookie.split(";"),n=0,o=i.length;o>n;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1);if(-1!=s.indexOf(e))return unescape(s.substring(e.length,s.length))}return""}function R(t){return n.alert(S(t)),t}function F(t,e){return"undefined"==typeof t||"undefined"==typeof e?"":N(e)?t.indexOf(e)>-1?t.substr(0,t.indexOf(e)):t:P(e)?t.substr(0,e):""}function H(t,e){return"undefined"==typeof t||"undefined"==typeof e?"":(t=""+t,N(e)?t.lastIndexOf(e)>-1?t.substr(t.lastIndexOf(e)+1):t:P(e)?t.substr(t.length-e):"")}function W(t){return t.replace(s,"ms-").replace(l,function(t,e){return e.toUpperCase()})}function U(t){return W(t).replace(r,function(t,e){return"-"+e.toLowerCase()})}function Y(t,e){var i,n=(""+t).split(u),a=Number(n[0])<0||"-0"==n[0],o=0;return n[0]=n[0].replace(c,""),n[1]?(n[1]=n[1].replace(d,""),o=Number(n[0]+"."+n[1])||0):o=Number(n[0])||0,i=a?-o:o,v(e,function(t,e){"round"==t&&(i=P(e)?0>e?+(Math.round(i+"e-"+Math.abs(e))+"e+"+Math.abs(e)):+(Math.round(i+"e+"+e)+"e-"+e):Math.round(i)),"floor"==t&&(i=Math.floor(i)),"ceil"==t?i=Math.ceil(i):"money"==t?i=function(t){var e=""+t;if(isNaN(e)||""==e)return"";var i=e.split(".");i[0]+=".";do i[0]=i[0].replace(h,"$1,$2");while(h.test(i[0]));return i.length>1?i.join(""):i[0].split(".")[0]}(i):"abs"==t?i=Math.abs(Number(i)):"byte"==t&&(i=function(t){t=Number(i);var e="KB",n=t/1024;return n/1024>1&&(e="MB",n/=1024),n/1024>1&&(e="GB",n/=1024),Y(n,{round:1})+e}(i))}),i}function B(t){return"undefined"!=typeof t.length?Array.prototype.slice.call(t):[]}function X(t,e){var i=e.length,n=t.length,a=0;if("number"==typeof i)for(;i>a;a++)t[n++]=e[a];else for(;void 0!==e[a];)t[n++]=e[a++];return t.length=n,t}function J(t,e){var i;return N(t)&&"undefined"!=typeof e&&"param"==e?t:N(t)&&"undefined"!=typeof e&&"object"==e||N(t)&&"undefined"==typeof e?(i={},v(t.split(p),function(){var t=this.split(f);i[t[0]]?(N(i[t[0]])&&(i[t[0]]=[i[t[0]]]),i[t[0]].push(t[1])):i[t[0]]=t[1]}),i):(i=[],v(t,function(t,e){i.push(t+"="+escape(e))}),i.join("&"))}function Z(){g.info.onerror.apply(this,arguments)}function tt(t,e,i,n,a,o){var s,l;return l=new Date,"undefined"==typeof n&&(n=23),"undefined"==typeof a&&(a=59),s=new Date(Date.UTC(t,e,i||1,n,a,o||0)),0==e&&1==i&&s.getUTCHours()+s.getTimezoneOffset()/60<0?s.setUTCHours(0):s.setUTCHours(s.getUTCHours()+s.getTimezoneOffset()/60),s}function et(e,i){var n,a,o,s,l,r,u,c,d,h;if(N(e))if(0==e.length)e=new Date;else if(e.length>15)r=e.split(/ /g),d=r[0].split(/\D/g),n=d[0],a=parseFloat(d[1]),o=parseFloat(d[2]),c=r[1]||"09:00",u=c.substring(0,5).split(":"),s=parseFloat(u[0]),l=parseFloat(u[1]),("AM"===H(c,2)||"PM"===H(c,2))&&(s+=12),e=tt(n,a-1,o,s,l);else if(14==e.length)h=e.replace(/\D/g,""),e=tt(h.substr(0,4),h.substr(4,2)-1,Y(h.substr(6,2)),Y(h.substr(8,2)),Y(h.substr(10,2)),Y(h.substr(12,2)));else if(e.length>7)h=e.replace(/\D/g,""),e=tt(h.substr(0,4),h.substr(4,2)-1,Y(h.substr(6,2)));else if(e.length>4)h=e.replace(/\D/g,""),e=tt(h.substr(0,4),h.substr(4,2)-1,1);else{if(e.length>2)return h=e.replace(/\D/g,""),tt(h.substr(0,4),h.substr(4,2)-1,1);e=new Date}return"undefined"==typeof i?e:(i.add&&(e=function(t,e){var i,n,a,o,s=864e5;return"undefined"!=typeof e.d?t.setTime(t.getTime()+e.d*s):"undefined"!=typeof e.m?(i=t.getFullYear(),n=t.getMonth(),a=t.getDate(),i+=parseInt(e.m/12),n+=e.m%12,o=at(i,n),a>o&&(a=o),t=new Date(i,n,a,12)):"undefined"!=typeof e.y?t.setTime(t.getTime()+365*e.y*s):t.setTime(t.getTime()+e.y*s),t}(new Date(e),i.add)),i["return"]?function(){var n,a,o,s,l,r,u,c=i["return"];n=e.getUTCFullYear(),a=ot(e.getMonth()+1,2),o=ot(e.getDate(),2),s=ot(e.getHours(),2),l=ot(e.getMinutes(),2),r=ot(e.getSeconds(),2),u=e.getDay();var d=/[^y]*(yyyy)[^y]*/gi;d.exec(c);var h=RegExp.$1,p=/[^m]*(MM)[^m]*/g;p.exec(c);var f=RegExp.$1,m=/[^d]*(dd)[^d]*/gi;m.exec(c);var g=RegExp.$1,v=/[^h]*(hh)[^h]*/gi;v.exec(c);var b=RegExp.$1,y=/[^m]*(mm)[^i]*/g;y.exec(c);var x=RegExp.$1,w=/[^s]*(ss)[^s]*/gi;w.exec(c);var k=RegExp.$1,_=/[^d]*(dw)[^w]*/gi;_.exec(c);var $=RegExp.$1;return"yyyy"===h&&(c=c.replace(h,H(n,h.length))),"MM"===f&&(1==f.length&&(a=e.getMonth()+1),c=c.replace(f,a)),"dd"===g&&(1==g.length&&(o=e.getDate()),c=c.replace(g,o)),"hh"===b&&(c=c.replace(b,s)),"mm"===x&&(c=c.replace(x,l)),"ss"===k&&(c=c.replace(k,r)),"dw"==$&&(c=c.replace($,t.weekNames[u].label)),c}():e)}function it(t,e){function i(t){return Math.floor(t.getTime()/s)*s}var n,a,o=et(t),s=864e5,l=new Date;return"undefined"==typeof e?n=Y((i(o)-i(l))/s,{floor:!0}):(n=Y((i(o)-i(l))/s,{floor:!0}),e.today&&(l=et(e.today),n=Y((i(o)-i(l))/s,{floor:!0})),e.thisYear&&(a=new Date(l.getFullYear(),o.getMonth(),o.getDate()),n=Y((i(a)-i(l))/s,{floor:!0}),0>n&&(a=new Date(l.getFullYear()+1,o.getMonth(),o.getDate()),n=Y((i(a)-i(l))/s,{floor:!0}))),e.age&&(a=new Date(l.getFullYear(),o.getMonth(),o.getDate()),n=a.getFullYear()-o.getFullYear()),n)}function nt(t){var e=et(t);return{year:e.getFullYear(),month:e.getMonth()+1,count:parseInt(e.getDate()/7+1)}}function at(t,e){return 3==e||5==e||8==e||10==e?30:1==e?t%4==0&&t%100!=0||t%400==0?29:28:31}function ot(t,e,i,n){var a=t.toString(n||10);return st(i||"0",e-a.length)+a}function st(t,e){return 1>e?"":new Array(e+1).join(t)}function lt(t,e){if(t)for(;function(){var i=!0;if("undefined"==typeof e)t=t.parentNode?t.parentNode:!1;else if(q(e))i=e(t);else if(j(e))for(var n in e)if("tagname"===n){if(t.tagName.toLocaleLowerCase()!=e[n]){i=!1;break}}else if("clazz"===n||"class_name"===n){if(!("className"in t)){i=!1;break}for(var a=t.className.split(m),o=!1,s=0;s<a.length;s++)if(a[s]==e[n]){o=!0;break}i=o}else{if(!t.getAttribute){i=!1;break}if(t.getAttribute(n)!=e[n]){i=!1;break}}return!i}();){if(!t.parentNode||!t.parentNode.parentNode){t=!1;break}t=t.parentNode}return t}function rt(t){var e=/\D?(\d+)([a-zA-Z%]*)/i,i=(""+t).match(e),n=i[2]||"px";return i[1]+n}function ut(t){var e;if(j(t)){e="";for(var i in t)e+=i+":"+t[i]+";";return e}if(N(t)){e={};var n=t.split(/[ ]*;[ ]*/g);return n.forEach(function(t){if(""!==(t=t.trim())){var i=t.split(/[ ]*:[ ]*/g);e[i[0]]=i[1]}}),e}}function ct(t){if(!t)var t=window.event;return t.cancelBubble=!0,t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}function dt(t){var i,n;if("object"==("undefined"==typeof t?"undefined":_typeof(t))){if(e.isArray(t)){n=t.length,i=new Array(n);for(var a=0;n>a;a++)i[a]=dt(t[a]);return i}return jQuery.extend({},t)}return t}var ht=Object.prototype.toString,pt=function(){var t={textRange:{selectAll:function(t,e,i){},arr:function(t,e,i){e.moveStart("character",i[0]),e.collapse(),e.moveEnd("character",i[1])},start:function(t,e,i){e.moveStart("character",0),e.collapse()},end:function(t,e,i){e.moveStart("character",e.text.length),e.collapse()}},range:{selectAll:function(t,e,i){e.selectNodeContents(t)},arr:function(t,e,i){j(i[0])?(e.setStart(i[0].node,i[0].offset),e.setEnd(i[1].node,i[1].offset)):(e.setStart(t.firstChild,i[0]),e.setEnd(t.firstChild,i[1]))},start:function(t,e,i){e.selectNodeContents(t),e.collapse(!0)},end:function(t,e,i){e.selectNodeContents(t),e.collapse(!1)}}};return function(e,i){var n,o,s;if(e instanceof jQuery&&(e=e.get(0)),e){if(a.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(e),o="textRange"):window.getSelection&&(s=window.getSelection(),n=document.createRange(),o="range"),"undefined"==typeof i)t[o].selectAll.call(this,e,n,i);else if(Q(i))t[o].arr.call(this,e,n,i);else for(var l in t[o])if(i==l){t[o][l].call(this,e,n,i);break}a.body.createTextRange?(n.select(),e.focus()):window.getSelection&&(e.focus(),s.removeAllRanges(),s.addRange(n))}}}(),ft=function(t,e,i){var n,a,o=function(){var o=B(arguments);a&&clearTimeout(a),n?(n&&clearTimeout(n),n=setTimeout(function(e){t.apply(this,e)}.bind(this,o),e)):n=setTimeout(function(e){t.apply(this,e)}.bind(this,o),i?0:e),a=setTimeout(function(){clearTimeout(n),n=null},e)};return o.cancel=function(){clearTimeout(n),clearTimeout(a),n=null},o};return{alert:R,each:v,map:b,search:y,reduce:k,reduceRight:_,filter:$,sum:x,avg:w,toJson:S,parseJson:C,first:A,last:L,deepCopy:dt,left:F,right:H,getType:T,isWindow:E,isElement:I,isObject:j,isArray:Q,isFunction:q,isString:N,isNumber:P,isNodelist:K,isUndefined:O,isNothing:D,setCookie:G,getCookie:V,camelCase:W,snakeCase:U,number:Y,toArray:B,merge:X,param:J,error:Z,date:et,dday:it,daysOfMonth:at,weeksOfMonth:nt,setDigit:ot,times:st,findParentNode:lt,cssNumber:rt,css:ut,isDate:z,isDateFormat:M,stopEvent:ct,selectRange:pt,debounce:ft}}(),i.ax5=function(){return g}()}).call(window),ax5.def={},ax5.info.errorMsg.ax5dialog={501:"Duplicate call error"},ax5.info.errorMsg.ax5picker={401:"Can not find target element",402:"Can not find boundID",501:"Can not find content key"},ax5.info.errorMsg["single-uploader"]={460:"There are no files to be uploaded.",461:"There is no uploaded files."},ax5.info.errorMsg.ax5calendar={401:"Can not find target element"},ax5.info.errorMsg.ax5formatter={401:"Can not find target element",402:"Can not find boundID",501:"Can not find pattern"},ax5.info.errorMsg.ax5menu={501:"Can not find menu item"},ax5.info.errorMsg.ax5select={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},ax5.info.errorMsg.ax5combobox={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},function(){var t=/^\s*|\s*$/g;Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a))&&("function"!=typeof a||null===a))throw new TypeError("type err");var o,s,l=[];for(o in a)t.call(a,o)&&l.push(o);if(e)for(s=0;n>s;s++)t.call(a,i[s])&&l.push(i[s]);return l}}()),Array.prototype.forEach||(Array.prototype.forEach=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();var n,a=arguments[1];for(n=0;i>n;n++)n in e&&t.call(a,e[n],n,e)}),Function.prototype.bind||(Function.prototype.bind=function(t){function e(){}if("function"!=typeof this)throw TypeError("function");var i=[].slice,n=i.call(arguments,1),a=this,o=function(){return a.apply(this instanceof e?this:t,n.concat(i.call(arguments)))};return e.prototype=a.prototype,o.prototype=new e,o}),function(){if(!document.querySelectorAll&&!document.querySelector&&document.createStyleSheet){var t=document.createStyleSheet(),e=function(e,i){var n,a=document.all,o=a.length,s=[];for(t.addRule(e,"foo:bar"),n=0;o>n&&!("bar"===a[n].currentStyle.foo&&(s.push(a[n]),s.length>i));n+=1);return t.removeRule(0),s};document.querySelectorAll=function(t){return e(t,1/0)},document.querySelector=function(t){return e(t,1)[0]||null}}}(),String.prototype.trim||!function(){String.prototype.trim=function(){return this.replace(t,"")}}(),window.JSON||(window.JSON={parse:function(t){return new Function("","return "+t)()},stringify:function(){var t,e=/["]/g;return t=function(i){var n,a,o;switch(n="undefined"==typeof i?"undefined":_typeof(i)){case"string":return'"'+i.replace(e,'\\"')+'"';case"number":case"boolean":return i.toString();case"undefined":return"undefined";case"function":return'""';case"object":if(!i)return"null";if(n="",i.splice){for(a=0,o=i.length;o>a;a++)n+=","+t(i[a]);return"["+n.substr(1)+"]"}for(a in i)i.hasOwnProperty(a)&&void 0!==i[a]&&"function"!=typeof i[a]&&(n+=',"'+a+'":'+t(i[a]));return"{"+n.substr(1)+"}"}}}()}),function(){if(!document.documentMode||document.documentMode>=9)return!1;var t=Array.prototype.splice;Array.prototype.splice=function(){var e=Array.prototype.slice.call(arguments);return"undefined"==typeof e[1]&&(e[1]=this.length-e[0]),t.apply(this,e)}}(),function(){var t=Array.prototype.slice;try{t.call(document.documentElement)}catch(e){Array.prototype.slice=function(e,i){if(i="undefined"!=typeof i?i:this.length,"[object Array]"===Object.prototype.toString.call(this))return t.call(this,e,i);var n,a,o=[],s=this.length,l=e||0;l=l>=0?l:Math.max(0,s+l);var r="number"==typeof i?Math.min(i,s):s;if(0>i&&(r=s+i),a=r-l,a>0)if(o=new Array(a),this.charAt)for(n=0;a>n;n++)o[n]=this.charAt(l+n);else for(n=0;a>n;n++)o[n]=this[l+n];return o}}}(),function(t){for(var e,i,n={},a=function(){},o="memory".split(","),s="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)t[e]=t[e]||n;for(;i=s.pop();)t[i]=t[i]||a}(window.console||{});var e=document.getElementsByTagName("html")[0];document.getElementsByTagName("body")[0];window.innerWidth||(window.innerWidth=e.clientWidth),window.innerHeight||(window.innerHeight=e.clientHeight),window.scrollX||(window.scrollX=window.pageXOffset||e.scrollLeft),window.scrollY||(window.scrollY=window.pageYOffset||e.scrollTop)}.call(window),ax5.ui=function(){function t(){this.config={},this.name="root",this.setConfig=function(t,e){return jQuery.extend(!0,this.config,t),("undefined"==typeof e||e===!0)&&this.init(),this},this.init=function(){console.log(this.config)},this.bindWindowResize=function(t){setTimeout(function(){jQuery(window).resize(function(){this.bindWindowResize__&&clearTimeout(this.bindWindowResize__),this.bindWindowResize__=setTimeout(function(){t.call(this)}.bind(this),10)}.bind(this))}.bind(this),100)},this.stopEvent=function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1},this.toString=function(){return this.name+"@"+this.version},this.main=function(){}.apply(this,arguments)}function e(t,e){if(!t||!t.className)throw"invalid call";var i=t.classStore?t.classStore:ax5.ui;if(!i)throw"invalid classStore";ax5.def[t.className]={version:t.version};var n=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2])}},a=function(t,e,i){return i.name=t,i.version=e,i.instanceId=ax5.getGuid(),i},o=function(e){var i=t.superClass?t.superClass:ax5.ui.root;if(!ax5.util.isFunction(i))throw"invalid superClass";i.call(this),e.prototype=new i},s=function l(){if(!(this&&this instanceof l))throw"invalid call";var i=n(e,arguments);return a(t.className,t.version||"",i)};o.call(this,e),i[t.className]=s}return{root:t,addClass:e}}(),function(t,e){e(t.mustache={})}(window.ax5,function(t){function e(t){return"function"==typeof t}function i(t){return m(t)?"array":"undefined"==typeof t?"undefined":_typeof(t)}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(t,e){return null!=t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&e in t}function o(t,e){return g.call(t,e)}function s(t){return!o(v,t)}function l(t){return String(t).replace(/[&<>"'\/]/g,function(t){return b[t]})}function r(e,i){function a(){if(v&&!b)for(;g.length;)delete f[g.pop()];else g=[];v=!1,b=!1}function o(t){if("string"==typeof t&&(t=t.split(x,2)),!m(t)||2!==t.length)throw new Error("Invalid tags: "+t);l=new RegExp(n(t[0])+"\\s*"),r=new RegExp("\\s*"+n(t[1])),h=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var l,r,h,p=[],f=[],g=[],v=!1,b=!1;o(i||t.tags);for(var $,S,C,T,E,I,j=new d(e);!j.eos();){if($=j.pos,C=j.scanUntil(l))for(var Q=0,q=C.length;q>Q;++Q)T=C.charAt(Q),s(T)?g.push(f.length):b=!0,f.push(["text",T,$,$+1]),$+=1,"\n"===T&&a();if(!j.scan(l))break;if(v=!0,S=j.scan(_)||"name",j.scan(y),"="===S?(C=j.scanUntil(w),j.scan(w),j.scanUntil(r)):"{"===S?(C=j.scanUntil(h),j.scan(k),j.scanUntil(r),S="&"):C=j.scanUntil(r),!j.scan(r))throw new Error("Unclosed tag at "+j.pos);if(E=[S,C,$,j.pos],f.push(E),"#"===S||"^"===S)p.push(E);else if("/"===S){if(I=p.pop(),!I)throw new Error('Unopened section "'+C+'" at '+$);if(I[1]!==C)throw new Error('Unclosed section "'+I[1]+'" at '+$)}else"name"===S||"{"===S||"&"===S?b=!0:"="===S&&o(C)}if(I=p.pop())throw new Error('Unclosed section "'+I[1]+'" at '+j.pos);return c(u(f))}function u(t){for(var e,i,n=[],a=0,o=t.length;o>a;++a)e=t[a],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function c(t){for(var e,i,n=[],a=n,o=[],s=0,l=t.length;l>s;++s)switch(e=t[s],e[0]){case"#":case"^":a.push(e),o.push(e),a=e[4]=[];break;case"/":i=o.pop(),i[5]=e[2],a=o.length>0?o[o.length-1][4]:n;break;default:a.push(e)}return n}function d(t){this.string=t,this.tail=t,this.pos=0}function h(t,e){this.view=t,this.cache={".":this.view,"@each":function(){var t=[];for(var e in this)t.push({"@key":e,"@value":this[e]});return t}},this.parent=e}function p(){this.cache={}}var f=Object.prototype.toString,m=Array.isArray||function(t){return"[object Array]"===f.call(t)},g=RegExp.prototype.test,v=/\S/,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},y=/\s*/,x=/\s+/,w=/\s*=/,k=/\s*\}/,_=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},d.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},h.prototype.push=function(t){return new h(t,this)},h.prototype.lookup=function(t){var i,n=this.cache;if(n.hasOwnProperty(t))i=n[t];else{for(var o,s,l=this,r=!1;l;){if(t.indexOf(".")>0)for(i=l.view,o=t.split("."),s=0;null!=i&&s<o.length;)s===o.length-1&&(r=a(i,o[s])),i=i[o[s++]];else i=l.view[t],r=a(l.view,t);if(r)break;l=l.parent}n[t]=i}return e(i)&&(i=i.call(this.view)),i},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(t,e){var i=this.cache,n=i[t];return null==n&&(n=i[t]=r(t,e)),n},p.prototype.render=function(t,e,i){var n=this.parse(t),a=e instanceof h?e:new h(e);return this.renderTokens(n,a,i,t)},p.prototype.renderTokens=function(t,e,i,n){for(var a,o,s,l="",r=0,u=t.length;u>r;++r)s=void 0,a=t[r],o=a[0],"#"===o?s=this.renderSection(a,e,i,n):"^"===o?s=this.renderInverted(a,e,i,n):">"===o?s=this.renderPartial(a,e,i,n):"&"===o?s=this.unescapedValue(a,e):"name"===o?s=this.escapedValue(a,e):"text"===o&&(s=this.rawValue(a)),void 0!==s&&(l+=s);return l},p.prototype.renderSection=function(t,i,n,a){function o(t){return s.render(t,i,n)}var s=this,l="",r=i.lookup(t[1]);if(r){if(m(r))for(var u=0,c=r.length;c>u;++u)r[u]&&(r[u]["@i"]=u,r[u]["@first"]=0===u,l+=this.renderTokens(t[4],i.push(r[u]),n,a));else if("object"===("undefined"==typeof r?"undefined":_typeof(r))||"string"==typeof r||"number"==typeof r)l+=this.renderTokens(t[4],i.push(r),n,a);else if(e(r)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");r=r.call(i.view,a.slice(t[3],t[5]),o),null!=r&&(l+=r)}else l+=this.renderTokens(t[4],i,n,a);return l}},p.prototype.renderInverted=function(t,e,i,n){var a=e.lookup(t[1]);return!a||m(a)&&0===a.length?this.renderTokens(t[4],e,i,n):void 0},p.prototype.renderPartial=function(t,i,n){if(n){var a=e(n)?n(t[1]):n[t[1]];return null!=a?this.renderTokens(this.parse(a),i,n,a):void 0}},p.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);return null!=i?i:void 0},p.prototype.escapedValue=function(e,i){var n=i.lookup(e[1]);return null!=n?t.escape(n):void 0},p.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.1.3",t.tags=["{{","}}"];var $=new p;t.clearCache=function(){return $.clearCache()},t.parse=function(t,e){return $.parse(t,e)},t.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+i(t)+'" was given as the first argument for mustache#render(template, view, partials)');return $.render(t,e,n)},t.to_html=function(i,n,a,o){var s=t.render(i,n,a);return e(o)?void o(s):s},t.escape=l,t.Scanner=d,t.Context=h,t.Writer=p}),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"dialog",version:"0.8.6"},function(){var i=function(){var i,n=this;this.instanceId=ax5.getGuid(),this.config={id:"ax5-dialog-"+this.instanceId,clickEventName:"click",theme:"default",width:300,title:"",msg:"",lang:{ok:"ok",cancel:"cancel"},animateTime:150},this.activeDialog=null,i=this.config;var a=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),e=null,!0},o=function(){return'\n                    <div id="{{dialogId}}" data-ax5-ui="dialog" class="ax5-ui-dialog {{theme}}">\n                        <div class="ax-dialog-header">\n                            {{{title}}}\n                        </div>\n                        <div class="ax-dialog-body">\n                            <div class="ax-dialog-msg">{{{msg}}}</div>\n                            \n                            {{#input}}\n                            <div class="ax-dialog-prompt">\n                                {{#@each}}\n                                <div class="form-group">\n                                {{#@value.label}}\n                                <label>{{#_crlf}}{{{.}}}{{/_crlf}}</label>\n                                {{/@value.label}}\n                                <input type="{{@value.type}}" placeholder="{{@value.placeholder}}" class="form-control {{@value.theme}}" data-dialog-prompt="{{@key}}" style="width:100%;" value="{{@value.value}}" />\n                                {{#@value.help}}\n                                <p class="help-block">{{#_crlf}}{{.}}{{/_crlf}}</p>\n                                {{/@value.help}}\n                                </div>\n                                {{/@each}}\n                            </div>\n                            {{/input}}\n                            \n                            <div class="ax-dialog-buttons">\n                                <div class="ax-button-wrap">\n                                {{#btns}}\n                                    {{#@each}}\n                                    <button type="button" data-dialog-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{@value.label}}</button>\n                                    {{/@each}}\n                                {{/btns}}\n                                </div>\n                            </div>\n                        </div>\n                    </div>  \n                    '},s=function(t,e){var n={dialogId:t,title:e.title||i.title||"",msg:(e.msg||i.msg||"").replace(/\n/g,"<br/>"),input:e.input,btns:e.btns,_crlf:function(){return this.replace(/\n/g,"<br/>")}};try{return ax5.mustache.render(o(),n)}finally{n=null}},l=function(t,e){var n,o={};t.id=t.id||i.id,n={width:t.width},jQuery(document.body).append(s.call(this,t.id,t)),this.activeDialog=jQuery("#"+t.id),this.activeDialog.css({width:n.width}),t.height=n.height=this.activeDialog.height(),"undefined"==typeof t.position||"center"===t.position?(o.top=jQuery(window).height()/2-n.height/2,o.left=jQuery(window).width()/2-n.width/2):(o.left=t.position.left||0,o.top=t.position.top||0),i.zIndex&&(o["z-index"]=i.zIndex),this.activeDialog.css(o),"prompt"===t.dialogType?this.activeDialog.find("[data-dialog-prompt]").get(0).focus():this.activeDialog.find("[data-dialog-btn]").get(0).focus(),this.activeDialog.find("[data-dialog-btn]").on(i.clickEventName,function(i){u.call(this,i||window.event,t,e)}.bind(this)),jQuery(window).bind("keydown.ax5dialog",function(i){c.call(this,i||window.event,t,e)}.bind(this)),jQuery(window).bind("resize.ax5dialog",function(t){r.call(this,t||window.event)}.bind(this)),a.call(this,t,{self:this,state:"open"}),o=null,n=null},r=function(t){if(!this.activeDialog)return this;var e=n.dialogConfig,i={width:e.width,height:e.height};return"undefined"==typeof e.position||"center"===e.position?(i.top=window.innerHeight/2-i.height/2,i.left=window.innerWidth/2-i.width/2):(i.left=e.position.left||0,i.top=e.position.top||0),i.left<0&&(i.left=0),i.top<0&&(i.top=0),this.activeDialog.css(i),e=null,i=null,this},u=function(t,i,n,a,o){var s;if(t.srcElement&&(t.target=t.srcElement),a=e.findParentNode(t.target,function(t){return t.getAttribute("data-dialog-btn")?!0:void 0})){if(o=a.getAttribute("data-dialog-btn"),s={self:this,key:o,value:i.btns[o],dialogId:i.id,btnTarget:a},"prompt"===i.dialogType){var l=null;for(var r in i.input)if(s[r]=this.activeDialog.find("[data-dialog-prompt="+r+"]").val(),""==s[r]||null==s[r]){l=r;break}}if(i.btns[o].onClick)i.btns[o].onClick.call(s,o);else if("alert"===i.dialogType)n&&n.call(s,o),this.close();else if("confirm"===i.dialogType)n&&n.call(s,o),this.close();else if("prompt"===i.dialogType){if("ok"===o&&l)return this.activeDialog.find('[data-dialog-prompt="'+l+'"]').get(0).focus(),!1;n&&n.call(s,o),this.close()}}s=null,i=null,n=null,a=null,o=null},c=function(t,e,i,n,a){var o,s=null;if(t.keyCode==ax5.info.eventKeys.ESC&&this.close(),"prompt"===e.dialogType&&t.keyCode==ax5.info.eventKeys.RETURN){
o={self:this,key:a,value:e.btns[a],dialogId:e.id,btnTarget:n};for(var l in e.input)if(o[l]=this.activeDialog.find("[data-dialog-prompt="+l+"]").val(),""==o[l]||null==o[l]){s=l;break}if(s)return o=null,s=null,!1;i&&i.call(o,a),this.close()}o=null,s=null,e=null,i=null,n=null,a=null};this.init=function(){this.onStateChanged=i.onStateChanged},this.alert=function(t,a,o){return e.isString(t)&&(t={title:i.title,msg:t}),this.activeDialog?(o?console.log(ax5.info.getError("ax5dialog","501","alert")):setTimeout(function(){this.alert(t,a,1)}.bind(this),Number(i.animateTime)+100),this):(n.dialogConfig={},jQuery.extend(!0,n.dialogConfig,i,t),t=n.dialogConfig,t.dialogType="alert","undefined"==typeof t.btns&&(t.btns={ok:{label:i.lang.ok,theme:t.theme}}),l.call(this,t,a),t=null,a=null,this)},this.confirm=function(t,a,o){return e.isString(t)&&(t={title:i.title,msg:t}),this.activeDialog?(o?console.log(ax5.info.getError("ax5dialog","501","confirm")):setTimeout(function(){this.confirm(t,a,1)}.bind(this),Number(i.animateTime)+100),this):(n.dialogConfig={},jQuery.extend(!0,n.dialogConfig,i,t),t=n.dialogConfig,t.dialogType="confirm",t.theme=t.theme||i.theme||"","undefined"==typeof t.btns&&(t.btns={ok:{label:i.lang.ok,theme:t.theme},cancel:{label:i.lang.cancel}}),l.call(this,t,a),t=null,a=null,this)},this.prompt=function(t,a,o){return e.isString(t)&&(t={title:i.title,msg:t}),this.activeDialog?(o?console.log(ax5.info.getError("ax5dialog","501","prompt")):setTimeout(function(){this.prompt(t,a,1)}.bind(this),Number(i.animateTime)+100),this):(n.dialogConfig={},jQuery.extend(!0,n.dialogConfig,i,t),t=n.dialogConfig,t.dialogType="prompt",t.theme=t.theme||i.theme||"","undefined"==typeof t.input&&(t.input={value:{label:""}}),"undefined"==typeof t.btns&&(t.btns={ok:{label:i.lang.ok,theme:t.theme},cancel:{label:i.lang.cancel}}),l.call(this,t,a),t=null,a=null,this)},this.close=function(t,e){return this.activeDialog&&(t=n.dialogConfig,this.activeDialog.addClass("destroy"),jQuery(window).unbind("keydown.ax5dialog"),jQuery(window).unbind("resize.ax5dialog"),setTimeout(function(){this.activeDialog.remove(),this.activeDialog=null,e={self:this,state:"close"},t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),t=null,e=null}.bind(this),i.animateTime)),this},this.main=function(){t.dialog_instance=t.dialog_instance||[],t.dialog_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"mask",version:"0.7.5"},function(){var i=function(){var i,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"",target:jQuery(document.body).get(0)},this.maskContent="",this.status="off",i=this.config;var a=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),t=null,e=null,!0},o=function(){return'\n                <div class="ax-mask {{theme}}" id="{{maskId}}">\n                    <div class="ax-mask-bg"></div>\n                    <div class="ax-mask-content">\n                        <div class="ax-mask-body">\n                        {{{body}}}\n                        </div>\n                    </div>\n                </div>\n                '},s=function(t){this.maskContent=t};this.init=function(){this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,this.config.content&&s.call(this,this.config.content)},this.open=function(t){"on"===this.status&&this.close(),t&&t.content&&s.call(this,t.content),n.maskConfig={},jQuery.extend(!0,n.maskConfig,this.config,t);var e,i=n.maskConfig,l=i.target,r=jQuery(l),u="ax-mask-"+ax5.getGuid(),c={},d={},h=o(),p=ax5.mustache.render(h,{theme:i.theme,maskId:u,body:this.maskContent});return jQuery(document.body).append(p),l&&l!==jQuery(document.body).get(0)&&(c={position:i.position||"absolute",left:r.offset().left,top:r.offset().top,width:r.outerWidth(),height:r.outerHeight()},"undefined"!=typeof n.maskConfig.zIndex&&(c["z-index"]=n.maskConfig.zIndex),r.addClass("ax-masking")),this.$mask=e=jQuery("#"+u),this.$target=r,this.status="on",e.css(c),this.onClick&&e.click(function(){d={self:this,state:"open",type:"click"},this.onClick.call(d,d)}),a.call(this,null,{self:this,state:"open"}),t=null,i=null,l=null,r=null,u=null,e=null,c=null,d=null,h=null,p=null,this},this.close=function(t){if(this.$mask){var e=function(){this.status="off",this.$mask.remove(),this.$target.removeClass("ax-masking"),a.call(this,null,{self:this,state:"close"})};t?setTimeout(function(){e.call(this)}.bind(this),t):e.call(this)}return this},this.main=function(){t.mask_instance=t.mask_instance||[],t.mask_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"toast",version:"0.3.3"},function(){var i=function(){var i,n=this,a=0,o=null;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",width:300,icon:"",closeIcon:"",msg:"",lang:{ok:"ok",cancel:"cancel"},displayTime:3e3,animateTime:250,containerPosition:"bottom-left"},this.toastContainer=null,this.queue=[],i=this.config;var s=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),t=null,e=null,!0},l=function(){return'\n                    <div id="{{toastId}}" data-ax5-ui="toast" class="ax5-ui-toast {{theme}}">\n                        {{#icon}}\n                        <div class="ax-toast-icon">{{{.}}}</div>\n                        {{/icon}}\n                        <div class="ax-toast-body">{{{msg}}}</div>\n                        {{#btns}}\n                        <div class="ax-toast-buttons">\n                            <div class="ax-button-wrap">\n                            {{#@each}}\n                            <button type="button" data-ax-toast-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{{@value.label}}}</button>\n                            {{/@each}}\n                            </div>\n                        </div>\n                        {{/btns}}\n                        {{^btns}}\n                        <a class="ax-toast-close" data-ax-toast-btn="ok">{{{closeIcon}}}</a>\n                        {{/btns}}\n                        <div style="clear:both;"></div>\n                    </div>\n                    '},r=function(t,e){var i={toastId:t,theme:e.theme,icon:e.icon,msg:(e.msg||"").replace(/\n/g,"<br/>"),btns:e.btns,closeIcon:e.closeIcon};try{return ax5.mustache.render(l(),i)}finally{t=null,i=null}},u=function(t,l){o&&clearTimeout(o);var u,d={width:t.width};return t.id="ax5-toast-"+n.containerId+"-"+ ++a,jQuery("#"+t.id).get(0)?this:("bottom"==e.left(i.containerPosition,"-")?this.toastContainer.append(r(t.id,t)):this.toastContainer.prepend(r(t.id,t)),u=jQuery("#"+t.id),u.css({width:d.width}),t.toastBox=u,this.queue.push(t),s.call(this,t,{self:this,state:"open",toastId:t.id}),"push"===t.toastType?(setTimeout(function(){this.close(t,l)}.bind(this),i.displayTime),u.find("[data-ax-toast-btn]").on(i.clickEventName,function(e){c.call(this,e||window.event,t,u,l)}.bind(this))):"confirm"===t.toastType&&u.find("[data-ax-toast-btn]").on(i.clickEventName,function(e){c.call(this,e||window.event,t,u,l)}.bind(this)),void(d=null))},c=function(t,i,n,a,o,s){if(o=e.findParentNode(t.target,function(t){return t.getAttribute("data-ax-toast-btn")?!0:void 0})){s=o.getAttribute("data-ax-toast-btn");var l={key:s,value:i.btns?i.btns[s]:s,toastId:i.id,btn_target:o};i.btns&&i.btns[s].onClick?i.btns[s].onClick.call(l,s):"push"===i.toastType?(a&&a.call(l,s),this.close(i,a)):"confirm"===i.toastType&&(a&&a.call(l,s),this.close(i,a))}t=null,i=null,n=null,a=null,o=null,s=null};this.init=function(){this.onStateChanged=i.onStateChanged,n.containerId=ax5.getGuid();var t=[];i.zIndex&&t.push("z-index:"+i.zIndex),jQuery(document.body).append('<div class="ax5-ui-toast-container '+i.containerPosition+'" data-toast-container="'+n.containerId+'" style="'+t.join(";")+'"></div>'),this.toastContainer=jQuery('[data-toast-container="'+n.containerId+'"]')},this.push=function(t,a){return n.containerId||this.init(),e.isString(t)&&(t={title:i.title,msg:t}),t.toastType="push",n.dialogConfig={},jQuery.extend(!0,n.dialogConfig,i,t),t=n.dialogConfig,u.call(this,t,a),t=null,a=null,this},this.confirm=function(t,a){return n.containerId||this.init(),e.isString(t)&&(t={title:i.title,msg:t}),t.toastType="confirm",n.dialogConfig={},jQuery.extend(!0,n.dialogConfig,i,t),t=n.dialogConfig,"undefined"==typeof t.btns&&(t.btns={ok:{label:i.lang.ok,theme:t.theme}}),u.call(this,t,a),t=null,a=null,this},this.close=function(t,n){"undefined"==typeof t&&(t=e.last(this.queue));var l=t.toastBox;return l.addClass("push"==t.toastType?"removed":"destroy"),this.queue=e.filter(this.queue,function(){return t.id!=this.id}),setTimeout(function(){var e={toastId:t.id};l.remove(),n&&n.call(e),e={self:this,state:"close",toastId:t.id},s.call(this,t,e),0===this.queue.length&&(o&&clearTimeout(o),o=setTimeout(function(){0===this.queue.length&&(a=0)}.bind(this),3e3)),e=null,t=null,n=null,l=null}.bind(this),i.animateTime),this},this.main=function(){t.toast_instance=t.toast_instance||[],t.toast_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"modal",version:"0.7.8"},function(){var i=function(){var i,n=this,a={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},o=function(t){var e=t;return"changedTouches"in t&&(e=t.changedTouches[0]),{clientX:e.clientX,clientY:e.clientY}};this.instanceId=ax5.getGuid(),this.config={id:"ax5-modal-"+this.instanceId,position:{left:"center",top:"middle",margin:10},minimizePosition:"bottom-right",clickEventName:"click",theme:"default",width:300,height:400,closeToEsc:!0,animateTime:250},this.activeModal=null,this.$={},i=this.config;var s=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),!0},l=function(){return' \n                    <div id="{{modalId}}" data-modal-els="root" class="ax5modal {{theme}} {{fullscreen}}" style="{{styles}}">\n                        {{#header}}\n                        <div class="ax-modal-header" data-modal-els="header">\n                            {{{title}}}\n                            {{#btns}}\n                                <div class="ax-modal-header-addon">\n                                {{#@each}}\n                                <a tabindex="-1" data-modal-header-btn="{{@key}}" class="{{@value.theme}}">{{{@value.label}}}</a>\n                                {{/@each}}\n                                </div>\n                            {{/btns}}\n                        </div>\n                        {{/header}}\n                        <div class="ax-modal-body" data-modal-els="body">\n                        {{#iframe}}\n                        \n                            <div data-modal-els="iframe-wrap" style="-webkit-overflow-scrolling: touch; overflow: auto;position: relative;">\n                                <table data-modal-els="iframe-loading" style="width:100%;height:100%;"><tr><td style="text-align: center;vertical-align: middle">{{{iframeLoadingMsg}}}</td></tr></table>\n                                <iframe name="{{modalId}}-frame" src="" width="100%" height="100%" frameborder="0" data-modal-els="iframe" style="position: absolute;left:0;top:0;"></iframe>\n                            </div>\n                            <form name="{{modalId}}-form" data-modal-els="iframe-form">\n                            <input type="hidden" name="modalId" value="{{modalId}}" />\n                            {{#param}}\n                            {{#@each}}\n                            <input type="hidden" name="{{@key}}" value="{{@value}}" />\n                            {{/@each}}\n                            {{/param}}\n                            </form>\n                        {{/iframe}}\n                        </div>\n                    </div>\n                    '},r=function(t,e){var i={modalId:t,theme:e.theme,header:e.header,fullScreen:e.fullScreen?"fullscreen":"",styles:[],iframe:e.iframe,iframeLoadingMsg:e.iframeLoadingMsg};return e.zIndex&&i.styles.push("z-index:"+e.zIndex),i.iframe&&"string"==typeof i.iframe.param&&(i.iframe.param=ax5.util.param(i.iframe.param)),ax5.mustache.render(l(),i)},u=function(t,l){var u;jQuery(document.body).append(r.call(this,t.id,t)),this.activeModal=jQuery("#"+t.id),this.$={root:this.activeModal.find('[data-modal-els="root"]'),header:this.activeModal.find('[data-modal-els="header"]'),body:this.activeModal.find('[data-modal-els="body"]')},t.iframe&&(this.$["iframe-wrap"]=this.activeModal.find('[data-modal-els="iframe-wrap"]'),this.$.iframe=this.activeModal.find('[data-modal-els="iframe"]'),this.$["iframe-form"]=this.activeModal.find('[data-modal-els="iframe-form"]'),this.$["iframe-loading"]=this.activeModal.find('[data-modal-els="iframe-loading"]')),this.align(),u={self:this,id:t.id,theme:t.theme,width:t.width,height:t.height,state:"open",$:this.$},t.iframe&&(this.$["iframe-wrap"].css({height:t.height}),this.$.iframe.css({height:t.height}),this.$["iframe-form"].attr({method:t.iframe.method}),this.$["iframe-form"].attr({target:t.id+"-frame"}),this.$["iframe-form"].attr({action:t.iframe.url}),this.$.iframe.on("load",function(){u.state="load",t.iframeLoadingMsg&&this.$["iframe-loading"].hide(),s.call(this,t,u)}.bind(this)),t.iframeLoadingMsg||this.$.iframe.show(),this.$["iframe-form"].submit()),l&&l.call(u),s.call(this,t,u),t.closeToEsc&&jQuery(window).bind("keydown.ax-modal",function(t){d.call(this,t||window.event)}.bind(this)),jQuery(window).bind("resize.ax-modal",function(t){this.align(null,t||window.event)}.bind(this)),this.activeModal.find("[data-modal-header-btn]").on(i.clickEventName,function(e){c.call(this,e||window.event,t)}.bind(this)),this.$.header.bind(a.mousedown,function(t){n.mousePosition=o(t),p.on.call(n)}).bind("dragstart",function(t){return e.stopEvent(t),!1})},c=function(t,i,n,a,o){var s;t.srcElement&&(t.target=t.srcElement),a=e.findParentNode(t.target,function(t){return t.getAttribute("data-modal-header-btn")?!0:void 0}),a&&(o=a.getAttribute("data-modal-header-btn"),s={self:this,key:o,value:i.header.btns[o],dialogId:i.id,btnTarget:a},i.header.btns[o].onClick&&i.header.btns[o].onClick.call(s,o)),s=null,i=null,n=null,a=null,o=null},d=function(t){t.keyCode==ax5.info.eventKeys.ESC&&this.close()},h={"top-left":function(){this.align({left:"left",top:"top"})},"top-right":function(){this.align({left:"right",top:"top"})},"bottom-left":function(){this.align({left:"left",top:"bottom"})},"bottom-right":function(){this.align({left:"right",top:"bottom"})},"center-middle":function(){this.align({left:"center",top:"middle"})}},p={on:function(){var t=this.activeModal.position(),e={width:this.activeModal.outerWidth(),height:this.activeModal.outerHeight()},o={width:jQuery(window).width(),height:jQuery(window).height()},s=function(i){n.__dx=i.clientX-n.mousePosition.clientX,n.__dy=i.clientY-n.mousePosition.clientY;var a=0,s=o.width-e.width,l=0,r=o.height-e.height;return a>t.left+n.__dx?n.__dx=-t.left:s<t.left+n.__dx&&(n.__dx=s-t.left),l>t.top+n.__dy?n.__dy=-t.top:r<t.top+n.__dy&&(n.__dy=r-t.top),{left:t.left+n.__dx+$(document).scrollLeft(),top:t.top+n.__dy+$(document).scrollTop()}};n.__dx=0,n.__dy=0,jQuery(document.body).bind(a.mousemove+".ax5modal-"+i.id,function(i){n.resizer||(n.resizerBg=jQuery('<div class="ax5modal-resizer-background" ondragstart="return false;"></div>'),n.resizer=jQuery('<div class="ax5modal-resizer" ondragstart="return false;"></div>'),n.resizer.css({left:t.left,top:t.top,width:e.width,height:e.height}),jQuery(document.body).append(n.resizerBg).append(n.resizer),n.activeModal.addClass("draged")),n.resizer.css(s(i))}).bind(a.mouseup+".ax5layout-"+this.instanceId,function(t){p.off.call(n)}).bind("mouseleave.ax5layout-"+this.instanceId,function(t){p.off.call(n)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){var t=function(){var t=this.activeModal.offset();t.left+=this.__dx-$(document).scrollLeft(),t.top+=this.__dy-$(document).scrollTop(),this.activeModal.css(t)};this.resizer&&(this.activeModal.removeClass("draged"),this.resizer.remove(),this.resizer=null,this.resizerBg.remove(),this.resizerBg=null,t.call(this)),jQuery(document.body).unbind(a.mousemove+".ax5modal-"+i.id).unbind(a.mouseup+".ax5modal-"+i.id).unbind("mouseleave.ax5modal-"+i.id),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}};this.init=function(){this.onStateChanged=i.onStateChanged},this.open=function(t,e){return this.activeModal||(t=n.modalConfig=jQuery.extend(!0,{},i,t),u.call(this,t,e)),this},this.close=function(t){return this.activeModal&&(t=n.modalConfig,this.activeModal.addClass("destroy"),jQuery(window).unbind("keydown.ax-modal"),jQuery(window).unbind("resize.ax-modal"),setTimeout(function(){this.activeModal&&(this.activeModal.remove(),this.activeModal=null),s.call(this,t,{self:this,state:"close"})}.bind(this),i.animateTime)),this},this.minimize=function(){return function(t){var e=n.modalConfig;return"undefined"==typeof t&&(t=i.minimizePosition),this.minimized=!0,this.$.body.hide(),n.modalConfig.originalHeight=e.height,n.modalConfig.height=0,h[t].call(this),s.call(this,e,{self:this,state:"minimize"}),this}}(),this.maximize=function(){var t=n.modalConfig;return this.minimized&&(this.minimized=!1,this.$.body.show(),n.modalConfig.height=n.modalConfig.originalHeight,n.modalConfig.originalHeight=void 0,this.align({left:"center",top:"middle"}),s.call(this,t,{self:this,state:"restore"})),this},this.css=function(t){return this.activeModal&&!n.fullScreen&&(this.activeModal.css(t),t.width&&(n.modalConfig.width=this.activeModal.width()),t.height&&(n.modalConfig.height=this.activeModal.height(),this.$.iframe&&(this.$["iframe-wrap"].css({height:n.modalConfig.height}),this.$.iframe.css({height:n.modalConfig.height})))),this},this.setModalConfig=function(t){return n.modalConfig=jQuery.extend({},n.modalConfig,t),this.align(),this},this.align=function(){return function(t,i){if(!this.activeModal)return this;var a=n.modalConfig,o={width:a.width,height:a.height},s=function(t){return"undefined"==typeof t?!1:e.isFunction(t)?t():void 0}(a.fullScreen);return s?(a.header&&this.$.header.hide(),o.width=jQuery(window).width(),o.height=a.height,o.left=0,o.top=0):(a.header&&this.$.header.show(),t&&jQuery.extend(!0,a.position,t),a.header&&(o.height+=this.$.header.outerHeight()),"left"==a.position.left?o.left=a.position.margin||0:"right"==a.position.left?o.left=jQuery(window).width()-o.width-(a.position.margin||0):"center"==a.position.left?o.left=jQuery(window).width()/2-o.width/2:o.left=a.position.left||0,"top"==a.position.top?o.top=a.position.margin||0:"bottom"==a.position.top?o.top=jQuery(window).height()-o.height-(a.position.margin||0):"middle"==a.position.top?o.top=jQuery(window).height()/2-o.height/2:o.top=a.position.top||0,o.left<0&&(o.left=0),o.top<0&&(o.top=0)),this.activeModal.css(o),a.iframe&&(this.$["iframe-wrap"].css({height:o.height}),this.$.iframe.css({height:o.height})),this}}(),this.main=function(){t.modal_instance=t.modal_instance||[],t.modal_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"calendar",version:"0.8.9"},function(){var i=function(){var i,n=this,a=1;this.instanceId=ax5.getGuid(),this.target=null,this.selection=[],this.selectionMap={},this.selectableMap={},this.markerMap={},this.printedDay={start:"",end:""},this.config={clickEventName:"click",theme:"default",mode:"day",dateFormat:"yyyy-MM-dd",displayDate:new Date,animateTime:250,dimensions:{controlHeight:"40",controlButtonWidth:"40",colHeadHeight:"30",itemPadding:2},lang:{yearHeading:"Choose the year",monthHeading:"Choose the month",yearTmpl:"%s",months:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],dayTmpl:"%s"},multipleSelect:!1,selectMode:"day",defaultMarkerTheme:"holiday",defaultPeriodTheme:"period"},i=this.config;var o=function(t,e){t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),e=null},s=function(){return'\n                <div class="ax5-ui-calendar {{theme}}" data-calendar-els="root" onselectstart="return false;">\n                    {{#control}}\n                    <div class="calendar-control" data-calendar-els="control" style="{{controlCSS}}">\n                        <a class="date-move-left" data-calendar-move="left" style="{{controlButtonCSS}}">{{{left}}}</a>\n                        <div class="date-display" data-calendar-els="control-display" style="{{controlCSS}}"></div>\n                        <a class="date-move-right" data-calendar-move="right" style="{{controlButtonCSS}}">{{{right}}}</a>\n                    </div>\n                    {{/control}}\n                    <div class="calendar-body" data-calendar-els="body"></div>\n                </div>\n                '},l=function(){var t=jQuery.extend(!0,{},i,{controlCSS:{},controlButtonCSS:{}}),n=s();t.controlButtonCSS.height=t.controlCSS.height=e.cssNumber(i.dimensions.controlHeight),t.controlButtonCSS["line-height"]=t.controlCSS["line-height"]=e.cssNumber(i.dimensions.controlHeight),t.controlButtonCSS.width=e.cssNumber(i.dimensions.controlHeight),t.controlCSS=e.css(t.controlCSS),t.controlButtonCSS=e.css(t.controlButtonCSS);try{return ax5.mustache.render(n,t)}finally{t=null,n=null}},r=function(){return'\n                <table data-calendar-table="day" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                        {{#weekNames}}\n                            <td class="calendar-col-{{col}}" style="height: {{colHeadHeight}}">\n                            {{label}}\n                            </td>\n                        {{/weekNames}}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfWeek}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfWeek}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-day {{addClass}}" data-calendar-item-date="{{thisDate}}">\n                                    <span class="addon addon-header"></span>\n                                    {{thisDataLabel}}\n                                    <span class="addon addon-footer"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},u=function(){return'\n                <table data-calendar-table="month" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="3" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-month {{addClass}}" data-calendar-item-month="{{thisMonth}}">\n                                    <span class="addon"></span>\n                                    {{thisMonthLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},c=function(){return'\n                <table data-calendar-table="year" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="4" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-year {{addClass}}" data-calendar-item-year="{{thisYear}}">\n                                    <span class="addon"></span>\n                                    {{thisYearLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},d=function(){var t,n,a=e.date(i.displayDate),o="",s="";return i.control&&("day"==i.mode||"d"==i.mode?(o=i.control.yearTmpl?i.control.yearTmpl.replace("%s",a.getFullYear()):a.getFullYear(),s=i.control.monthTmpl?i.control.monthTmpl.replace("%s",i.lang.months[a.getMonth()]):i.lang.months[a.getMonth()],this.$["control-display"].html(function(){return i.control.yearFirst?'<span data-calendar-display="year">'+o+'</span><span data-calendar-display="month">'+s+"</span>":'<span data-calendar-display="month">'+s+'</span><span data-calendar-display="year">'+o+"</span>"}())):"month"==i.mode||"m"==i.mode?(o=i.control.yearTmpl?i.control.yearTmpl.replace("%s",a.getFullYear()):a.getFullYear(),this.$["control-display"].html('<span data-calendar-display="year">'+o+"</span>")):("year"==i.mode||"y"==i.mode)&&(t=i.control.yearTmpl?i.control.yearTmpl.replace("%s",a.getFullYear()-10):a.getFullYear()-10,n=i.control.yearTmpl?i.control.yearTmpl.replace("%s",Number(a.getFullYear())+9):Number(a.getFullYear())+9,this.$["control-display"].html(t+" ~ "+n)),this.$["control-display"].find("[data-calendar-display]").on(i.clickEventName,function(t){var i,n=e.findParentNode(t.target,function(t){return t.getAttribute("data-calendar-display")?!0:void 0});n&&(i=n.getAttribute("data-calendar-display"),this.changeMode(i)),n=null,i=null}.bind(this))),a=null,o=null,s=null,t=null,n=null,this},h=function(t){var a,s,l,u,c=e.date(t),h=new Date(c.getFullYear(),c.getMonth(),1,12),p=i.displayDate,f=function(){var t=h.getDay();0==t&&(t=7);try{return e.date(h,{add:{d:-t}})}finally{t=null}}(),g=c.getMonth(),v={},b=this.$.body.width(),y=Math.floor(b*(6/7)),x=r();for(i.dimensions.height&&(y=e.number(i.dimensions.height)-e.number(i.dimensions.colHeadHeight)),v.height=Math.floor(y/6)-2*e.number(i.dimensions.itemPadding)+"px",v["line-height"]=v.height,v.padding=e.cssNumber(i.dimensions.itemPadding),u={weekNames:[].concat(ax5.info.weekNames),list:[]},u.weekNames.forEach(function(t){t.colHeadHeight=e.cssNumber(i.dimensions.colHeadHeight)}),a=f,s=0;6>s;){for(l=0;7>l;){var w=""+e.date(a,{"return":i.dateFormat}),k={row:s,col:l,isStartOfWeek:0==l,thisDate:""+w,thisDataLabel:i.lang.dayTmpl.replace("%s",a.getDate()),itemStyles:e.css(v),addClass:function(){return i.selectable?n.selectableMap[w]?a.getMonth()==g?"live":"":"disable":a.getMonth()==g?w==e.date(p,{"return":"yyyyMMdd"})?"focus":"live":""}()+" "+function(){return n.markerMap[w]?n.markerMap[w].theme||i.defaultMarkerTheme:""}()+" "+function(){return n.selectionMap[w]?"selected-day":""}()};u.list.push(k),l++,a=e.date(a,{add:{d:1}}),w=null,k=null}s++}this.$.body.html(ax5.mustache.render(x,u)),this.$.body.find("[data-calendar-item-date]").on(i.clickEventName,function(t){t=t||window.event,m.call(n,t,"date"),e.stopEvent(t)}),this.printedDay={start:f,end:a},o.call(this,null,{self:this,action:"printDay",printedDay:this.printedDay}),d.call(this),c=null,h=null,p=null,f=null,a=null,g=null,v=null,s=null,l=null,b=null,y=null,u=null,x=null},p=function(t){var a,s,l,r,c,h=e.date(t),p=h.getMonth(),f={},g=this.$.body.width(),v=Math.floor(g*(6/7)),b=u();for(i.dimensions.height&&(v=e.number(i.dimensions.height)-e.number(i.dimensions.colHeadHeight)),f.height=Math.floor(v/4)-2*e.number(i.dimensions.itemPadding)+"px",f["line-height"]=f.height,f.padding=e.cssNumber(i.dimensions.itemPadding),c={colHeadHeight:e.cssNumber(i.dimensions.colHeadHeight),colHeadLabel:i.lang.monthHeading,list:[]},r=0,l=0,a=0;4>a;){for(s=0;3>s;){var y={row:a,col:s,isStartOfRow:0==s,thisMonth:h.getFullYear()+"-"+e.setDigit(l+1,2)+"-"+e.setDigit(h.getDate(),2),thisMonthLabel:i.lang.months[l],itemStyles:e.css(f),addClass:function(){return i.selectable?n.selectableMap[l]?"live":"disable":"live"}()+" "+function(){return l==p?"focus":""}()+" "+function(){return n.markerMap[l]?n.markerMap[l].theme||i.defaultMarkerTheme:""}()};c.list.push(y),l++,s++,y=null}a++}this.$.body.html(ax5.mustache.render(b,c)),this.$.body.find("[data-calendar-item-month]").on(i.clickEventName,function(t){t=t||window.event,m.call(n,t,"month"),e.stopEvent(t)}),this.printedDay={start:h.getFullYear()+"-"+e.setDigit(r+1,2),end:h.getFullYear()+"-"+e.setDigit(l,2)},o.call(this,null,{self:this,action:"printMonth",printedDay:this.printedDay}),d.call(this),h=null,p=null,f=null,a=null,s=null,l=null,r=null,g=null,v=null,c=null,b=null},f=function(t){var a,s,l,r,u,h=e.date(t),p=h.getFullYear(),f={},g=this.$.body.width(),v=Math.floor(g*(6/7)),b=c();for(i.dimensions.height&&(v=e.number(i.dimensions.height)-e.number(i.dimensions.colHeadHeight)),f.height=Math.floor(v/5)-2*e.number(i.dimensions.itemPadding)+"px",f["line-height"]=f.height,f.padding=e.cssNumber(i.dimensions.itemPadding),u={colHeadHeight:e.cssNumber(i.dimensions.colHeadHeight),colHeadLabel:i.lang.yearHeading,list:[]},r=p-10,l=p-10,a=0;5>a;){for(s=0;4>s;){var y={row:a,col:s,isStartOfRow:0==s,thisYear:l+"-"+e.setDigit(h.getMonth()+1,2)+"-"+e.setDigit(h.getDate(),2),thisYearLabel:i.lang.yearTmpl.replace("%s",l),itemStyles:e.css(f),addClass:function(){return i.selectable?n.selectableMap[l]?"live":"disable":"live"}()+" "+function(){return l==p?"focus":""}()+" "+function(){return n.selectableMap[l]?n.selectableMap[l].theme||i.defaultMarkerTheme:""}()};u.list.push(y),l++,s++,y=null}a++}this.$.body.html(ax5.mustache.render(b,u)),this.$.body.find("[data-calendar-item-year]").on(i.clickEventName,function(t){t=t||window.event,m.call(this,t,"year"),e.stopEvent(t)}),this.printedDay={start:r,end:l-1},o.call(this,null,{self:this,action:"printYear",printedDay:this.printedDay}),d.call(this),h=null,p=null,f=null,a=null,s=null,l=null,r=null,g=null,v=null,u=null,b=null},m=function(t,o,s,l){var r,u,c;o=o||"date",s=e.findParentNode(t.target,function(t){return t.getAttribute("data-calendar-item-"+o)?!0:void 0}),s&&(l=s.getAttribute("data-calendar-item-"+o),u=e.date(l,{"return":i.dateFormat}),c=!0,a=i.multipleSelect?e.isNumber(i.multipleSelect)?i.multipleSelect:2:1,i.selectable&&(n.selectableMap[u]||(c=!1)),
"date"==o?c&&(n.selection.length>=a&&(r=n.selection.splice(0,n.selection.length-(a-1)),r.forEach(function(t){n.$.body.find('[data-calendar-item-date="'+e.date(t,{"return":i.dateFormat})+'"]').removeClass("selected-day")})),jQuery(s).addClass("selected-day"),n.selection.push(l),n.onClick&&n.onClick.call({self:this,date:l,target:this.target,dateElement:s})):"month"==o?"month"==i.selectMode?c&&(n.selection.length>=a&&(r=n.selection.splice(0,n.selection.length-(a-1)),r.forEach(function(t){n.$.body.find('[data-calendar-item-month="'+e.date(t,{"return":"yyyy-MM-dd"})+'"]').removeClass("selected-month")})),jQuery(s).addClass("selected-month"),n.selection.push(l),n.onClick&&n.onClick.call({self:this,date:l,target:this.target,dateElement:s})):n.changeMode("day",l):"year"==o&&("year"==i.selectMode?c&&(n.selection.length>=a&&(r=n.selection.splice(0,n.selection.length-(a-1)),r.forEach(function(t){n.$.body.find('[data-calendar-item-year="'+e.date(t,{"return":"yyyy-MM-dd"})+'"]').removeClass("selected-year")})),jQuery(s).addClass("selected-year"),n.selection.push(l),n.onClick&&n.onClick.call({self:this,date:l,target:this.target,dateElement:s})):n.changeMode("month",l))),o=null,s=null,l=null,r=null,u=null,c=null},g=function(t,n,a){n=e.findParentNode(t.target,function(t){return t.getAttribute("data-calendar-move")?!0:void 0}),n&&(a=n.getAttribute("data-calendar-move"),"day"==i.mode?("left"==a?i.displayDate=e.date(i.displayDate,{add:{m:-1}}):i.displayDate=e.date(i.displayDate,{add:{m:1}}),h.call(this,i.displayDate)):"month"==i.mode?("left"==a?i.displayDate=e.date(i.displayDate,{add:{y:-1}}):i.displayDate=e.date(i.displayDate,{add:{y:1}}),p.call(this,i.displayDate)):"year"==i.mode&&("left"==a?i.displayDate=e.date(i.displayDate,{add:{y:-10}}):i.displayDate=e.date(i.displayDate,{add:{y:10}}),f.call(this,i.displayDate))),n=null,a=null},v=function(){setTimeout(function(){if("day"===i.mode||"d"===i.mode)for(var t in this.markerMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass(this.markerMap[t].theme||i.defaultMarkerTheme)}.bind(this))},b=function(){setTimeout(function(){for(var t in this.selectionMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass("selected-day")}.bind(this))},y=function(){setTimeout(function(){if("day"===i.mode||"d"===i.mode)for(var t in this.periodMap)this.periodMap[t].label&&this.$.body.find('[data-calendar-item-date="'+t+'"]').find(".addon-footer").html(this.periodMap[t].label),this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass(this.periodMap[t].theme)}.bind(this))},x=function(){if("day"===i.mode||"d"===i.mode)for(var t in this.periodMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').find(".addon-footer").empty(),this.$.body.find('[data-calendar-item-date="'+t+'"]').removeClass(this.periodMap[t].theme)};this.init=function(){this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,i.target||console.log(ax5.info.getError("ax5calendar","401","setConfig")),this.target=jQuery(i.target),i.displayDate=e.date(i.displayDate),this.target.html(l.call(this)),this.$={root:this.target.find('[data-calendar-els="root"]'),control:this.target.find('[data-calendar-els="control"]'),"control-display":this.target.find('[data-calendar-els="control-display"]'),body:this.target.find('[data-calendar-els="body"]')},i.control&&this.$.control.find("[data-calendar-move]").on(i.clickEventName,function(t){g.call(this,t||window.event)}.bind(this)),i.selection&&this.setSelection(i.selection,!1),i.selectable&&this.setSelectable(i.selectable,!1),i.marker&&this.setMarker(i.marker,!1),setTimeout(function(){"day"===i.mode||"d"===i.mode?h.call(this,i.displayDate):"month"===i.mode||"m"===i.mode?p.call(this,i.displayDate):("year"===i.mode||"y"===i.mode)&&f.call(this,i.displayDate)}.bind(this))},this.changeMode=function(t,e){return"undefined"!=typeof e&&(i.displayDate=e),t&&(i.mode=t),this.$.body.removeClass("fadein").addClass("fadeout"),setTimeout(function(){"day"==i.mode||"d"==i.mode?h.call(this,i.displayDate):"month"==i.mode||"m"==i.mode?p.call(this,i.displayDate):("year"==i.mode||"y"==i.mode)&&f.call(this,i.displayDate),this.$.body.removeClass("fadeout").addClass("fadein")}.bind(this),i.animateTime),this},this.setSelection=function(){n.selectionMap={};var t={arr:function(t,a,o){return a={},e.isArray(t)?(n.selection=t=t.splice(0,o),t.forEach(function(t){e.isDate(t)&&(t=e.date(t,{"return":i.dateFormat})),a[t]=!0}),a):a}};return function(n,o){var s={};if(a=i.multipleSelect?e.isNumber(i.multipleSelect)?i.multipleSelect:2:1,i.selection=n){if(!e.isArray(n))return this;s=t.arr(n,{},a)}return this.selectionMap=jQuery.extend({},s),o!==!1&&b.call(this),s=null,this}}(),this.getSelection=function(){return this.selection},this.setSelectable=function(){n.selectableMap={};var t={arr:function(t,n){return n={},e.isArray(t)?(t.forEach(function(t){e.isDate(t)&&(t=e.date(t,{"return":i.dateFormat})),n[t]=!0}),n):n},obj:function(t,i){if(i={},e.isArray(t))return i;if(t.range)return i;for(var n in t)i[n]=t[n];return i},range:function(t,n){return n={},e.isArray(t)?n:t.range?(t.range.forEach(function(t){if(e.isDateFormat(t.from)&&e.isDateFormat(t.to))for(var a=e.date(t.from);a<=e.date(t.to);a.setDate(a.getDate()+1))n[e.date(a,{"return":i.dateFormat})]=!0;else for(var o=t.from;o<=t.to;o++)n[o]=!0}),n):n}};return function(n,a){var o,s={};if(i.selectable=n)if(e.isArray(n))s=t.arr(n);else{for(o in t)if(n[o]){s=t[o](n);break}0===Object.keys(s).length&&(s=t.obj(n))}return this.selectableMap=s,a!==!1&&this.changeMode(),this}}(),this.setMarker=function(){n.markerMap={};var t={obj:function(t,i){if(i={},e.isArray(t))return i;if(t.range)return i;for(var n in t)i[n]=t[n];return t=null,i},range:function(t,n){return n={},e.isArray(t)?n:t.range?(t.range.forEach(function(t){if(e.isDateFormat(t.from)&&e.isDateFormat(t.to))for(var a=e.date(t.from);a<=e.date(t.to);a.setDate(a.getDate()+1))n[e.date(a,{"return":i.dateFormat})]={theme:t.theme,label:t.label};else for(var o=t.from;o<=t.to;o++)n[o]={theme:t.theme,label:t.label}}),t=null,n):n}};return function(e,n){var a,o={};if(i.marker=e){for(a in t)if(e[a]){o=t[a](e);break}0===Object.keys(o).length&&(o=t.obj(e))}return this.markerMap=o,n!==!1&&v.call(this),this}}(),this.setPeriod=function(){n.periodMap={};var t={range:function(t,n){return n={},e.isArray(t)?n:t.range?(t.range.forEach(function(t){if(e.isDateFormat(t.from)&&e.isDateFormat(t.to))for(var a=new Date(e.date(t.from));a<=e.date(t.to);a.setDate(a.getDate()+1))a.getTime()==e.date(t.from).getTime()?n[e.date(a,{"return":i.dateFormat})]={theme:t.theme||i.defaultPeriodTheme,label:t.fromLabel}:a.getTime()==e.date(t.to).getTime()?n[e.date(a,{"return":i.dateFormat})]={theme:t.theme||i.defaultPeriodTheme,label:t.toLabel}:n[e.date(a,{"return":i.dateFormat})]={theme:t.theme||i.defaultPeriodTheme}}),t=null,n):n}};return function(e,n){var a={};return n!==!1&&x.call(this),(i.period=e)&&(a=t.range(e)),this.periodMap=a,n!==!1&&y.call(this),this}}(),this.main=function(){t.calendar_instance=t.calendar_instance||[],t.calendar_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"picker",version:"0.7.13"},function(){var t=function(){var t,i=this;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",title:"",lang:{ok:"ok",cancel:"cancel"},animateTime:100,calendar:{control:{left:ax5.def.picker.date_leftArrow||"&#x02190",yearTmpl:ax5.def.picker.date_yearTmpl||"%s",monthTmpl:ax5.def.picker.date_monthTmpl||"%s",right:ax5.def.picker.date_rightArrow||"&#x02192",yearFirst:!0}}},this.queue=[],this.activePicker=null,this.activePickerQueueIndex=-1,this.openTimer=null,this.closeTimer=null,t=this.config;var n=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),!0},a=function(){var i={focus:function(t,e){this.open(t)},click:function(t,e){this.open(t)}},n={"@fn":function(e,i){var n=this.queue[e],a={},o=i.length;a={inputLength:o||1},o>1&&(a.btns={ok:{label:t.lang.ok,theme:t.theme}}),this.queue[e]=jQuery.extend(!0,a,n),a=null,o=null},date:function(e,i){var n=this.queue[e],a=n.content?n.content.width||270:270,o=n.content?n.content.margin||5:5,s={},l=i.length;s={contentWidth:a*l+(l-1)*o,content:{width:a,margin:o},inputLength:l||1},l>1&&!n.btns&&(s.btns={ok:{label:t.lang.ok,theme:t.theme}}),this.queue[e]=jQuery.extend(!0,s,n),a=null,o=null,s=null,l=null},"secure-num":function(t,e){var i=this.queue[t],n={},a=e.length;n={inputLength:a||1},this.queue[t]=jQuery.extend(!0,n,i),n=null,a=null},keyboard:function(t,e){var i=this.queue[t],n={},a=e.length;n={inputLength:a||1},this.queue[t]=jQuery.extend(!0,n,i),n=null,a=null},numpad:function(t,e){var i=this.queue[t],n={},a=e.length;n={inputLength:a||1},this.queue[t]=jQuery.extend(!0,n,i),n=null,a=null}};return function(t){var a,o=this.queue[t];if(!o.content)return console.log(ax5.info.getError("ax5picker","501","bind")),this;if(a="INPUT"==o.$target.get(0).tagName.toUpperCase()?o.$target:o.$target.find("input[type]"),e.isFunction(o.content))n["@fn"].call(this,t,a);else for(var s in n)if(o.content.type==s){n[s].call(this,t,a);break}return a.unbind("focus.ax5picker").unbind("click.ax5picker").bind("focus.ax5picker",i.focus.bind(this,t)).bind("click.ax5picker",i.click.bind(this,t)),o.$target.find(".input-group-addon").unbind("click.ax5picker").bind("click.ax5picker",i.click.bind(this,t)),o.content.formatter&&ax5.ui.formatter&&a.ax5formatter(o.content.formatter),a=null,o=null,t=null,this}}(),o=function(t){return'\n                    <div class="ax5-ui-picker {{theme}}" id="{{id}}" data-picker-els="root">\n                        {{#title}}\n                            <div class="ax-picker-heading">{{title}}</div>\n                        {{/title}}\n                        <div class="ax-picker-body">\n                            <div class="ax-picker-content" data-picker-els="content" style="width:{{contentWidth}}px;"></div>\n                            {{#btns}}\n                                <div class="ax-picker-buttons">\n                                {{#btns}}\n                                    {{#@each}}\n                                    <button data-picker-btn="{{@key}}" class="btn btn-default {{@value.theme}}">{{@value.label}}</button>\n                                    {{/@each}}\n                                {{/btns}}\n                                </div>\n                            {{/btns}}\n                        </div>\n                        <div class="ax-picker-arrow"></div>\n                    </div>\n                    '},s=function(t){if(!this.activePicker)return this;var e=function(e){var i,n=jQuery(window),a=jQuery(document.body),o={},s=12,l={},r={};o=e.$target.offset(),l={width:e.$target.outerWidth(),height:e.$target.outerHeight()},r={winWidth:Math.max(n.width(),a.width()),winHeight:Math.max(n.height(),a.height()),width:this.activePicker.outerWidth(),height:this.activePicker.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction?i=e.direction:(i="top",o.top-r.height-s<0?i="top":o.top+l.height+r.height+s>r.winHeight&&(i="bottom")),t&&this.activePicker.addClass("direction-"+i);var u=function(){var t={left:0,top:0};switch(i){case"top":t.left=o.left+l.width/2-r.width/2,t.top=o.top+l.height+s;break;case"bottom":t.left=o.left+l.width/2-r.width/2,t.top=o.top-r.height-s;break;case"left":t.left=o.left+l.width+s,t.top=o.top-r.height/2+l.height/2;break;case"right":t.left=o.left-r.width-s,t.top=o.top-r.height/2+l.height/2}return t}();(function(){("top"==i||"bottom"==i)&&(u.left<0?(u.left=s,this.activePickerArrow.css({left:o.left+l.width/2-u.left})):u.left+r.width>r.winWidth&&(u.left=r.winWidth-r.width-s,this.activePickerArrow.css({left:o.left+l.width/2-u.left})))}).call(this),this.activePicker.css(u)},i=this.queue[this.activePickerQueueIndex];t&&jQuery(document.body).append(this.activePicker),setTimeout(function(){e.call(this,i)}.bind(this))},l=function(t,i){if(!this.activePicker)return this;var n=this.queue[this.activePickerQueueIndex];return i=e.findParentNode(t.target,function(t){return t.getAttribute("data-picker-els")?!0:n.$target.get(0)==t?!0:void 0}),i?this:(this.close(),this)},r=function(t,i){if(t.srcElement&&(t.target=t.srcElement),i=e.findParentNode(t.target,function(t){return t.getAttribute("data-picker-btn")?!0:void 0})){var n=this.queue[this.activePickerQueueIndex],a=i.getAttribute("data-picker-btn");if(n.btns&&n.btns[a].onClick){var o={key:a,value:n.btns[a],self:this,item:n};n.btns[a].onClick.call(o,a)}else this.close()}},u=function(t){t.keyCode==ax5.info.eventKeys.ESC&&this.close()},c=function(t){return e.isString(t)||(t=jQuery(t).data("data-axpicker-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5picker","402","getQueIdx"))};this.init=function(){this.onStateChanged=t.onStateChanged},this.bind=function(i){var n,o={};return i=jQuery.extend(!0,o,t,i),i.target?(i.$target=jQuery(i.target),i.$target.get(0)?(i.id||(i.id=i.$target.data("data-axpicker-id")),i.id||(i.id="ax5-picker-"+ax5.getGuid(),i.$target.data("data-axpicker-id",i.id)),n=e.search(this.queue,function(){return this.id==i.id}),-1===n?(this.queue.push(i),a.call(this,this.queue.length-1)):(this.queue[n]=jQuery.extend(!0,{},this.queue[n],i),a.call(this,n)),o=null,n=null,this):(console.log(ax5.info.getError("ax5picker","401","bind")),this)):(console.log(ax5.info.getError("ax5picker","401","bind")),this)},this.setContentValue=function(t,a,o){var s,l=e.isNumber(t)?t:c.call(this,t),r=this.queue[l];return r&&(s="INPUT"==r.$target.get(0).tagName.toUpperCase()?r.$target:jQuery(r.$target.find("input[type]").get(a)),s.val(o),n.call(this,r,{self:i,state:"changeValue",item:r,value:o}),1==r.inputLength&&this.close()),r=null,t=null,a=null,o=null,this},this.open=function(){var a={"@fn":function(t,e){var i=this.queue[t];return i.content.call(i,function(t){e(t)}),!0},date:function(n){for(var a=this.queue[n],o=[],s=0;s<a.inputLength;s++)o.push('<div style="width:'+e.cssNumber(a.content.width)+';float:left;" class="ax-picker-content-box" data-calendar-target="'+s+'"></div>'),s<a.inputLength-1&&o.push('<div style="width:'+a.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),a.pickerContent.html(o.join(""));var l=jQuery.extend({},t.calendar,{displayDate:new Date}),r="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:a.$target.find("input[type]");a.pickerContent.find("[data-calendar-target]").each(function(){var t=this.getAttribute("data-calendar-target"),e=r.get(t).value,n=ax5.util.date(e);l.displayDate=n,e&&(l.selection=[n]),l=jQuery.extend(!0,l,a.content.config||{}),l.target=this,l.onClick=function(){i.setContentValue(a.id,t,this.date)},new ax5.ui.calendar(l)})},"secure-num":function(t){for(var a=this.queue[t],o=[],s=0;s<a.inputLength;s++)o.push('<div style="width:'+e.cssNumber(a.content.width)+';float:left;" class="ax-picker-content-box" data-secure-num-target="'+s+'"></div>'),s<a.inputLength-1&&o.push('<div style="width:'+a.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),a.pickerContent.html(o.join("")),a.pickerContent.find("[data-secure-num-target]").each(function(){var t=this.getAttribute("data-secure-num-target"),e=[],o=function(t){var e,i,n;for(n=t.length;n;n-=1)e=Math.floor(Math.random()*n),i=t[n-1],t[n-1]=t[e],t[e]=i;return t}([0,1,2,3,4,5,6,7,8,9]),s=[{label:"&#x02190",fn:"back"},{label:"C",fn:"clear"}];o.forEach(function(t){e.push('<div style="float:left;'+a.content.config.btnWrapStyle+'">'),e.push('<button class="btn btn-default btn-'+a.content.config.btnTheme+'" style="'+a.content.config.btnStyle+'" data-secure-num-value="'+t+'">'+t+"</button>"),e.push("</div>")}),s.forEach(function(t){e.push('<div style="float:left;'+a.content.config.btnWrapStyle+'">'),e.push('<button class="btn btn-default btn-'+a.content.config.specialBtnTheme+'" style="'+a.content.config.btnStyle+'" data-secure-num-value="'+t.fn+'">'+t.label+"</button>"),e.push("</div>")}),e.push('<div style="clear:both;"></div>'),$(this).html(e.join("")).on("click","[data-secure-num-value]",function(){var e=this.getAttribute("data-secure-num-value"),o="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:jQuery(a.$target.find("input[type]").get(t)),s=o.val();"back"==e?o.val(s.substring(0,s.length-1)):"clear"==e?o.val(""):o.val(s+e),n.call(this,a,{self:i,state:"changeValue",item:a,value:o.val()})})})},keyboard:function(t){for(var a=this.queue[t],o=[],s=0;s<a.inputLength;s++)o.push('<div style="width:'+e.cssNumber(a.content.width)+';float:left;" class="ax-picker-content-box" data-keyboard-target="'+s+'"></div>'),s<a.inputLength-1&&o.push('<div style="width:'+a.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),a.pickerContent.html(o.join(""));var l=[[{value:"`",shiftValue:"~"},{value:"1",shiftValue:"!"},{value:"2",shiftValue:"@"},{value:"3",shiftValue:"#"},{value:"4",shiftValue:"$"},{value:"5",shiftValue:"%"},{value:"6",shiftValue:"^"},{value:"7",shiftValue:"&"},{value:"8",shiftValue:"*"},{value:"9",shiftValue:"("},{value:"0",shiftValue:")"},{value:"-",shiftValue:"_"},{value:"=",shiftValue:"+"},{label:"&#x02190",fn:"back"}],[{value:"q",shiftValue:"Q"},{value:"w",shiftValue:"W"},{value:"e",shiftValue:"E"},{value:"r",shiftValue:"R"},{value:"t",shiftValue:"T"},{value:"y",shiftValue:"Y"},{value:"u",shiftValue:"U"},{value:"i",shiftValue:"I"},{value:"o",shiftValue:"O"},{value:"p",shiftValue:"P"},{value:"[",shiftValue:"{"},{value:"]",shiftValue:"}"},{value:"\\",shiftValue:"|"}],[{label:"Clear",fn:"clear"},{value:"a",shiftValue:"A"},{value:"s",shiftValue:"S"},{value:"d",shiftValue:"D"},{value:"f",shiftValue:"F"},{value:"g",shiftValue:"G"},{value:"h",shiftValue:"H"},{value:"j",shiftValue:"J"},{value:"k",shiftValue:"K"},{value:"l",shiftValue:"L"},{value:";",shiftValue:":"},{value:"'",shiftValue:'"'}],[{label:"Shift",fn:"shift"},{value:"z",shiftValue:"Z"},{value:"x",shiftValue:"X"},{value:"c",shiftValue:"C"},{value:"v",shiftValue:"V"},{value:"b",shiftValue:"B"},{value:"n",shiftValue:"N"},{value:"m",shiftValue:"M"},{value:",",shiftValue:"<"},{value:".",shiftValue:">"},{value:"/",shiftValue:"?"},{label:"Close",fn:"close"}]],r=function(t){var e=[];return l.forEach(function(i){e.push('<div style="display: table;margin:0 auto;">'),i.forEach(function(i){var n,o,s,l,r;i.fn?(n=i.fn,o=i.label,s=a.content.config.specialBtnWrapStyle,l=a.content.config.specialBtnTheme,r=a.content.config.specialBtnStyle):(o=n=t?i.shiftValue:i.value,s=a.content.config.btnWrapStyle,l=a.content.config.btnTheme,r=a.content.config.btnStyle),e.push('<div style="display: table-cell;'+s+'">'),e.push('<button class="btn btn-default btn-'+l+'" style="'+r+'" data-keyboard-value="'+n+'">'+o+"</button>"),e.push("</div>")}),e.push("</div>")}),e.join("")};a.pickerContent.find("[data-keyboard-target]").each(function(){var t=this.getAttribute("data-keyboard-target"),e=$(this),o=!1,s=function(){o=!o,e.html(r(o))};e.html(r(o)).on("mousedown","[data-keyboard-value]",function(){var e=this.getAttribute("data-keyboard-value"),o="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:jQuery(a.$target.find("input[type]").get(t)),l=o.val();switch(e){case"back":o.val(l.substring(0,l.length-1));break;case"clear":o.val("");break;case"shift":return s(),!1;case"close":return i.close(),!1;default:o.val(l+e)}n.call(this,a,{self:i,state:"changeValue",item:a,value:o.val()})})})},numpad:function(t){for(var a=this.queue[t],o=[],s=0;s<a.inputLength;s++)o.push('<div style="width:'+e.cssNumber(a.content.width)+';float:left;" class="ax-picker-content-box" data-numpad-target="'+s+'"></div>'),s<a.inputLength-1&&o.push('<div style="width:'+a.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),a.pickerContent.html(o.join("")),a.pickerContent.find("[data-numpad-target]").each(function(){var t=this.getAttribute("data-numpad-target"),e=[],o=a.content.config.keyArray||[{value:"7"},{value:"8"},{value:"9"},{label:"BS",fn:"back"},{value:"4"},{value:"5"},{value:"6"},{label:"CLS",fn:"clear"},{value:"1"},{value:"2"},{value:"3"},{value:""},{value:"."},{value:"0"},{value:""},{label:"OK",fn:"enter"}];o.forEach(function(t){var i,n,o,s,l;t.fn?(i=t.fn,n=t.label,s=a.content.config.specialBtnTheme,o=a.content.config.specialBtnWrapStyle,l=a.content.config.specialBtnStyle):(n=i=t.value,s=i?a.content.config.btnTheme:"",o=a.content.config.btnWrapStyle,l=a.content.config.btnStyle),e.push('<div style="float:left;'+o+'">'),e.push('<button class="btn btn-default btn-'+s+'" style="'+l+'" data-numpad-value="'+i+'">'+(n||"&nbsp;")+"</button>"),e.push("</div>")}),e.push('<div style="clear:both;"></div>'),$(this).html(e.join("")).on("mousedown","[data-numpad-value]",function(){var e=this.getAttribute("data-numpad-value"),o="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:jQuery(a.$target.find("input[type]").get(t)),s=o.val(),l="";switch(e){case"back":l="changeValue",o.val(s.substring(0,s.length-1));break;case"clear":l="changeValue",o.val("");break;case"enter":return i.close(a,"enter"),!1;case"close":return i.close(),!1;default:l="changeValue",o.val(s+e)}n.call(this,a,{self:i,state:l,item:a,value:o.val()})})})}};return function(i,d){var h=e.isNumber(i)?i:c.call(this,i),p=this.queue[h];return this.openTimer&&clearTimeout(this.openTimer),this.activePicker?this.activePickerQueueIndex==h?this:d>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(d||0)+1)}.bind(this),t.animateTime),this):(this.activePicker=jQuery(ax5.mustache.render(o.call(this,p,h),p)),this.activePickerArrow=this.activePicker.find(".ax-picker-arrow"),this.activePickerQueueIndex=h,p.pickerContent=this.activePicker.find('[data-picker-els="content"]'),e.isFunction(p.content)?(p.pickerContent.html("Loading.."),a["@fn"].call(this,h,function(t){p.pickerContent.html(t)})):p.content.type in a&&a[p.content.type].call(this,h),this.activePicker.find("[data-picker-btn]").on(t.clickEventName,function(t){r.call(this,t||window.event,h)}.bind(this)),s.call(this,"append"),jQuery(window).bind("resize.ax5picker",function(){s.call(this)}.bind(this)),jQuery(window).bind("keyup.ax5picker",function(t){t=t||window.event,u.call(this,t),e.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5picker",function(t){t=t||window.event,l.call(this,t),e.stopEvent(t)}.bind(this)),n.call(this,p,{self:this,state:"open",item:p}),this)}}(),this.close=function(e,i){return this.closeTimer&&clearTimeout(this.closeTimer),this.activePicker?(e=this.queue[this.activePickerQueueIndex],this.activePicker.addClass("destroy"),jQuery(window).unbind("resize.ax5picker"),jQuery(window).unbind("click.ax5picker"),jQuery(window).unbind("keyup.ax5picker"),this.closeTimer=setTimeout(function(){this.activePicker&&this.activePicker.remove(),this.activePicker=null,this.activePickerQueueIndex=-1,n.call(this,e,{self:this,state:i||"close"})}.bind(this),t.animateTime),this):this},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return t}())}(),ax5.ui.picker_instance=new ax5.ui.picker,jQuery.fn.ax5picker=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.picker_instance.open(this);case"close":return ax5.ui.picker_instance.close(this);case"setValue":return ax5.ui.picker_instance.setContentValue(this,arguments[1],arguments[2]);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend(!0,t,e),ax5.ui.picker_instance.bind(t)});return this}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"formatter",version:"0.6.1"},function(){var e=(new Date,function(t,e){if("undefined"==typeof e&&(e=t.value.length),t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}else t.selectionStart&&(t.focus(),t.selectionStart=e,t.selectionEnd=e)}),n=function(){var n,a=this;this.instanceId=ax5.getGuid(),this.config={animateTime:250},this.queue=[],this.openTimer=null,this.closeTimer=null,n=this.config;var o={focus:function(t,e,i){t.$input.data("__originValue__")||t.$input.data("__originValue__",t.$input.val())},keydown:function(t,e,i){var n=!1;t.enterableKeyCodes&&(i.which&&t.enterableKeyCodes[i.which]||i.metaKey||i.ctrlKey||i.shiftKey||(n=!0)),n&&ax5.util.stopEvent(i)},keyup:function(i,n,a){var o,s,l,r,u,c=i.$input.get(0);"selectionStart"in c?o=c.selectionStart:document.selection&&(r=document.selection.createRange(),u=document.selection.createRange().text.length,r.moveStart("character",-c.value.length),o=r.text.length-u),s=c.value,l=i.pattern in t.formatter?t.formatter[i.pattern].getPatternValue.call(this,i,n,a,c.value):s,l!=s&&(i.$input.val(l).trigger("change"),e(c,o+l.length-s.length))},blur:function(e,i,n,a){var o,s,l=e.$input.get(0);e.$input.removeData("__originValue__"),o=l.value,s=e.pattern in t.formatter?t.formatter[e.pattern].getPatternValue.call(this,e,i,n,l.value,"blur"):o,a?e.$input.val(s):s!=o&&e.$input.val(s).trigger("change")}},s=function(e,i){if(!e.pattern&&("INPUT"==e.$target.get(0).tagName?e.pattern=e.$target.attr("data-ax5formatter"):e.pattern=e.$target.find('input[type="text"]').attr("data-ax5formatter"),!e.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(e.target),this;var n=/[^\(^\))]+/gi,a=e.pattern.match(n);return e.pattern=a[0],e.patternArgument=a[1]||"",e.pattern in t.formatter&&(e.enterableKeyCodes=t.formatter[e.pattern].getEnterableKeyCodes.call(this,e,i)),e.$input.unbind("focus.ax5formatter").bind("focus.ax5formatter",o.focus.bind(this,this.queue[i],i)),e.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",o.keydown.bind(this,this.queue[i],i)),e.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",o.keyup.bind(this,this.queue[i],i)),e.$input.unbind("blur.ax5formatter").bind("blur.ax5formatter",o.blur.bind(this,this.queue[i],i)),o.blur.call(this,this.queue[i],i),this},l=function(t){return i.isString(t)||(t=jQuery(t).data("data-formatter")),i.search(this.queue,function(){return this.id==t})};this.init=function(){},this.bind=function(t){var e,o={};if(jQuery.extend(!0,o,n),t&&jQuery.extend(!0,o,t),t=o,!t.target)return console.log(ax5.info.getError("ax5formatter","401","bind")),this;if(t.$target=jQuery(t.target),"INPUT"==t.$target.get(0).tagName)t.$input=t.$target;else if(t.$input=t.$target.find('input[type="text"]'),t.$input.length>1)return t.$input.each(function(){t.target=this,a.bind(t)}),this;return t.$input="INPUT"==t.$target.get(0).tagName?t.$target:t.$target.find('input[type="text"]'),t.id||(t.id=t.$input.data("ax5-formatter")),t.id||(t.id="ax5-formatter-"+ax5.getGuid(),t.$input.data("ax5-formatter",t.id)),e=i.search(this.queue,function(){return this.id==t.id}),-1===e?(this.queue.push(t),s.call(this,this.queue[this.queue.length-1],this.queue.length-1)):(this.queue[e]=t,s.call(this,this.queue[e],e)),this},this.formatting=function(t){var e=i.isNumber(t)?t:l.call(this,t);if(-1===e)for(var n=this.queue.length;n--;)o.blur.call(this,this.queue[n],n,null,!0);else o.blur.call(this,this.queue[e],e,null,!0);return this},this.unbind=function(){},this.main=function(){arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.formatter}(),ax5.ui.formatter_instance=new ax5.ui.formatter,jQuery.fn.ax5formatter=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"formatting":return ax5.ui.formatter_instance.formatting(this);case"unbind":return ax5.ui.formatter_instance.unbind(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.formatter_instance.bind(t)});return this}}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"menu",version:"0.6.5"},function(){var i=function(){var i,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",iconWidth:22,acceleratorWidth:100,menuBodyPadding:5,offset:{left:0,top:0},position:"fixed",animateTime:250,items:[],itemClickAndClose:!0,columnKeys:{label:"label",items:"items"}},this.openTimer=null,this.closeTimer=null,this.queue=[],this.menuBar={},this.state=void 0,i=this.config;var a=function(t){t?(jQuery(document).unbind("click.ax5menu-"+this.menuId).bind("click.ax5menu-"+this.menuId,c.bind(this)),jQuery(window).unbind("keydown.ax5menu-"+this.menuId).bind("keydown.ax5menu-"+this.menuId,function(t){t.which==ax5.info.eventKeys.ESC&&n.close()}),jQuery(window).unbind("resize.ax5menu-"+this.menuId).bind("resize.ax5menu-"+this.menuId,function(t){n.close()})):(jQuery(document).unbind("click.ax5menu-"+this.menuId),jQuery(window).unbind("keydown.ax5menu-"+this.menuId),jQuery(window).unbind("resize.ax5menu-"+this.menuId))},o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),n.state=e.state,t=null,e=null,!0},s=function(t){return this.onLoad&&this.onLoad.call(t,t),t=null,!0},l=function(t){return'\n                    <div class="ax5-ui-menu {{theme}}" {{#width}}style="width:{{width}}px;"{{/width}}>\n                        <div class="ax-menu-body">\n                            {{#'+t.items+'}}\n                                {{^@isMenu}}\n                                    {{#divide}}\n                                    <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                                    {{/divide}}\n                                    {{#html}}\n                                    <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                                    {{/html}}\n                                {{/@isMenu}}\n                                {{#@isMenu}}\n                                <div class="ax-menu-item" data-menu-item-depth="{{@depth}}" data-menu-item-index="{{@i}}" data-menu-item-path="{{@path}}.{{@i}}">\n                                    <span class="ax-menu-item-cell ax-menu-item-checkbox">\n                                        {{#check}}\n                                        <span class="item-checkbox-wrap useCheckBox" {{#checked}}data-item-checked="true"{{/checked}}></span>\n                                        {{/check}}\n                                        {{^check}}\n                                        <span class="item-checkbox-wrap"></span>\n                                        {{/check}}\n                                    </span>\n                                    {{#icon}}\n                                    <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                                    {{/icon}}\n                                    <span class="ax-menu-item-cell ax-menu-item-label">{{{'+t.label+'}}}</span>\n                                    {{#accelerator}}\n                                    <span class="ax-menu-item-cell ax-menu-item-accelerator" style="width:{{cfg.acceleratorWidth}}px;"><span class="item-wrap">{{.}}</span></span>\n                                    {{/accelerator}}\n                                    {{#@hasChild}}\n                                    <span class="ax-menu-item-cell ax-menu-item-handle">{{{cfg.icons.arrow}}}</span>\n                                    {{/@hasChild}}\n                                </div>\n                                {{/@isMenu}}\n        \n                            {{/'+t.items+'}}\n                        </div>\n                        <div class="ax-menu-arrow"></div>\n                    </div>\n                    '},r=function(t){return'\n                    <div class="ax5-ui-menubar {{theme}}">\n                        <div class="ax-menu-body">\n                            {{#'+t.items+'}}\n                                {{^@isMenu}}\n                                    {{#divide}}\n                                    <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                                    {{/divide}}\n                                    {{#html}}\n                                    <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                                    {{/html}}\n                                {{/@isMenu}}\n                                {{#@isMenu}}\n                                <div class="ax-menu-item" data-menu-item-index="{{@i}}">\n                                    {{#icon}}\n                                    <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                                    {{/icon}}\n                                    <span class="ax-menu-item-cell ax-menu-item-label">{{{'+t.label+"}}}</span>\n                                </div>\n                                {{/@isMenu}}\n                            {{/"+t.items+"}}\n                        </div>\n                    </div>\n                    ";
},u=function h(t,e,a,r){var u,c,p=t;return p.theme=t.theme||i.theme,p.cfg={icons:jQuery.extend({},i.icons),iconWidth:t.iconWidth||i.iconWidth,acceleratorWidth:t.acceleratorWidth||i.acceleratorWidth},e.forEach(function(e){e.html||e.divide?(e["@isMenu"]=!1,e.html&&(e["@html"]=e.html.call({item:e,config:i,opt:t}))):e["@isMenu"]=!0}),p[i.columnKeys.items]=e,p["@depth"]=a,p["@path"]=r||"root",p["@hasChild"]=function(){return this[i.columnKeys.items]&&this[i.columnKeys.items].length>0},u=jQuery(ax5.mustache.render(l(i.columnKeys),p)),jQuery(document.body).append(u),c=this.queue.splice(a),c.forEach(function(t){t.$target.remove()}),this.queue.push({$target:u,data:jQuery.extend({},p)}),u.find("[data-menu-item-index]").bind("mouseover",function(){var e,a,o,s,l,r,u=this.getAttribute("data-menu-item-depth"),c=this.getAttribute("data-menu-item-index"),d=this.getAttribute("data-menu-item-path");null!=u&&"undefined"!=typeof u&&(l=n.queue[u].data[i.columnKeys.items][c][i.columnKeys.items],r=n.queue[u].$target,r.find("[data-menu-item-index]").removeClass("hover"),jQuery(this).addClass("hover"),r.attr("data-selected-menu-item-index")!=c&&(r.attr("data-selected-menu-item-index",c),l&&l.length>0?(e=jQuery(this),a=e.offset(),o="fixed"==i.position?jQuery(document).scrollTop():0,s={"@parent":{left:a.left,top:a.top,width:e.outerWidth(),height:e.outerHeight()},left:a.left+e.outerWidth()-i.menuBodyPadding,top:a.top-i.menuBodyPadding-1-o},s=jQuery.extend(!0,t,s),h.call(n,s,l,Number(u)+1,d)):n.queue.splice(Number(u)+1).forEach(function(t){t.$target.remove()}))),u=null,c=null,d=null,e=null,a=null,o=null,s=null,l=null,r=null}),0==a&&(p.direction&&u.addClass("direction-"+p.direction),o.call(this,null,{self:this,items:e,parent:function(t){if(!t)return!1;var e=null;try{e=Function("","return this.config.items["+t.substring(5).replace(/\./g,"].items[")+"];").call(n)}catch(i){}return e}(p["@path"]),state:"popup"})),d.call(this,u,p),s.call(this,{self:this,items:e,element:u.get(0)}),p=null,u=null,c=null,t=null,e=null,a=null,r=null,this},c=function(t,a,o){if(a=e.findParentNode(t.target,function(t){return t.getAttribute("data-menu-item-index")?!0:void 0})){if(o=function(t){if(!t)return!1;var e;try{e=Function("","return this.config.items["+t.substring(5).replace(/\./g,"]."+i.columnKeys.items+"[")+"];").call(n)}catch(a){console.log(ax5.info.getError("ax5menu","501","menuItemClick"))}try{return e}finally{e=null}}(a.getAttribute("data-menu-item-path")),!o)return this;o.check&&(function(t){var e={checkbox:function(t){this.checked=!t},radio:function(e){var i=this.name;t.forEach(function(t){t.check&&"radio"===t.check.type&&t.check.name==i&&(t.check.checked=!1)}),this.checked=!e}};e[this.type]&&e[this.type].call(this,this.checked),e=null}.call(o.check,i.items),i.itemClickAndClose||n.queue.forEach(function(t){t.$target.find("[data-menu-item-index]").each(function(){var e=t.data[i.columnKeys.items][this.getAttribute("data-menu-item-index")];e.check&&jQuery(this).find(".item-checkbox-wrap").attr("data-item-checked",e.check.checked)})})),n.onClick&&n.onClick.call(o,o),o[i.columnKeys.items]&&0!=o[i.columnKeys.items].length||!i.itemClickAndClose||n.close()}else n.close();return a=null,o=null,this},d=function(t,e){var n=jQuery(window),a=jQuery(document),o="fixed"==i.position?n.height():a.height(),s=n.width(),l=t.outerHeight(),r=t.outerWidth(),u=e.left,c=e.top,d=i.position||"fixed";return u+r>s&&(u=e["@parent"]?e["@parent"].left-r+i.menuBodyPadding:s-r),c+l>o&&(c=o-l),t.css({left:u,top:c,position:d}),t=null,e=null,n=null,a=null,o=null,s=null,l=null,r=null,u=null,c=null,d=null,this};this.init=function(){n.menuId=ax5.getGuid(),this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,this.onLoad=i.onLoad,o.call(this,null,{self:this,state:"init"})},this.popup=function(){var t={event:function(t,e){t={left:t.clientX,top:"fixed"==i.position?t.clientY:t.pageY,width:i.width,theme:i.theme},i.offset&&(i.offset.left&&(t.left+=i.offset.left),i.offset.top&&(t.top+=i.offset.top)),e=jQuery.extend(!0,t,e);try{return e}finally{t=null}},object:function(t,e){t={left:t.left,top:t.top,width:t.width||i.width,theme:t.theme||i.theme},i.offset&&(i.offset.left&&(t.left+=i.offset.left),i.offset.top&&(t.top+=i.offset.top)),e=jQuery.extend(!0,t,e);try{return e}finally{t=null}}},e=function(t){t&&(i.theme=t)};return function(n,o){if(!n)return this;o=t["undefined"==typeof n.clientX?"object":"event"].call(this,n,o),e(o.theme);var s=[].concat(i.items);if(o.filter){var l=function r(t){var e=[];return t.forEach(function(t){t.items&&t.items.length>0&&(t.items=r(t.items)),o.filter.call(t)&&e.push(t)}),e};s=l(s)}return u.call(this,o,s,0),a.call(this,!0),n=null,this}}(),this.attach=function(){var t={object:function(t,e){t={left:t.left,top:t.top,width:t.width||i.width,theme:t.theme||i.theme,direction:t.direction||i.direction},e=jQuery.extend(!0,e,t);try{return e}finally{t=null,e=null}}},o=function(e,o,s){var l=jQuery(e),r=l.offset(),c=l.outerHeight(),d=Number(e.getAttribute("data-menu-item-index")),h="fixed"==i.position?jQuery(document).scrollTop():0;return n.menuBar.openedIndex==d?("click"==s&&n.close(),!1):(n.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),n.menuBar.opened=!0,n.menuBar.openedIndex=d,l.attr("data-menu-item-opened","true"),l.addClass("hover"),i.offset&&(i.offset.left&&(r.left+=i.offset.left),i.offset.top&&(r.top+=i.offset.top)),o=t.object.call(this,{left:r.left,top:r.top+c-h},o),i.items&&i.items[d][i.columnKeys.items]&&i.items[d][i.columnKeys.items].length&&(u.call(n,o,i.items[d][i.columnKeys.items],0,"root."+e.getAttribute("data-menu-item-index")),a.call(n,!0)),e=null,o=null,l=null,r=null,c=null,d=null,void(h=null))};return function(t,a){var s,l={},u=i.items;return"undefined"==typeof a&&(a={}),l.theme=a.theme||i.theme,l.cfg={icons:jQuery.extend({},i.icons),iconWidth:a.iconWidth||i.iconWidth,acceleratorWidth:a.acceleratorWidth||i.acceleratorWidth},u.forEach(function(t){t.html||t.divide?(t["@isMenu"]=!1,t.html&&(t["@html"]=t.html.call({item:t,config:i,opt:a}))):t["@isMenu"]=!0}),l[i.columnKeys.items]=u,s=jQuery(ax5.mustache.render(r(i.columnKeys),l)),n.menuBar={target:jQuery(t),opened:!1},n.menuBar.target.html(s),n.menuBar.target.bind("click",function(t){if(!t)return this;var i=e.findParentNode(t.target,function(t){return t.getAttribute("data-menu-item-index")?!0:void 0});i&&o(i,a,"click"),i=null}),n.menuBar.target.bind("mouseover",function(t){if(!n.menuBar.opened)return!1;var i=e.findParentNode(t.target,function(t){return t.getAttribute("data-menu-item-index")?!0:void 0});i&&o(i,a,"mouseover"),i=null}),t=null,a=null,l=null,u=null,s=null,this}}(),this.close=function(){return n.menuBar&&n.menuBar.target&&(n.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),n.menuBar.opened=!1,n.menuBar.openedIndex=null),a.call(this,!1),this.queue.forEach(function(t){t.$target.remove()}),this.queue=[],o.call(this,null,{self:this,state:"close"}),this},this.getCheckValue=function(){var t={},n=function(i){for(var a=i.length;a--;)i[a].check&&i[a].check.checked&&(t[i[a].check.name]?(e.isString(t[i[a].check.name])&&(t[i[a].check.name]=[t[i[a].check.name]]),t[i[a].check.name].push(i[a].check.value)):t[i[a].check.name]=i[a].check.value),i[a].items&&i[a].items.length>0&&n(i[a].items)};n(i.items);try{return t}finally{t=null,n=null}},this.main=function(){t.menu_instance=t.menu_instance||[],t.menu_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"select",version:"0.4.4"},function(){var t=function(){var t,i=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:100,lang:{noSelected:"",noOptions:"no options",loading:"now loading..",multipleLabel:'"{{label}}"외 {{length}}건'},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,this.xvar={},t=this.config;var n={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},a=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},o=function(t){return'\n                    <div class="ax5select-option-group {{theme}} {{size}}" data-ax5select-option-group="{{id}}">\n                        <div class="ax-select-body">\n                            <div class="ax-select-option-group-content" data-els="content"></div>\n                        </div>\n                        <div class="ax-select-arrow"></div> \n                    </div>\n                    '},s=function(){return'\n                    <a {{^tabIndex}}href="#ax5select-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}class="form-control {{formSize}} ax5select-display {{theme}}" \n                    data-ax5select-display="{{id}}" data-ax5select-instance="{{instanceId}}">\n                        <div class="ax5select-display-table" data-els="display-table">\n                            <div data-ax5select-display="label">{{label}}</div>\n                            <div data-ax5select-display="addon"> \n                                {{#multiple}}{{#reset}}\n                                <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n                                {{/reset}}{{/multiple}}\n                                {{#icons}}\n                                <span class="addon-icon-closed">{{clesed}}</span>\n                                <span class="addon-icon-opened">{{opened}}</span>\n                                {{/icons}}\n                                {{^icons}}\n                                <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n                                <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n                                {{/icons}}\n                            </div>\n                        </div>\n                        <input type="text" tabindex="-1" data-ax5select-display="input" \n                        style="position:absolute;z-index:0;left:0px;top:0px;font-size:1px;opacity: 0;width:1px;border: 0px none;color : transparent;text-indent: -9999em;" />\n                    </a>\n                    '},l=function(){return'\n                    <select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n                    '},r=function(t){return'\n                    {{#waitOptions}}\n                        <div class="ax-select-option-item">\n                                <div class="ax-select-option-item-holder">\n                                    <span class="ax-select-option-item-cell ax-select-option-item-label">\n                                        {{{lang.loading}}}\n                                    </span>\n                                </div>\n                            </div>\n                    {{/waitOptions}}\n                    {{^waitOptions}}\n                        {{#options}}\n                            {{#optgroup}}\n                                <div class="ax-select-option-group">\n                                    <div class="ax-select-option-item-holder">\n                                        <span class="ax-select-option-group-label">\n                                            {{{.}}}\n                                        </span>\n                                    </div>\n                                    {{#options}}\n                                    <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                                    data-option-value="{{'+t.optionValue+'}}" \n                                    {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                                        <div class="ax-select-option-item-holder">\n                                            {{#multiple}}\n                                            <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                                                <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                            </span>\n                                            {{/multiple}}\n                                            <span class="ax-select-option-item-cell ax-select-option-item-label">{{'+t.optionText+'}}</span>\n                                        </div>\n                                    </div>\n                                    {{/options}}\n                                </div>                            \n                            {{/optgroup}}\n                            {{^optgroup}}\n                            <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+t.optionValue+'}}" {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                                <div class="ax-select-option-item-holder">\n                                    {{#multiple}}\n                                    <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                                        <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                    </span>\n                                    {{/multiple}}\n                                    <span class="ax-select-option-item-cell ax-select-option-item-label">{{'+t.optionText+'}}</span>\n                                </div>\n                            </div>\n                            {{/optgroup}}\n                        {{/options}}\n                        {{^options}}\n                            <div class="ax-select-option-item">\n                                <div class="ax-select-option-item-holder">\n                                    <span class="ax-select-option-item-cell ax-select-option-item-label">\n                                        {{{lang.noOptions}}}\n                                    </span>\n                                </div>\n                            </div>\n                        {{/options}}\n                    {{/waitOptions}}\n                    '},u=function(){for(var t,i=this.queue.length;i--;)this.queue[i].$display&&(t=Math.max(this.queue[i].$select.outerWidth(),e.number(this.queue[i].minWidth)),this.queue[i].$display.css({"min-width":t}),this.queue[i].reset&&this.queue[i].$display.find(".addon-icon-reset").css({"line-height":this.queue[i].$display.height()+"px"}));return i=null,t=null,this},c=function(t){if(!this.activeSelectOptionGroup)return this;var e=this.queue[this.activeSelectQueueIndex],i={},n={};t&&jQuery(document.body).append(this.activeSelectOptionGroup),i=e.$target.offset(),n={width:e.$target.outerWidth(),height:e.$target.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction||(e.direction="top"),t&&this.activeSelectOptionGroup.addClass("direction-"+e.direction),this.activeSelectOptionGroup.css(function(){return"top"==e.direction?{left:i.left,top:i.top+n.height+1,width:n.width}:"bottom"==e.direction?{left:i.left,top:i.top-this.activeSelectOptionGroup.outerHeight()-1,width:n.width}:void 0}.call(this))},d=function(t,i){if(!this.activeSelectOptionGroup)return this;var n=this.queue[this.activeSelectQueueIndex],a="display";return(i=e.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(this.val(n.id,{index:{gindex:i.getAttribute("data-option-group-index"),index:i.getAttribute("data-option-index")}},void 0,"internal"),n.$display.focus(),n.multiple||this.close()),this):(this.close(),this)},h=function(t){if(t.keyCode==ax5.info.eventKeys.ESC)this.close();else if(t.which==ax5.info.eventKeys.RETURN)if(this.queue[this.activeSelectQueueIndex].optionFocusIndex>-1){var e=this.activeSelectOptionGroup.find('[data-option-focus-index="'+this.queue[this.activeSelectQueueIndex].optionFocusIndex+'"]');this.val(this.queue[this.activeSelectQueueIndex].id,{index:{gindex:e.attr("data-option-group-index"),index:e.attr("data-option-index")}},void 0,"internal"),this.queue[this.activeSelectQueueIndex].multiple||this.close()}else this.close()},p=function(t){var i=this.queue[t],n=[];return e.isArray(i.selected)&&i.selected.length>0?i.selected.forEach(function(t){t.selected&&n.push(t[i.columnKeys.optionText])}):!i.multiple&&i.options&&i.options[0]?i.options[0].optgroup?n[0]=i.options[0].options[0][i.columnKeys.optionText]:n[0]=i.options[0][i.columnKeys.optionText]:n[0]=i.lang.noSelected,function(){if(i.multiple&&n.length>1){var t={label:n[0],length:n.length-1};return ax5.mustache.render(i.lang.multipleLabel,t)}return n[0]}()},f=function(t){this.queue[t].$displayLabel.html(p.call(this,t))},m=function(t,e){var i,n=[],a=-1,o=this.queue[t].indexedOptions.length-1;if(e){for(;o-a++;){if(i=this.queue[t].indexedOptions[a],(""+i.value).toLowerCase()==e.toLowerCase()){n=[{"@findex":i["@findex"],optionsSort:0}];break}var s=(""+i.value).toLowerCase().search(e.toLowerCase());if(s>-1&&(n.push({"@findex":i["@findex"],optionsSort:s}),n.length>2))break;s=null}n.sort(function(t,e){return t.optionsSort-e.optionsSort})}n&&n.length>0&&g.call(this,t,void 0,n[0]["@findex"]);try{return n}finally{n=null,a=null,o=null,i=null}},g=function(t,e,i){var n,a,o,s;if(this.activeSelectOptionGroup&&this.queue[t].options&&this.queue[t].options.length>0){"undefined"!=typeof i?n=i:(a=-1==this.queue[t].optionFocusIndex?this.queue[t].optionSelectedIndex||-1:this.queue[t].optionFocusIndex,-1==a?n=e>0?0:this.queue[t].optionItemLength-1:(n=a+e,0>n?n=0:n>this.queue[t].optionItemLength-1&&(n=this.queue[t].optionItemLength-1))),this.queue[t].optionFocusIndex=n,this.activeSelectOptionGroup.find("[data-option-focus-index]").removeClass("hover"),o=this.activeSelectOptionGroup.find('[data-option-focus-index="'+n+'"]').addClass("hover"),s=this.activeSelectOptionGroup.find('[data-els="content"]');var l=o.outerHeight(),r=s.innerHeight(),u=s.scrollTop(),c=o.position().top+s.scrollTop();c+l>r+u?s.scrollTop(c+l-r):u>c&&s.scrollTop(c)}},v=function(){var t=e.debounce(function(t,e){m.call(i,e,t),i.queue[e].$displayInput.val("")},300),a={click:function(t,n){var a=e.findParentNode(n.target,function(t){return t.getAttribute("data-selected-clear")?!0:void 0});a?this.val(t,{clear:!0}):i.activeSelectQueueIndex==t?-1==this.queue[t].optionFocusIndex&&i.close():(i.open(t),e.stopEvent(n))},keyUp:function(e,i){i.which==ax5.info.eventKeys.SPACE?a.click.call(this,e,i):n[i.which]||t(this.queue[e].$displayInput.val(),e)},keyDown:function(t,i){i.which==ax5.info.eventKeys.DOWN?(g.call(this,t,1),e.stopEvent(i)):i.which==ax5.info.eventKeys.UP&&(g.call(this,t,-1),e.stopEvent(i))},blur:function(t,e){},selectChange:function(t,e){this.val(t,this.queue[t].$select.val(),!0)}};return function(t){var e=this.queue[t],i={};return e.selected=[],e.$display?(e.$displayLabel.html(p.call(this,t)),e.options=b.call(this,t,e.options),u.call(this)):(i.instanceId=this.instanceId,i.id=e.id,i.name=e.name,i.theme=e.theme,i.tabIndex=e.tabIndex,i.multiple=e.multiple,i.reset=e.reset,i.label=p.call(this,t),i.formSize=function(){return e.size?"input-"+e.size:""}(),e.$display=jQuery(ax5.mustache.render(s.call(this,t),i)),e.$displayLabel=e.$display.find('[data-ax5select-display="label"]'),e.$target.find("select").get(0)?(e.$select=e.$target.find("select"),e.$select.attr("tabindex","-1").attr("class","form-control "+i.formSize),i.name&&e.$select.attr("name","name"),i.multiple&&e.$select.attr("multiple","multiple")):(e.$select=jQuery(ax5.mustache.render(l.call(this,t),i)),e.$target.append(e.$select)),e.$target.append(e.$display),e.$displayInput=e.$display.find('[data-ax5select-display="input"]'),e.options=b.call(this,t,e.options),u.call(this),e.$displayInput.unbind("blur.ax5select").bind("blur.ax5select",a.blur.bind(this,t)).unbind("keyup.ax5select").bind("keyup.ax5select",a.keyUp.bind(this,t)).unbind("keydown.ax5select").bind("keydown.ax5select",a.keyDown.bind(this,t))),e.$display.unbind("click.ax5select").bind("click.ax5select",a.click.bind(this,t)).unbind("keyup.ax5select").bind("keyup.ax5select",a.keyUp.bind(this,t)),e.$select.unbind("change.ax5select").bind("change.ax5select",a.selectChange.bind(this,t)),i=null,e=null,t=null,this}}(),b=function(){var t=function(t,e){e?this.queue[t].multiple?this.queue[t].selected.push(jQuery.extend({},e)):this.queue[t].selected[0]=jQuery.extend({},e):this.queue[t].selected=[]};return function(n,a){var o,s,l,r=this.queue[n],u=0;return t.call(this,n,!1),a?(r.options=a,r.indexedOptions=[],o=[],r.options.forEach(function(e,a){e.optgroup?(e["@gindex"]=a,e.options.forEach(function(e,a){e["@index"]=a,e["@findex"]=u,o.push('<option value="'+e[r.columnKeys.optionValue]+'" '+(e[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+e[r.columnKeys.optionText]+"</option>"),e[r.columnKeys.optionSelected]&&t.call(i,n,e),r.indexedOptions.push({"@findex":u,value:e[r.columnKeys.optionValue],text:e[r.columnKeys.optionText]}),u++})):(e["@index"]=a,e["@findex"]=u,o.push('<option value="'+e[r.columnKeys.optionValue]+'" '+(e[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+e[r.columnKeys.optionText]+"</option>"),e[r.columnKeys.optionSelected]&&t.call(i,n,e),r.indexedOptions.push({"@findex":u,value:e[r.columnKeys.optionValue],text:e[r.columnKeys.optionText]}),u++)}),r.optionItemLength=u,r.$select.html(o.join(""))):(s=e.toArray(r.$select.get(0).options),l=[],s.forEach(function(e,a){var o={};o[r.columnKeys.optionValue]=e.value,o[r.columnKeys.optionText]=e.text,o[r.columnKeys.optionSelected]=e.selected,o["@index"]=a,o["@findex"]=a,e.selected&&t.call(i,n,o),l.push(o),o=null}),r.options=l,r.indexedOptions=l),!r.multiple&&0==r.selected.length&&r.options&&r.options[0]&&(r.options[0].optgroup?(r.options[0].options[0][r.columnKeys.optionSelected]=!0,r.selected.push(jQuery.extend({},r.options[0].options[0]))):(r.options[0][r.columnKeys.optionSelected]=!0,r.selected.push(jQuery.extend({},r.options[0])))),o=null,s=null,l=null,r.options}}(),y=function(t){return e.isString(t)||(t=jQuery(t).data("data-ax5select-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5select","402","getQueIdx"))};this.init=function(){this.onStateChanged=t.onStateChanged,this.onChange=t.onChange,jQuery(window).bind("resize.ax5select-display-"+this.instanceId,function(){u.call(this)}.bind(this))},this.bind=function(i){var n,a={};return i=jQuery.extend(!0,a,t,i),i.target?(i.$target=jQuery(i.target),i.id||(i.id=i.$target.data("data-ax5select-id")),i.id||(i.id="ax5select-"+ax5.getGuid(),i.$target.data("data-ax5select-id",i.id)),i.name=i.$target.attr("data-ax5select"),i.options&&(i.options=JSON.parse(JSON.stringify(i.options))),function(t){e.isObject(t)&&!t.error&&(i=jQuery.extend(!0,i,t))}(e.parseJson(i.$target.attr("data-ax5select-config"),!0)),n=e.search(this.queue,function(){return this.id==i.id}),-1===n?(this.queue.push(i),v.call(this,this.queue.length-1)):(this.queue[n]=jQuery.extend(!0,{},this.queue[n],i),v.call(this,n)),a=null,n=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.open=function(){var i=function(t){t.onExpand.call({self:this,item:t},function(t){if(this.waitOptionsCallback){var i={},n=this.queue[this.activeSelectQueueIndex];!function(t,i){var n={};i.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),e.isArray(t.selected)&&t.selected.forEach(function(e){n[e[t.columnKeys.optionValue]]&&(i.options[n[e[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(n,t),n.$displayLabel.html(p.call(this,this.activeSelectQueueIndex)),n.options=b.call(this,this.activeSelectQueueIndex,t.options),u.call(this),i.id=n.id,i.theme=n.theme,i.size="ax5select-option-group-"+n.size,i.multiple=n.multiple,i.lang=n.lang,i.options=n.options,this.activeSelectOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(r.call(this,n.columnKeys),i)))}}.bind(this))};return function(n,s){this.waitOptionsCallback=null;var l,u,p=e.isNumber(n)?n:y.call(this,n),f=this.queue[p],m={};return f.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeSelectOptionGroup?this.activeSelectQueueIndex==p?this:s>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(p,(s||0)+1)}.bind(this),t.animateTime),this):(f.optionFocusIndex=-1,f.selected&&f.selected.length>0&&(f.optionSelectedIndex=f.selected[0]["@findex"]),m.id=f.id,m.theme=f.theme,m.size="ax5select-option-group-"+f.size,m.multiple=f.multiple,m.lang=f.lang,f.$display.attr("data-select-option-group-opened","true"),f.onExpand&&(m.waitOptions=!0),m.options=f.options,this.activeSelectOptionGroup=jQuery(ax5.mustache.render(o.call(this,f.columnKeys),m)),this.activeSelectOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(r.call(this,f.columnKeys),m))),this.activeSelectQueueIndex=p,c.call(this,"append"),jQuery(window).bind("resize.ax5select-"+this.instanceId,function(){c.call(this)}.bind(this)),f.selected&&f.selected.length>0&&(u=this.activeSelectOptionGroup.find('[data-option-index="'+f.selected[0]["@index"]+'"]'),u.get(0)&&(l=u.position().top-this.activeSelectOptionGroup.height()/3,this.activeSelectOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:l},f.animateTime,"swing",function(){}))),f.$displayInput.val(""),setTimeout(function(){f.$displayInput.trigger("focus"),jQuery(window).bind("keyup.ax5select-"+this.instanceId,function(t){t=t||window.event,h.call(this,t),e.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5select-"+this.instanceId,function(t){t=t||window.event,d.call(this,t),e.stopEvent(t)}.bind(this))}.bind(this),300),a.call(this,f,{self:this,state:"open",item:f}),f.onExpand&&(this.waitOptionsCallback=!0,i.call(this,f)),m=null,l=null,u=null,this))}}(),this.update=function(t){return this.bind(t),this},this.val=function(){var t=function(t,e,i){return"undefined"==typeof i?t.multiple?!e:!0:i},n=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1})},o={index:function(n,a,o){var s=this.queue[n];e.isString(a.index.gindex)?(s.options[a.index.gindex].options[a.index.index][s.columnKeys.optionSelected]=t(s,s.options[a.index.gindex].options[a.index.index][s.columnKeys.optionSelected],o),i.activeSelectOptionGroup.find('[data-option-group-index="'+a.index.gindex+'"][data-option-index="'+a.index.index+'"]').attr("data-option-selected",s.options[a.index.gindex].options[a.index.index][s.columnKeys.optionSelected].toString())):(s.options[a.index.index][s.columnKeys.optionSelected]=t(s,s.options[a.index.index][s.columnKeys.optionSelected],o),i.activeSelectOptionGroup.find('[data-option-index="'+a.index.index+'"]').attr("data-option-selected",s.options[a.index.index][s.columnKeys.optionSelected].toString())),b.call(this,n,s.options),f.call(this,n),c.call(this)},arr:function(t,n,a){n.forEach(function(n){if(e.isString(n)||e.isNumber(n))o.value.call(i,t,n,a);else for(var s in o)if(n[s]){o[s].call(i,t,n,a);break}})},value:function(i,n,a){var o=this.queue[i],s=e.search(o.options,function(){return this[o.columnKeys.optionValue]==n});return s>-1?(o.options[s][o.columnKeys.optionSelected]=t(o,o.options[s][o.columnKeys.optionSelected],a),b.call(this,i,o.options),void f.call(this,i)):void console.log(ax5.info.getError("ax5select","501","val"))},text:function(i,n,a){var o=this.queue[i],s=e.search(o.options,function(){return this[o.columnKeys.optionText]==n});return s>-1?(o.options[s][o.columnKeys.optionSelected]=t(o,o.options[s][o.columnKeys.optionSelected],a),b.call(this,i,o.options),void f.call(this,i)):void console.log(ax5.info.getError("ax5select","501","val"))},clear:function(t){n.call(this,t),b.call(this,t,this.queue[t].options),f.call(this,t),this.activeSelectOptionGroup&&this.activeSelectOptionGroup.find("[data-option-index]").attr("data-option-selected","false")}};return function(t,i,s,l){var r=e.isNumber(t)?t:y.call(this,t);if(-1===r)return void console.log(ax5.info.getError("ax5select","402","val"));if("undefined"==typeof i||this.queue[r].multiple||n.call(this,r),"undefined"==typeof i)return this.queue[r].selected;if(e.isArray(i))o.arr.call(this,r,i,s);else if(e.isString(i)||e.isNumber(i))o.value.call(this,r,i,s);else if(null===i)o.clear.call(this,r);else for(var u in o)if(i[u]){o[u].call(this,r,i,s);break}return"undefined"!=typeof i&&a.call(this,this.queue[r],{self:this,item:this.queue[r],state:l?"changeValue":"setValue",value:this.queue[r].selected,internal:l}),t=null,this}}(),this.close=function(e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeSelectOptionGroup?(e=this.queue[this.activeSelectQueueIndex],e.optionFocusIndex=-1,e.$displayInput.val("").trigger("blur"),e.$display.removeAttr("data-select-option-group-opened").trigger("focus"),this.activeSelectOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5select-"+this.instanceId).unbind("click.ax5select-"+this.instanceId).unbind("keyup.ax5select-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeSelectOptionGroup&&this.activeSelectOptionGroup.remove(),this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1;var t={self:this,item:e,value:e.selected,state:"close"};a.call(this,e,t),e.onClose&&e.onClose.call(t)}.bind(this),t.animateTime),this.waitOptionsCallback=null,this):this},this.enable=function(t){var e=y.call(this,t);return this.queue[e].$display.removeAttr("disabled"),this.queue[e].$select.removeAttr("disabled"),a.call(this,this.queue[e],{self:this,state:"enable"}),this},this.disable=function(t){var e=y.call(this,t);return this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$select.attr("disabled","disabled"),a.call(this,this.queue[e],{self:this,state:"disable"}),this},this.main=function(){arguments&&e.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return t}())}(),ax5.ui.select_instance=new ax5.ui.select,jQuery.fn.ax5select=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.select_instance.open(this);case"close":return ax5.ui.select_instance.close(this);case"setValue":return ax5.ui.select_instance.val(this,arguments[1],arguments[2]);case"getValue":return ax5.ui.select_instance.val(this);case"enable":return ax5.ui.select_instance.enable(this);case"disable":return ax5.ui.select_instance.disable(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.select_instance.bind(t)});return this}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"grid",version:"0.2.18"},function(){var n=function(){var n,a=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!1,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:26,sortable:void 0,header:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1},body:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,grouping:!1},rightSum:!1,footSum:!1,page:{height:25,display:!0,navigationItemCount:5
},scroller:{size:15,barMinSize:15,trackPadding:4},columnKeys:{selected:"__selected__",modified:"__modified__",deleted:"__deleted__"}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.columns=[],this.colGroup=[],this.footSumColumns=[],this.bodyGrouping={},this.list=[],this.page={},this.deletedList=[],this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.isInlineEditing=!1,this.inlineEditing={},this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.bodyGroupingTable={},this.leftBodyGroupingData={},this.bodyGroupingData={},this.rightBodyGroupingData={},this.footSumTable={},this.leftFootSumData={},this.footSumData={},this.needToPaintSum=!0,n=this.config;var o=function(){var e={instanceId:this.id};return this.$target.html(t.tmpl.get("main",e)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.config.height}),this},s=function(e){this.columns=i.deepCopy(e),this.headerTable=t.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=n.frozenColumnIndex>this.columns.length?this.columns.length:n.frozenColumnIndex,this.bodyRowTable=t.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=t.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var a={},o=0,s=this.headerTable.rows.length;s>o;o++)for(var l=this.headerTable.rows[o],r=0,u=l.cols.length;u>r;r++)a[l.cols[r].colIndex]=jQuery.extend({},l.cols[r]);this.colGroup=[];for(var c in a)this.colGroup.push(a[c]);return this},l=function(){s.call(this,this.config.columns),r.call(this),this.config.footSum&&(u.call(this,this.config.footSum),this.needToPaintSum=!0),this.config.body.grouping&&c.call(this,this.config.body.grouping),d.call(this,!0),t.header.repaint.call(this,!0),t.body.repaint.call(this,!0),t.scroller.resize.call(this)},r=function(){var t,e,n,a=this.$.container.root.width(),o=0,s=[],l=this.colGroup;for(e=0,n=l.length;n>e;e++)i.isNumber(l[e].width)?o+=l[e]._width=l[e].width:"*"===l[e].width?s.push(e):"%"===i.right(l[e].width,1)&&(o+=l[e]._width=a*i.left(l[e].width,"%")/100);if(s.length>0)for(t=(a-o)/s.length,e=0,n=s.length;n>e;e++)l[s[e]]._width=t},u=function(e){i.isArray(e)?this.footSumTable=t.util.makeFootSumTable.call(this,this.footSumColumns=e):(this.footSumColumns=[],this.footSumTable={})},c=function(e){var i=jQuery.extend({},e);"by"in i&&"columns"in i?(this.bodyGrouping={by:i.by,columns:i.columns},this.bodyGroupingTable=t.util.makeBodyGroupingTable.call(this,this.bodyGrouping.columns),this.sortInfo=function(){for(var t={},e=0,i=this.bodyGrouping.by.length;i>e;e++){t[this.bodyGrouping.by[e]]={orderBy:"asc",seq:e,fixed:!0};for(var n=0,a=this.colGroup.length;a>n;n++)this.colGroup[n].key===this.bodyGrouping.by[e]&&(this.colGroup[n].sort="asc",this.colGroup[n].sortFixed=!0)}return t}.call(this)):n.body.grouping=!1},d=function(t){var e,i,a=this.$.container.root.width(),o=this.$.container.root.height(),s=a,l=o,r=n.asidePanelWidth=function(){var t=0;return n.showLineNumber&&(t+=n.lineNumberColumnWidth),n.showRowSelector&&(t+=n.rowSelectorColumnWidth),t}(),u=n.frozenPanelWidth=function(t,e){for(var i=0,n=0,a=e;a>n;n++)i+=t[n]._width;return i}(this.colGroup,n.frozenColumnIndex),c=0,d=function(t){return n.frozenRowIndex*t}(this.xvar.bodyTrHeight),h=function(t){return this.footSumColumns.length*t}.call(this,this.xvar.bodyTrHeight),p=this.headerTable.rows.length*n.header.columnHeight,f=n.page.display?n.page.height:0;(function(){e=o-p-f-h<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,i=function(){for(var t=0,i=a-r-e,n=0,o=this.colGroup.length;o>n;n++)t+=this.colGroup[n]._width;return t>i?this.config.scroller.size:0}.call(this),i>0&&(e=o-p-f-h-i<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),s=a-e,l=o-f-i;var m=l-p,g=function(t,e,i,a){var o={},l=!1;switch(i){case"aside":0===r?l=!0:(o.left=0,o.width=r);break;case"left":0===n.frozenColumnIndex?l=!0:(o.left=r,o.width=u);break;case"right":n.rightSum||(l=!0);break;default:"page"!==a&&(0===n.frozenColumnIndex?o.left=r:o.left=u+r,o.width=s-r-u-c)}if(l)return t.hide(),this;if("body"===a)switch(e){case"top":0==n.frozenRowIndex?l=!0:(o.top=0,o.height=d);break;case"bottom":n.footSum?(o.top=m-h,o.height=h):l=!0;break;default:o.top=d,o.height=m-d-h}else"header"===a?o.height=p:"page"===a&&(0==f?l=!0:o.height=f);return l?(t.hide(),this):(t.css(o),this)},v=function(t,e,i,n){var a={},o=!1;switch(n){case"vertical":e>0?(a.width=e,a.height=l,a.bottom=i+f):o=!0;break;case"horizontal":i>0?(a.width=s,a.height=i,a.right=e,a.bottom=f):o=!0;break;case"corner":e>0&&i>0?(a.width=e,a.height=i,a.bottom=f):o=!0}return o?(t.hide(),this):void t.show().css(a)};this.$.container.header.css({height:p}),this.$.container.body.css({height:m}),g.call(this,this.$.panel["aside-header"],"","aside","header"),g.call(this,this.$.panel["left-header"],"","left","header"),g.call(this,this.$.panel.header,"","","header"),g.call(this,this.$.panel["right-header"],"","right","header"),g.call(this,this.$.panel["top-aside-body"],"top","aside","body"),g.call(this,this.$.panel["top-left-body"],"top","left","body"),g.call(this,this.$.panel["top-body"],"top","","body"),g.call(this,this.$.panel["top-right-body"],"top","right","body"),g.call(this,this.$.panel["aside-body"],"","aside","body"),g.call(this,this.$.panel["left-body"],"","left","body"),g.call(this,this.$.panel.body,"","","body"),g.call(this,this.$.panel["right-body"],"","right","body"),g.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),g.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),g.call(this,this.$.panel["bottom-body"],"bottom","","body"),g.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),v.call(this,this.$.scroller.vertical,e,i,"vertical"),v.call(this,this.$.scroller.horizontal,e,i,"horizontal"),v.call(this,this.$.scroller.corner,e,i,"corner"),g.call(this,this.$.container.page,"","","page")},h=function(e){t.header.repaint.call(this),this.config.body.grouping?this.list=t.data.initData.call(this,t.data.sort.call(this,e,t.data.clearGroupingData.call(this,this.list))):this.list=t.data.sort.call(this,e,t.data.clearGroupingData.call(this,this.list)),t.body.repaint.call(this,!0),t.scroller.resize.call(this)};this.init=function(e){if(this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,n=jQuery.extend(!0,{},n,e),!n.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.$target=jQuery(n.target),function(t){i.isObject(t)&&!t.error&&(n=jQuery.extend(!0,n,t))}.call(this,i.parseJson(this.$target.attr("data-ax5grid-config"),!0));var l=this.config=n;this.config.height||(this.config.height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+ax5.getGuid(),this.$target.data("data-ax5grid-id",l.id)),o.call(this),s.call(this,l.columns),r.call(this),l.footSum&&u.call(this,l.footSum),l.body.grouping&&c.call(this,l.body.grouping),d.call(this,!0),t.header.init.call(this),t.header.repaint.call(this),t.body.init.call(this),t.body.repaint.call(this),t.scroller.init.call(this),t.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.instanceId,function(){d.call(this),t.scroller.resize.call(this)}.bind(this)),jQuery(document.body).on("click.ax5grid-"+this.instanceId,function(e){var n=!1,o=i.findParentNode(e.target,function(t){return(n=t.getAttribute("data-ax5grid-inline-edit-picker"))?!0:t.getAttribute("data-ax5grid-container")});o?a.focused=!0:(a.focused=!1,t.body.blur.call(a))});var h={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};return jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(e){a.focused&&(a.isInlineEditing?e.which==ax5.info.eventKeys.ESC?a.keyDown("ESC",e.originalEvent):e.which==ax5.info.eventKeys.RETURN?a.keyDown("RETURN",e.originalEvent):e.which==ax5.info.eventKeys.TAB?(a.keyDown("TAB",e.originalEvent),i.stopEvent(e)):e.which==ax5.info.eventKeys.UP?a.keyDown("RETURN",{shiftKey:!0}):e.which==ax5.info.eventKeys.DOWN&&a.keyDown("RETURN",{}):e.metaKey||e.ctrlKey?67==e.which&&a.copySelect():h[e.which]?(a.keyDown(h[e.which],e.originalEvent),i.stopEvent(e)):e.which==ax5.info.eventKeys.ESC?a.focused&&t.body.blur.call(a):e.which==ax5.info.eventKeys.RETURN?a.keyDown("RETURN",e.originalEvent):e.which==ax5.info.eventKeys.TAB?a.keyDown("RETURN",e.originalEvent):e.which!=ax5.info.eventKeys.SPACE&&Object.keys(a.focusedColumn).length&&a.keyDown("INLINE_EDIT",e.originalEvent))}),this},this.align=function(){return d.call(this),t.scroller.resize.call(this),this},this.keyDown=function(){var e={KEY_UP:function(){t.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){t.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){t.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){t.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){t.body.moveFocus.call(this,"HOME")},KEY_END:function(){t.body.moveFocus.call(this,"END")},INLINE_EDIT:function(e){t.body.inlineEdit.active.call(this,this.focusedColumn,e),/[0-9a-zA-Z]/.test(e.key)||i.stopEvent(e)},ESC:function(e){t.body.inlineEdit.keydown.call(this,"ESC")},RETURN:function(e){var i=0;for(var n in this.inlineEditing)i++,t.body.inlineEdit.keydown.call(this,"RETURN",n),1==i&&t.body.moveFocus.call(this,e.shiftKey?"UP":"DOWN")&&t.body.inlineEdit.keydown.call(this,"RETURN");0==i&&t.body.inlineEdit.keydown.call(this,"RETURN")},TAB:function(e){var i=0;for(var n in this.inlineEditing)i++,t.body.inlineEdit.keydown.call(this,"RETURN",n),1==i&&t.body.moveFocus.call(this,e.shiftKey?"LEFT":"RIGHT")&&t.body.inlineEdit.keydown.call(this,"RETURN")}};return function(t,i){return t in e&&e[t].call(this,i),this}}(),this.copySelect=function(){var t,e,i,n,a=this.$.form.clipboard,o=[],s="",l=0;for(var r in this.selectedColumn){var u=this.selectedColumn[r];if(u){"undefined"==typeof n&&(n=u.dindex,e=u.rowIndex,i=u.rowIndex),(n!=u.dindex||e!=u.rowIndex)&&l++,o[l]||(o[l]=[]);var c=this.bodyRowMap[u.rowIndex+"_"+u.colIndex];c?this.list[u.dindex].__isGrouping?o[l].push(this.list[u.dindex][u.colIndex]):o[l].push(this.list[u.dindex][c.key]):o[l].push(""),n=u.dindex,e=u.rowIndex}}o.forEach(function(t){s+=t.join("	")+"\n"}),a.get(0).innerText=s,a.select();try{t=document.execCommand("copy")}catch(d){t=!1}return t},this.setData=function(e){return t.data.set.call(this,e),d.call(this),t.body.repaint.call(this),t.scroller.resize.call(this),t.page.navigationUpdate.call(this),t.body.scrollTo.call(this,{top:0}),this},this.getList=function(e){return t.data.getList.call(this,e)},this.setHeight=function(e){return"100%"==e&&(e=this.$target.offsetParent().innerHeight()),this.$target.css({height:e}),this.$.container.root.css({height:e}),d.call(this),t.body.repaint.call(this,"reset"),t.scroller.resize.call(this),this},this.addRow=function(e,i){return t.data.add.call(this,e,i),d.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),t.scroller.resize.call(this),this},this.removeRow=function(e){return t.data.remove.call(this,e),d.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),t.scroller.resize.call(this),this},this.updateRow=function(e,i){return t.data.update.call(this,e,i),d.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,this.config.body.grouping?"START":i),t.scroller.resize.call(this),this},this.deleteRow=function(e){return t.data.deleteRow.call(this,e),d.call(this),t.body.repaint.call(this,"reset"),t.scroller.resize.call(this),this},this.addColumn=function(){var t={first:function(t){this.config.columns=[].concat(t).concat(this.config.columns)},last:function(t){this.config.columns=this.config.columns.concat([].concat(t))}};return function(e,n){if("undefined"==typeof e)throw"_column must not be null";if("undefined"==typeof n&&(n="last"),n in t)t[n].call(this,e);else{if(!i.isNumber(n))throw"invalid argument _cindex";this.config.columns.splice(n,[].concat(e))}return l.call(this),this}}(),this.removeColumn=function(){var t={first:function(t){this.config.columns.splice(t,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(e){if("undefined"==typeof e&&(e="last"),e in t)t[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _cindex";this.config.columns.splice(e,1)}return l.call(this),this}}(),this.updateColumn=function(t,e){if(!i.isNumber(e))throw"invalid argument _cindex";return this.config.columns.splice(e,1,t),l.call(this),this},this.setColumnWidth=function(e,i){return this.colGroup[this.xvar.columnResizerIndex]._width=e,this.needToPaintSum=!0,t.header.repaint.call(this),t.body.repaint.call(this,!0),t.scroller.resize.call(this),d.call(this),this},this.getColumnSort=function(){return{}},this.setColumnSort=function(e){return"undefined"!=typeof e&&(this.sortInfo=e,t.header.applySortStatus.call(this,e)),h.call(this,e||this.sortInfo),this},this.select=function(e){if(i.isNumber(e)){var n=e;this.config.multipleSelect||(t.body.updateRowState.call(this,["selectedClear"]),t.data.clearSelect.call(this)),t.data.select.call(this,n),t.body.updateRowState.call(this,["selected"],n)}return this},this.main=function(){e.grid_instance=e.grid_instance||[],e.grid_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.grid}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"mediaViewer",version:"0.4.3"},function(){var i=function(){var i,n=this,a={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},o=function(t){var e="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;return{clientX:e.clientX,clientY:e.clientY,time:(new Date).getTime()}};this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",animateTime:250,columnKeys:{src:"src",poster:"poster",html:"html"},loading:{icon:"",text:"Now Loading"},viewer:{prevHandle:!1,nextHandle:!1,ratio:16/9},media:{prevHandle:"<",nextHandle:">",width:36,height:36,list:[]}},this.queue=[],this.openTimer=null,this.closeTimer=null,this.selectedIndex=0,this.mousePosition={},i=this.config;var s=function(t){return'\n                    <div data-ax5-ui-media-viewer="{{id}}" class="{{theme}}">\n                        <div data-media-viewer-els="viewer-holder">\n                        <div data-media-viewer-els="viewer"></div>\n                        </div>\n                        <div data-media-viewer-els="viewer-loading">\n                        <div class="ax5-ui-media-viewer-loading-holder">\n                        <div class="ax5-ui-media-viewer-loading-cell">\n                        {{{loading.icon}}}\n                    {{{loading.text}}}\n                    </div>\n                    </div>\n                    </div>\n                    {{#media}}\n                    <div data-media-viewer-els="media-list-holder">\n                        <div data-media-viewer-els="media-list-prev-handle">{{{prevHandle}}}</div>\n                    <div data-media-viewer-els="media-list">\n                        <div data-media-viewer-els="media-list-table">\n                        {{#list}}\n                    <div data-media-viewer-els="media-list-table-td">\n                        {{#image}}\n                    <div data-media-thumbnail="{{@i}}">\n                        <img src="{{'+t.poster+'}}" data-media-thumbnail-image="{{@i}}" />\n                        </div>\n                        {{/image}}\n                    {{#video}}\n                    <div data-media-thumbnail="{{@i}}">{{#'+t.poster+'}}<img src="{{.}}" data-media-thumbnail-video="{{@i}}" />>{{/'+t.poster+"}}{{^"+t.poster+'}}<a data-media-thumbnail-video="{{@i}}">{{{media.'+t.poster+"}}}</a>{{/"+t.poster+'}}</div>\n                    {{/video}}\n                    </div>\n                        {{/list}}\n                    </div>\n                        </div>\n                        <div data-media-viewer-els="media-list-next-handle">{{{nextHandle}}}</div>\n                        </div>\n                        {{/media}}\n                    </div>\n                        '},l=function(){var t=jQuery.extend(!0,{},i),e=s(i.columnKeys);t.id=this.id;try{return ax5.mustache.render(e,t)}finally{t=null,e=null}},r=function(t,a){var o,s="",l={thumbnail:function(t){this.select(t.getAttribute("data-media-thumbnail"))},prev:function(t){this.selectedIndex>0?this.select(this.selectedIndex-1):this.select(i.media.list.length-1)},next:function(t){this.selectedIndex<i.media.list.length-1?this.select(this.selectedIndex+1):this.select(0)},viewer:function(t){n.onClick&&n.onClick.call({media:i.media.list[this.selectedIndex]})}};if(a=e.findParentNode(t.target,function(t){return t.getAttribute("data-media-thumbnail")?(s="thumbnail",!0):"media-list-prev-handle"==t.getAttribute("data-media-viewer-els")?(s="prev",!0):"media-list-next-handle"==t.getAttribute("data-media-viewer-els")?(s="next",!0):"viewer"==t.getAttribute("data-media-viewer-els")?(s="viewer",!0):n.target.get(0)==t?!0:void 0})){for(var r in l)if(r==s){o=l[r].call(this,a);break}return this}return this},u=function(){if(i.media&&i.media.list&&i.media.list.length>0){for(var t=i.media.list.length,e=0;t--;)if(i.media.list[t].selected){e=t;break}0==e&&(i.media.list[0].selected=!0);try{return e}finally{t=null,e=null}}},c=function(){var t=this.$.list.find("[data-media-thumbnail="+this.selectedIndex+"]"),e=t.position(),i=t.outerWidth(),n=this.$.list.outerWidth(),a=this.$["list-table"].position().left,o=this.$["list-table"].outerWidth(),s=0;e.left+i+a>n?(s=n-(e.left+i),a!=s&&this.$["list-table"].css({left:a=s})):e.left+a<0&&(s=e.left,s>0&&(s=0),a!=s&&this.$["list-table"].css({left:a=s})),a!=s&&n>a+o&&(s=n-o,s>0&&(s=0),this.$["list-table"].css({left:s})),t=null,e=null,i=null,n=null,a=null,s=null},d={on:function(t){var o=function(e){var i=e;return"changedTouches"in e.originalEvent&&(i=e.originalEvent.changedTouches[0]),t.__dx=i.clientX-t.clientX,t.__dy=i.clientY-t.clientY,t.__time=(new Date).getTime(),Math.abs(t.__dx)>Math.abs(t.__dy)?{left:t.__dx}:{top:t.__dy}},s=this.$.viewer.width();jQuery(document.body).bind(a.mousemove+".ax5media-viewer-"+this.instanceId,function(t){var a=o(t);if("left"in a){if(n.$["viewer-holder"].css(a),Math.abs(n.mousePosition.__dx)>s/3){var l=0;n.mousePosition.__dx>0?l=n.selectedIndex>0?n.selectedIndex-1:i.media.list.length-1:n.selectedIndex<i.media.list.length-1&&(l=n.selectedIndex+1),n.select(l),d.off.call(n)}e.stopEvent(t)}}).bind(a.mouseup+".ax5media-viewer-"+this.instanceId,function(t){d.off.call(n)}).bind("mouseleave.ax5media-viewer-"+this.instanceId,function(t){d.off.call(n)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){n.$["viewer-holder"].css({left:0}),jQuery(document.body).unbind(a.mousemove+".ax5media-viewer-"+this.instanceId).unbind(a.mouseup+".ax5media-viewer-"+this.instanceId).unbind("mouseleave.ax5media-viewer-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}};this.init=function(){this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,this.id="ax5-media-viewer-"+ax5.getGuid(),i.target&&i.media&&i.media.list&&i.media.list.length>0&&this.attach(i.target)},this.attach=function(t,i){return t||console.log(ax5.info.getError("ax5mediaViewer","401","setConfig")),"undefined"!=typeof i&&this.setConfig(i,!1),this.target=jQuery(t),this.target.html(l.call(this)),this.$={root:this.target.find("[data-ax5-ui-media-viewer]"),"viewer-holder":this.target.find('[data-media-viewer-els="viewer-holder"]'),viewer:this.target.find('[data-media-viewer-els="viewer"]'),"viewer-loading":this.target.find('[data-media-viewer-els="viewer-loading"]'),"list-holder":this.target.find('[data-media-viewer-els="media-list-holder"]'),"list-prev-handle":this.target.find('[data-media-viewer-els="media-list-prev-handle"]'),list:this.target.find('[data-media-viewer-els="media-list"]'),"list-table":this.target.find('[data-media-viewer-els="media-list-table"]'),"list-next-handle":this.target.find('[data-media-viewer-els="media-list-next-handle"]')},this.align(),jQuery(window).unbind("resize.ax5media-viewer-"+this.id).bind("resize.ax5media-viewer-"+this.id,function(){this.align(),c.call(this)}.bind(this)),this.target.unbind("click").bind("click",function(t){t=t||window.event,r.call(this,t),e.stopEvent(t)}.bind(this)),this.$.viewer.unbind(a.mousedown).bind(a.mousedown,function(t){this.mousePosition=o(t),d.on.call(this,this.mousePosition)}.bind(this)).unbind("dragstart").bind("dragstart",function(t){return e.stopEvent(t),!1}),this.select(u.call(this)),this},this.align=function(){if(this.$["viewer-holder"].css({height:this.$.viewer.width()/i.viewer.ratio}),this.$.viewer.css({height:this.$.viewer.width()/i.viewer.ratio}),"image"==this.$.viewer.data("media-type")){var t=this.$.viewer.find("img");t.css({width:this.$.viewer.height()*this.$.viewer.data("img-ratio"),height:this.$.viewer.height()}),setTimeout(function(t){t.css({left:(this.$.viewer.width()-t.width())/2})}.bind(this,t),1)}else"video"==this.$.viewer.data("media-type")&&this.$.viewer.find("iframe").css({width:this.$.viewer.height()*this.$.viewer.data("img-ratio"),height:this.$.viewer.height()});this.$["viewer-loading"].css({height:this.$.viewer.height()});var n="%"==e.right(i.media.width,1)?e.number(i.media.width)/100*this.$.viewer.width():e.number(i.media.width),a="%"==e.right(i.media.height,1)?e.number(i.media.height)/100*this.$.viewer.width():e.number(i.media.height);return n=Math.floor(n),a=Math.floor(a),this.$["list-prev-handle"].css({width:1.5*n}),this.$["list-next-handle"].css({width:1.5*n}),this.$.list.css({height:a}),this.$["list-table"].find("[data-media-thumbnail]").css({width:n,height:a}),this.$["list-table"].find("[data-media-thumbnail-video]").css({width:n,height:a}),this},this.select=function(){var t={image:function(t,e){n.$["viewer-loading"].show();var a=[this.$.viewer.width(),this.$.viewer.height()],o=new Image;return o.src=t.image[i.columnKeys.src],o.onload=function(){n.$["viewer-loading"].fadeOut();var t=a[1],i=t*o.width/o.height;e(o,Math.floor(i),t)},o},video:function(t,e){n.$["viewer-loading"].show();var a=[this.$.viewer.width(),this.$.viewer.height()],o=jQuery(t.video[i.columnKeys.html]);e(o,a[0],a[1]),n.$["viewer-loading"].fadeOut()}},e={image:function(t,e,i){t.width=e,t.height=i;var n=$(t);this.$.viewer.html(n),n.css({left:(this.$.viewer.width()-e)/2}),this.$.viewer.data("media-type","image"),this.$.viewer.data("img-ratio",e/i)},video:function(t,e,i){t.css({width:e,height:i}),this.$.viewer.html(t),this.$.viewer.data("media-type","video"),this.$.viewer.data("img-ratio",e/i)}},a=function(t){this.$.list.find("[data-media-thumbnail]").removeClass("selected"),this.$.list.find("[data-media-thumbnail="+t+"]").addClass("selected"),c.call(this)};return function(n){if("undefined"==typeof n)return this;this.selectedIndex=Number(n);var o=i.media.list[n];a.call(this,n);for(var s in t)if(o[s]){t[s].call(this,o,e[s].bind(this));break}return this}}(),this.setMediaList=function(t){return i.media.list=[].concat(t),this.attach(i.target),this},this.main=function(){t.mediaViewer_instance=t.mediaViewer_instance||[],t.mediaViewer_instance.push(this),arguments&&e.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return i}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"uploader",version:"0.0.5"},function(){var i=function(){var i;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",file_types:"*/*"},this.queue=[],this.target=null,this.selectedFile=null,this.uploadedFile=null,i=this.config,this.init=function(){this.target=$(i.target),this.target.html(this.__get_layout()),this.els={container:this.target.find('[data-ui-els="container"]'),preview:this.target.find('[data-ui-els="preview"]'),"preview-img":this.target.find('[data-ui-els="preview-img"]'),"input-file":this.target.find('[data-ui-els="input-file"]'),progress:this.target.find('[data-ui-els="progress"]'),"progress-bar":this.target.find('[data-ui-els="progress-bar"]')},this.els.preview.bind("click",function(){this.__request_select_file()}.bind(this)),this.els["input-file"].bind("change",function(t){this.__on_select_file(t||window.event)}.bind(this)),function(){var t,e=this.els.container,i=this.els["preview-img"],n=this;e.get(0).addEventListener("dragover",function(n){n.stopPropagation(),n.preventDefault(),i.hide(),t&&clearTimeout(t),e.addClass("dragover")},!1),e.get(0).addEventListener("dragleave",function(n){n.stopPropagation(),n.preventDefault(),t&&clearTimeout(t),t=setTimeout(function(){i.show()},100),e.removeClass("dragover")},!1),e.get(0).addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault(),e.removeClass("dragover"),n.__on_select_file(t||window.event)},!1)}.call(this),setTimeout(function(){this.__set_size_layout()}.bind(this),1)},this.__get_layout=function(){var t=[],e="",n=i.file_types;return t.push('<div class="ax5-ui-single-uploader '+i.theme+'" data-ui-els="container">'),t.push('<div class="upload-preview" data-ui-els="preview">'),t.push('<img class="upload-preview-img" data-ui-els="preview-img" src="" style="display:none;width:100%;height:100%;" />'),t.push('<span class="empty-msg">'+i.empty_msg+"<span>"),t.push("</div>"),t.push('<div class="ax5-ui-progress '+(i.progress_theme||"")+'" data-ui-els="progress" style="display: none;"><div class="progress-bar" data-ui-els="progress-bar"></div></div>'),t.push('<input type="file" '+e+' accept="'+n+'" capture="camera" data-ui-els="input-file" />'),t.push("</div>"),t.join("")},this.__set_size_layout=this.align=function(){var t=20,e=this.els.progress.height(),i=this.els.container.width(),n=this.els.container.height();0!=i&&0!=n&&this.els.progress.css({left:t,top:n/2-e/2,width:i-2*t})},this.__request_select_file=function(){return i.before_select_file&&!i.before_select_file.call()?!1:void(window.imagePicker?window.imagePicker.getPictures(function(t){for(var e=0;e<t.length;e++)console.log("Image URI: "+t[e]);_this.__on_select_file(t)},function(t){console.log("Error: "+t)}):this.els["input-file"].trigger("click"))},this.__on_select_file=function(t){var e,n=this.target.id,a=this.els["preview-img"].get(0);if("dataTransfer"in t?e=t.dataTransfer.files[0]:"target"in t?e=t.target.files[0]:t&&(e=t[0]),!e)return!1;if(this.selected_file=e,function(t){function i(e,i,n){var a={},o=new Image;o.src=e.src,o.onload=function(){this.width>this.height?this.height>n?(a={width:this.width*(n/this.height),height:n},a.left=(i-a.width)/2):(a={width:this.width,height:this.height},a.top=(n-a.height)/2):this.width>i?(a={height:this.height*(i/this.width),width:i},a.top=(n-a.height)/2):(a={width:this.width,height:this.height},a.left=(i-a.width)/2),console.log(a),t.els["preview-img"].css(a)}}if(t.els["preview-img"].css({display:"block"}),window.imagePicker)a.src=e,i(a,t.els.container.width(),t.els.container.height());else{var o=new FileReader(n);o.onloadend=function(){try{a.src=o.result,i(a,t.els.container.width(),t.els.container.height())}catch(e){console.log(e)}},e&&o.readAsDataURL(e)}}(this),i.on_event){var o={action:"fileselect",file:e};i.on_event.call(o,o)}},this.upload=function(){var t=this;if(!this.selected_file){if(i.on_event){var n={action:"error",error:ax5.info.get_error("single-uploader","460","upload")};i.on_event.call(n,n)}return this}var a=new FormData,o=this.els["progress-bar"];this.els.progress.css({display:"block"}),o.css({width:"0%"}),window.imagePicker?a.append(i.upload_http.filename_param_key,this.selected_file):a.append(i.upload_http.filename_param_key,this.selected_file);for(var s in i.upload_http.data)a.append(s,i.upload_http.data[s]);this.xhr=new XMLHttpRequest,this.xhr.open(i.upload_http.method,i.upload_http.url,!0),this.xhr.onload=function(i){var n=i.target.response;try{"string"==typeof n&&(n=e.parseJson(n))}catch(i){return console.log(i),!1}return n.error?(console.log(n.error),!1):void t.upload_complete(n)},this.xhr.upload.onprogress=function(i){o.css({width:e.number(i.loaded/i.total*100,{round:2})+"%"}),i.lengthComputable&&i.loaded>=i.total&&setTimeout(function(){t.els.progress.css({display:"none"})},300)},this.xhr.send(a)},this.upload_complete=function(t){if(this.selected_file=null,this.uploaded_file=t,this.els.container.addClass("uploaded"),i.on_event){var e={action:"uploaded",file:t};i.on_event.call(e,e)}},this.set_uploaded_file=function(t){this.uploaded_file=t,this.uploaded_file?this.els.container.addClass("uploaded"):this.els.container.removeClass("uploaded")},this.set_preview_img=function(t){t?this.els["preview-img"].attr({src:t}).show():this.els["preview-img"].attr({src:null}).hide()},this.main=function(){t.uploader_instance=t.uploader_instance||[],t.uploader_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}());
}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"combobox",version:"0.3.6"},function(){var e=function(){var e,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,removeIcon:"X",lang:{noSelected:"",noOptions:"no options",loading:"now loading.."},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,e=this.config;var a=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},o=function(){for(var t,e=this.queue.length;e--;){var n=this.queue[e];if(n.$display&&(t=Math.max(n.$select.outerWidth(),i.number(n.minWidth)),n.$display.css({"min-width":t}),n.reset&&n.$display.find(".addon-icon-reset").css({"line-height":this.queue[e].$display.height()+"px"}),n.multiple)){var a=function(){return i.number(n.$display.css("border-top-width"))+i.number(n.$display.css("border-bottom-width"))}.call(this);n.$target.height(""),n.$display.height("");var o=n.$displayTable.outerHeight();Math.abs(o-n.$target.height())>a&&(n.$target.css({height:o+a}),n.$display.css({height:o+a}))}}return e=null,t=null,this},s=function(t){if(!this.activecomboboxOptionGroup)return this;var e=this.queue[this.activecomboboxQueueIndex],i={},n={};t&&jQuery(document.body).append(this.activecomboboxOptionGroup),i=e.$target.offset(),n={width:e.$target.outerWidth(),height:e.$target.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction||(e.direction="top"),t&&this.activecomboboxOptionGroup.addClass("direction-"+e.direction),this.activecomboboxOptionGroup.css(function(){return"top"==e.direction?{left:i.left,top:i.top+n.height+1,width:n.width}:"bottom"==e.direction?{left:i.left,top:i.top-this.activecomboboxOptionGroup.outerHeight()-1,width:n.width}:void 0}.call(this))},l=function(t,e){if(!this.activecomboboxOptionGroup)return this;var n=this.queue[this.activecomboboxQueueIndex],a="display";return(e=i.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(w.call(this,n.id,{index:{gindex:e.getAttribute("data-option-group-index"),index:e.getAttribute("data-option-index")}},void 0,"internal"),i.selectRange(n.$displayLabel,"end"),n.multiple||this.close()),this):(this.close(),this)},r=function(e){if(e.keyCode==ax5.info.eventKeys.ESC)h.call(this,this.activecomboboxQueueIndex),this.close();else if(e.which==ax5.info.eventKeys.RETURN){for(var i=[],n=this.queue[this.activecomboboxQueueIndex],a=n.$displayLabel.get(0).childNodes,o=0,s=a.length;s>o;o++){var l=a[o];if(l.nodeType in t.util.nodeTypeProcessor){var r=t.util.nodeTypeProcessor[l.nodeType].call(this,this.activecomboboxQueueIndex,l);"undefined"!=typeof r&&i.push(r)}}w.call(this,n.id,i,!0),d.call(this,this.activecomboboxQueueIndex),n.multiple||this.close()}},u=function(e){var i=this.queue[e],n={};return n.id=i.id,n.theme=i.theme,n.size="ax5combobox-option-group-"+i.size,n.multiple=i.multiple,n.lang=i.lang,n.options=i.options,n.selected=i.selected,n.hasSelected=n.selected&&n.selected.length>0,n.removeIcon=i.removeIcon,ax5.mustache.render(t.tmpl.label.call(this,i.columnKeys),n)+"&nbsp;"},c=function(t){var e,n=this.queue[t];if(n.$displayLabel.html(u.call(this,t)),n.$target.height(""),n.$display.height(""),n.$target.height()<(e=n.$displayTable.outerHeight())){var a=function(){return i.number(n.$display.css("border-top-width"))+i.number(n.$display.css("border-bottom-width"))}();n.$target.css({height:e+a}),n.$display.css({height:e+a})}},d=function(t){this.queue[t].$displayLabel.trigger("focus"),i.selectRange(this.queue[t].$displayLabel,"end")},h=function(t){this.queue[t].$displayLabel.trigger("blur")},p=function(e,n){this.queue[e].waitOptions=!0,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(t.tmpl.options.call(this,this.queue[e].columnKeys),this.queue[e]))),this.queue[e].onSearch.call({self:this,item:this.queue[e],searchWord:n},function(e){var n={},a=this.queue[this.activecomboboxQueueIndex];return a?(function(t,e){var n={};e.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),i.isArray(t.selected)&&t.selected.forEach(function(i){n[i[t.columnKeys.optionValue]]&&(e.options[n[i[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(a,e),a.options=v.call(this,this.activecomboboxQueueIndex,e.options),o.call(this),n.id=a.id,n.theme=a.theme,n.size="ax5combobox-option-group-"+a.size,n.multiple=a.multiple,n.lang=a.lang,n.options=a.options,void this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(t.tmpl.options.call(this,a.columnKeys),n)))):!1}.bind(this))},f=function(t,e){if(-1==this.activecomboboxQueueIndex)return this;var i,n=[],a=-1,o=this.queue[t].indexedOptions.length-1;if(console.log(e),""!=e){var s=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;if(e=e.replace(s,""),this.queue[t].onSearch){p.call(this,t,e);try{return n}finally{n=null,a=null,o=null,i=null}}for(;o-a++;){if(i=this.queue[t].indexedOptions[a],(""+i.text).toLowerCase()==e.toLowerCase()){n=[{"@findex":i["@findex"],optionsSort:0}];break}var l=(""+i.text).toLowerCase().search(e.toLowerCase());if(l>-1&&(n.push({"@findex":i["@findex"],optionsSort:l}),n.length>2))break;l=null}n.sort(function(t,e){return t.optionsSort-e.optionsSort})}n&&n.length>0?g.call(this,t,void 0,n[0]["@findex"]):m.call(this,t);try{return n}finally{n=null,a=null,o=null,i=null}},m=function(t){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected"),this.queue[t].optionFocusIndex=-1},g=function(t,e,n){var a,o,s,l,r=this.queue[t];if(this.activecomboboxOptionGroup&&r.options&&r.options.length>0){if("undefined"!=typeof n?a=n:(o=-1==r.optionFocusIndex?r.optionSelectedIndex||-1:r.optionFocusIndex,-1==o?a=0:(a=o+e,0>a?a=0:a>r.optionItemLength-1&&(a=r.optionItemLength-1))),r.optionFocusIndex=a,r.options[a]&&r.options[a].hide){if("undefined"==typeof e)return this;for(;r.options[a].hide;){if(a+=e,0>a){a=0;break}if(a>r.optionItemLength-1){a=r.optionItemLength-1;break}}}if("undefined"!=typeof a&&(this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover"),s=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+a+'"]').addClass("hover"),l=this.activecomboboxOptionGroup.find('[data-els="content"]'),s.get(0))){var u=s.outerHeight(),c=l.innerHeight(),d=l.scrollTop(),h=s.position().top+l.scrollTop();if(h+u>c+d?l.scrollTop(h+u-c):d>h&&l.scrollTop(h),"undefined"!=typeof e){var p=r.$displayLabel.get(0).childNodes,f=p[p.length-1];f&&"3"==f.nodeType?(f.nodeValue=r.indexedOptions[a].text,i.selectRange(r.$displayLabel,"end")):f&&"1"==f.nodeType&&(jQuery(f).after(r.indexedOptions[a].text),i.selectRange(r.$displayLabel,"end"))}}}},v=function(){var t=function(t,e){e?this.queue[t].selected.push(jQuery.extend({},e)):this.queue[t].selected=[]};return function(e,a){var o,s,l,r=this.queue[e],u=0;return t.call(this,e,!1),a?(r.options=a,r.indexedOptions=[],o=[],o.push('<option value=""></option>'),r.options.forEach(function(i,a){i.optgroup?(i["@gindex"]=a,i.options.forEach(function(i,s){i["@index"]=s,i["@findex"]=u,o.push('<option value="'+i[r.columnKeys.optionValue]+'" '+(i[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+i[r.columnKeys.optionText]+"</option>"),i[r.columnKeys.optionSelected]&&t.call(n,e,i),r.indexedOptions.push({"@gindex":a,"@index":s,"@findex":u,value:i[r.columnKeys.optionValue],text:i[r.columnKeys.optionText]}),u++})):(i["@index"]=a,i["@findex"]=u,o.push('<option value="'+i[r.columnKeys.optionValue]+'" '+(i[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+i[r.columnKeys.optionText]+"</option>"),i[r.columnKeys.optionSelected]&&t.call(n,e,i),r.indexedOptions.push({"@index":a,"@findex":u,value:i[r.columnKeys.optionValue],text:i[r.columnKeys.optionText]}),u++)}),r.optionItemLength=u,r.$select.html(o.join(""))):(r.$select.get(0).options&&r.$select.get(0).options.length&&(r.$select.get(0).options[0].selected=!1),s=i.toArray(r.$select.get(0).options),l=[],s.forEach(function(i,a){var o={};o[r.columnKeys.optionValue]=i.value,o[r.columnKeys.optionText]=i.text,o[r.columnKeys.optionSelected]=i.selected,o["@index"]=a,o["@findex"]=u,i.selected&&t.call(n,e,o),l.push(o),u++,o=null}),r.options=l,r.indexedOptions=l,r.$select.prepend('<option value=""></option>'),r.$select.get(0).options[0].selected=!0),o=null,s=null,l=null,r.options}}(),b=function(t){return t instanceof jQuery?t=t.data("data-ax5combobox-id"):i.isString(t)||(t=jQuery(t).data("data-ax5combobox-id")),i.isString(t)?i.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5combobox","402","getQueIdx"))},y=function(t,e,i){return"undefined"==typeof i?t.multiple?!e:!0:i},x=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1})},w=function(){var t={index:function(t,e,a,o){var l=this.queue[t];i.isString(e.index.gindex)?"undefined"!=typeof l.options[e.index.gindex]&&(l.options[e.index.gindex].options[e.index.index][l.columnKeys.optionSelected]=y(l,l.options[e.index.gindex].options[e.index.index][l.columnKeys.optionSelected],a),n.activecomboboxOptionGroup&&n.activecomboboxOptionGroup.find('[data-option-group-index="'+e.index.gindex+'"][data-option-index="'+e.index.index+'"]').attr("data-option-Selected",l.options[e.index.gindex].options[e.index.index][l.columnKeys.optionSelected].toString())):"undefined"!=typeof l.options[e.index.index]&&(l.options[e.index.index][l.columnKeys.optionSelected]=y(l,l.options[e.index.index][l.columnKeys.optionSelected],a),n.activecomboboxOptionGroup&&n.activecomboboxOptionGroup.find('[data-option-index="'+e.index.index+'"]').attr("data-option-Selected",l.options[e.index.index][l.columnKeys.optionSelected].toString())),("undefined"==typeof o||"justSetValue"!==o)&&(v.call(this,t,l.options),c.call(this,t),s.call(this))},arr:function(e,a,o,l){a.forEach(function(a){if(i.isString(a)||i.isNumber(a))t.text.call(n,e,a,o,"justSetValue");else for(var s in t)if(a[s]){t[s].call(n,e,a,o,"justSetValue");break}}),v.call(this,e,this.queue[e].options),c.call(this,e),s.call(this)},value:function(t,e,n,a){var o,l=this.queue[t],r=i.search(l.options,function(){return this[l.columnKeys.optionValue]==e[l.columnKeys.optionValue]});r>-1?l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],n):(r=l.options.length,o={"@index":r,hide:!0,addedOption:!0},o[l.columnKeys.optionValue]=e,o[l.columnKeys.optionText]=e,l.options.push(o),l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],n)),("undefined"==typeof a||"justSetValue"!==a)&&(v.call(this,t,this.queue[t].options),c.call(this,t),s.call(this))},text:function(t,e,n,a){var o,l=this.queue[t],r=i.search(l.options,function(){return this[l.columnKeys.optionText]==e});r>-1?l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],n):(r=l.options.length,o={"@index":r,hide:!0,addedOption:!0},o[l.columnKeys.optionValue]=e,o[l.columnKeys.optionText]=e,l.options.push(o),l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],n)),("undefined"==typeof a||"justSetValue"!==a)&&(v.call(this,t,this.queue[t].options),c.call(this,t),s.call(this))},clear:function(t){x.call(this,t),v.call(this,t,this.queue[t].options),m.call(this,t),this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-index]").attr("data-option-Selected","false"),this.queue[t].optionSelectedIndex=-1}};return function(e,n,o,l){var r=i.isNumber(e)?e:b.call(this,e);if(-1===r)return void console.log(ax5.info.getError("ax5combobox","402","val"));if("undefined"==typeof n)throw"error not found value";if(i.isArray(n))t.clear.call(this,r),t.arr.call(this,r,this.queue[r].multiple||0==n.length?n:[n[n.length-1]],o);else if(i.isString(n)||i.isNumber(n))"undefined"==typeof n||null===n||this.queue[r].multiple||x.call(this,r),t.text.call(this,r,n,o,"justSetValue"),c.call(this,r);else if(null===n)t.clear.call(this,r),c.call(this,r);else{this.queue[r].multiple||x.call(this,r);for(var u in t)if(n[u]){t[u].call(this,r,n,o,"justSetValue");break}v.call(this,r,this.queue[r].options),c.call(this,r),s.call(this)}return"undefined"!=typeof n&&l&&!l.noStateChange&&a.call(this,this.queue[r],{self:this,item:this.queue[r],state:"changeValue",value:this.queue[r].selected}),e=null,this}}();this.init=function(){this.onStateChanged=e.onStateChanged,this.onChange=e.onChange,jQuery(window).bind("resize.ax5combobox-display-"+this.instanceId,function(){o.call(this)}.bind(this))},this.bind=function(a){var s,l=function(){var e=i.debounce(function(e){if(-1==this.activecomboboxQueueIndex)return this;for(var a=[],o="",s=this.queue[e],l=s.$displayLabel.get(0).childNodes,r=0,u=l.length;u>r;r++){var c=l[r];if(c.nodeType in t.util.nodeTypeProcessor){var d=t.util.nodeTypeProcessor[c.nodeType].call(this,this.activecomboboxQueueIndex,c,!0);"undefined"==typeof d||(i.isString(d)?(o=d,"1"==c.nodeType&&c.getAttribute("data-ax5combobox-selected-text")?o=!1:a.push(d)):a.push(d))}}0==l.length?w.call(this,s.id,null,void 0,"internal"):o===!1?(w.call(this,s.id,null,void 0,"internal"),w.call(this,s.id,a,void 0,"internal"),i.selectRange(s.$displayLabel,"end")):""!=o&&f.call(n,e,o)},150),a=function(e){for(var n=[],a=this.queue[e],o=a.$displayLabel.get(0).childNodes,s=0,l=o.length;l>s;s++){var r=o[s];if(r.nodeType in t.util.nodeTypeProcessor){var u=t.util.nodeTypeProcessor[r.nodeType].call(this,e,r,!1);"undefined"==typeof u||i.isString(u)||n.push(u)}}w.call(this,a.id,n,void 0,"internal")},s={click:function(t,e){var a,o=i.findParentNode(e.target,function(t){return t.getAttribute("data-ax5combobox-remove")?(a="optionItemRemove",!0):t.getAttribute("data-selected-clear")?(a="clear",!0):void 0});if(o){if("optionItemRemove"===a){var s=o.getAttribute("data-ax5combobox-remove-index"),l=this.queue[t].selected[s];return w.call(this,t,{index:{gindex:l["@gindex"],index:l["@index"]}},!1,!0),d.call(this,t),i.stopEvent(e),this}"clear"===a&&w.call(this,t,{clear:!0})}else n.activecomboboxQueueIndex==t?-1==this.queue[t].optionFocusIndex&&n.close():(n.open(t),""==this.queue[t].$displayLabel.text().replace(/^\W*|\W*$/g,"")&&(this.queue[t].$displayLabel.html(u.call(this,t)),d.call(this,t)))},keyUp:function(t,a){return a.which==ax5.info.eventKeys.ESC&&-1===n.activecomboboxQueueIndex?(i.stopEvent(a),this):(n.activecomboboxQueueIndex!=t&&(n.open(t),i.stopEvent(a)),void e.call(this,t))},keyDown:function(t,e){e.which==ax5.info.eventKeys.ESC?i.stopEvent(e):e.which==ax5.info.eventKeys.RETURN?i.stopEvent(e):e.which==ax5.info.eventKeys.DOWN?(g.call(this,t,1),i.stopEvent(e)):e.which==ax5.info.eventKeys.UP&&(g.call(this,t,-1),i.stopEvent(e))},focus:function(t,e){},blur:function(t,e){a.call(this,t),i.stopEvent(e)},selectChange:function(t,e){w.call(this,t,{value:this.queue[t].$select.val()},!0)}};return function(e){var i=this.queue[e],n={};return i.selected=[],i.$display?(i.$displayLabel.html(u.call(this,e)),i.options=v.call(this,e,i.options),o.call(this)):(n.instanceId=this.instanceId,n.id=i.id,n.name=i.name,n.theme=i.theme,n.tabIndex=i.tabIndex,n.multiple=i.multiple,n.reset=i.reset,n.label=u.call(this,e),n.formSize=function(){return i.size?"input-"+i.size:""}(),i.$display=jQuery(ax5.mustache.render(t.tmpl.comboboxDisplay.call(this,e),n)),i.$displayTable=i.$display.find('[data-els="display-table"]'),i.$displayLabel=i.$display.find('[data-ax5combobox-display="label"]'),i.$target.find("select").get(0)?(i.$select=i.$target.find("select"),i.$select.attr("tabindex","-1").attr("class","form-control "+n.formSize),n.name&&i.$select.attr("name","name"),n.multiple&&i.$select.attr("multiple","multiple")):(i.$select=jQuery(ax5.mustache.render(t.tmpl.formSelect.call(this,e),n)),i.$target.append(i.$select)),i.$target.append(i.$display),i.options=v.call(this,e,i.options),o.call(this)),i.$display.unbind("click.ax5combobox").bind("click.ax5combobox",s.click.bind(this,e)),i.$displayLabel.unbind("focus.ax5combobox").bind("focus.ax5combobox",s.focus.bind(this,e)).unbind("blur.ax5combobox").bind("blur.ax5combobox",s.blur.bind(this,e)).unbind("keyup.ax5combobox").bind("keyup.ax5combobox",s.keyUp.bind(this,e)).unbind("keydown.ax5combobox").bind("keydown.ax5combobox",s.keyDown.bind(this,e)),i.$select.unbind("change.ax5combobox").bind("change.ax5combobox",s.selectChange.bind(this,e)),n=null,i=null,e=null,this}}(),r={};return a=jQuery.extend(!0,r,e,a),a.target?(a.$target=jQuery(a.target),a.id||(a.id=a.$target.data("data-ax5combobox-id")),a.id||(a.id="ax5combobox-"+ax5.getGuid(),a.$target.data("data-ax5combobox-id",a.id)),a.name=a.$target.attr("data-ax5combobox"),a.options&&(a.options=JSON.parse(JSON.stringify(a.options))),function(t){i.isObject(t)&&!t.error&&(a=jQuery.extend(!0,a,t))}(i.parseJson(a.$target.attr("data-ax5combobox-config"),!0)),s=i.search(this.queue,function(){return this.id==a.id}),-1===s?(this.queue.push(a),l.call(this,this.queue.length-1)):(this.queue[s]=jQuery.extend(!0,{},this.queue[s],a),l.call(this,s)),r=null,s=null,this):(console.log(ax5.info.getError("ax5combobox","401","bind")),this)},this.open=function(){var n=function(e){e.onExpand.call({self:this,item:e},function(e){if(this.waitOptionsCallback){var n={},a=this.queue[this.activecomboboxQueueIndex];!function(t,e){var n={};e.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),i.isArray(t.selected)&&t.selected.forEach(function(i){n[i[t.columnKeys.optionValue]]&&(e.options[n[i[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(a,e),a.$display.find('[data-ax5combobox-display="label"]').html(u.call(this,this.activecomboboxQueueIndex)),a.options=v.call(this,this.activecomboboxQueueIndex,e.options),o.call(this),n.id=a.id,n.theme=a.theme,n.size="ax5combobox-option-group-"+a.size,n.multiple=a.multiple,n.lang=a.lang,n.options=a.options,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(t.tmpl.options.call(this,a.columnKeys),n)))}}.bind(this))};return function(o,u){this.waitOptionsCallback=null;var c,d,h=i.isNumber(o)?o:b.call(this,o),p=this.queue[h],f={};return p.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activecomboboxOptionGroup?this.activecomboboxQueueIndex==h?this:u>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(u||0)+1)}.bind(this),e.animateTime),this):(p.optionFocusIndex=-1,p.selected&&p.selected.length>0&&(p.optionSelectedIndex=p.selected[0]["@findex"]),f.id=p.id,f.theme=p.theme,f.size="ax5combobox-option-group-"+p.size,f.multiple=p.multiple,f.lang=p.lang,p.$display.attr("data-combobox-option-group-opened","true"),p.onExpand&&(f.waitOptions=!0),f.options=i.filter(p.options,function(){return!this.hide}),this.activecomboboxOptionGroup=jQuery(ax5.mustache.render(t.tmpl.optionGroup.call(this,p.columnKeys),f)),this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(t.tmpl.options.call(this,p.columnKeys),f))),this.activecomboboxQueueIndex=h,s.call(this,"append"),jQuery(window).bind("resize.ax5combobox-"+this.instanceId,function(){s.call(this)}.bind(this)),p.selected&&p.selected.length>0&&(d=this.activecomboboxOptionGroup.find('[data-option-index="'+p.selected[0]["@index"]+'"]'),d.get(0)&&(c=d.position().top-this.activecomboboxOptionGroup.height()/3,this.activecomboboxOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:c},p.animateTime,"swing",function(){}))),jQuery(window).bind("keyup.ax5combobox-"+this.instanceId,function(t){t=t||window.event,r.call(this,t),i.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5combobox-"+this.instanceId,function(t){t=t||window.event,l.call(this,t),i.stopEvent(t)}.bind(this)),a.call(this,p,{self:this,state:"open",item:p}),p.onExpand&&(this.waitOptionsCallback=!0,n.call(this,p)),f=null,c=null,d=null,this))}}(),this.update=function(t){return this.bind(t),this},this.setValue=function(t,e,n){var a=i.isNumber(t)?t:b.call(this,t);if(-1===a)return void console.log(ax5.info.getError("ax5combobox","402","val"));if(x.call(this,a),i.isArray(e)){var o=i.map(e,function(){return{value:this}});w.call(this,a,o,n||!0,{noStateChange:!0})}else(i.isString(e)||i.isNumber(e))&&w.call(this,a,{value:e},n||!0,{noStateChange:!0});return h.call(this,a),this},this.setText=function(t,e,n){var a=i.isNumber(t)?t:b.call(this,t);return-1===a?void console.log(ax5.info.getError("ax5combobox","402","val")):(x.call(this,a),w.call(this,a,e,!0,{noStateChange:!0}),h.call(this,a),this)},this.getSelectedOption=function(t){var e=i.isNumber(t)?t:b.call(this,t);return-1===e?void console.log(ax5.info.getError("ax5combobox","402","val")):i.deepCopy(this.queue[e].selected)},this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activecomboboxOptionGroup?(t=this.queue[this.activecomboboxQueueIndex],t.optionFocusIndex=-1,t.$display.removeAttr("data-combobox-option-group-opened").trigger("focus"),this.activecomboboxOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5combobox-"+this.instanceId).unbind("click.ax5combobox-"+this.instanceId).unbind("keyup.ax5combobox-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.remove(),this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,a.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime),this.waitOptionsCallback=null,this):this},this.blur=function(t){var e=i.isNumber(t)?t:b.call(this,t);return-1===e?void console.log(ax5.info.getError("ax5combobox","402","val")):(h.call(this,e),this)},this.enable=function(t){var e=b.call(this,t);return this.queue[e].$display.removeAttr("disabled"),this.queue[e].$input.removeAttr("disabled"),a.call(this,this.queue[e],{self:this,state:"enable"}),this},this.disable=function(t){var e=b.call(this,t);return this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$input.attr("disabled","disabled"),a.call(this,this.queue[e],{self:this,state:"disable"}),this},this.main=function(){arguments&&i.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return e}()),t=ax5.ui.combobox}(),ax5.ui.combobox_instance=new ax5.ui.combobox,jQuery.fn.ax5combobox=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.combobox_instance.open(this);case"close":return ax5.ui.combobox_instance.close(this);case"setValue":return ax5.ui.combobox_instance.setValue(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"setText":return ax5.ui.combobox_instance.setText(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"getSelectedOption":return ax5.ui.combobox_instance.getSelectedOption(this);case"enable":return ax5.ui.combobox_instance.enable(this);case"disable":return ax5.ui.combobox_instance.disable(this);case"blur":return ax5.ui.combobox_instance.blur(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.combobox_instance.bind(t)});return this}}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"layout",version:"0.2.10"},function(){var t=function(){var t,i=this,n={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(t){var e="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;return{clientX:e.clientX,clientY:e.clientY}};this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,splitter:{size:4},autoResize:!0},this.queue=[],this.openTimer=null,this.closeTimer=null,this.resizer=null,t=this.config;var o=function(){for(var t=this.queue.length;t--;)"undefined"==typeof this.queue[t].parentQueIdx&&this.queue[t].autoResize&&l.call(this,t,null,"windowResize")},s={width:function(t,e){return e?e.__width+(e.split?t.splitter.size:0):0},height:function(t,e){return e?e.__height+(e.split?t.splitter.size:0):0}},l=function(){var t={split:{vertical:function(t,e,i){e.splitter?e.__height=t.splitter.size:i==t.splitPanel.length-1&&0==t.splitPanel.asteriskLength?(e.height="*",e.__height=void 0,t.splitPanel.asteriskLength++):"*"==e.height&&t.splitPanel.asteriskLength++},horizontal:function(t,e,i){e.splitter?e.__width=t.splitter.size:i==t.splitPanel.length-1&&0==t.splitPanel.asteriskLength?(e.width="*",e.__width=void 0,t.splitPanel.asteriskLength++):"*"==e.width&&t.splitPanel.asteriskLength++}}},i={top:function(t,e){e.$target.css({height:e.__height||0}),e.split&&e.$splitter.css({height:t.splitter.size,top:e.__height||0})},bottom:function(t,e){e.$target.css({height:e.__height||0}),e.split&&e.$splitter.css({height:t.splitter.size,bottom:e.__height||0})},left:function(t,e){var i={width:e.__width||0,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height,i.top=t.dockPanel.top.__height,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),e.$target.css(i),e.split&&e.$splitter.css({width:t.splitter.size,height:i.height,top:i.top,left:i.width})},right:function(t,e){var i={width:e.__width||0,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height,i.top=t.dockPanel.top.__height,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),e.$target.css(i),e.split&&e.$splitter.css({width:t.splitter.size,height:i.height,top:i.top,right:i.width})},center:function(t,e){var i={width:t.targetDimension.width,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height||0,i.top=t.dockPanel.top.__height||0,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height||0,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),t.dockPanel.left&&(i.width-=t.dockPanel.left.__width||0,i.left=t.dockPanel.left.__width||0,t.dockPanel.left.split&&(i.width-=t.splitter.size,i.left+=t.splitter.size)),t.dockPanel.right&&(i.width-=t.dockPanel.right.__width||0,t.dockPanel.right.split&&(i.width-=t.splitter.size));var n=e.minWidth||0,a=e.minHeight||0;i.width<n&&(i.width=n,t.$target.css({minWidth:n+s.width(t.dockPanel.left,t.splitter.size)+s.width(t.dockPanel.right,t.splitter.size)})),i.height<a&&(i.height=a,t.$target.css({minHeight:a+s.height(t.dockPanel.top,t.splitter.size)+s.height(t.dockPanel.bottom,t.splitter.size)})),e.$target.css(i)},split:{vertical:function(t,e,i,n,a){var o={},s=i?Number(t.splitPanel[i-1].offsetEnd):0;e.splitter?o.height=t.splitter.size:"*"!=e.height||"undefined"!=typeof e.__height&&!a?o.height=e.__height||0:o.height=e.__height=(t.targetDimension.height-n)/t.splitPanel.asteriskLength,o.top=s,e.offsetStart=s,e.offsetEnd=Number(s)+Number(o.height),e.$target.css(o)},horizontal:function(t,e,i,n,a){var o={},s=i?Number(t.splitPanel[i-1].offsetEnd):0;e.splitter?o.width=t.splitter.size:"*"!=e.width||"undefined"!=typeof e.__width&&!a?o.width=e.__width||0:o.width=e.__width=(t.targetDimension.width-n)/t.splitPanel.asteriskLength,o.left=s,e.offsetStart=s,e.offsetEnd=Number(s)+Number(o.width),e.$target.css(o)}}},n={"dock-panel":function(t){for(var e in t.dockPanel)t.dockPanel[e].$target&&t.dockPanel[e].$target.get(0)&&e in i&&i[e].call(this,t,t.dockPanel[e])},"split-panel":function(n,a){var o;n.splitPanel.asteriskLength=0,n.splitPanel.forEach(function(e,i){t.split[n.oriental].call(this,n,e,i)}),o="vertical"==n.oriental?e.sum(n.splitPanel,function(t){return"*"!=t.height?e.number(t.__height):void 0}):e.sum(n.splitPanel,function(t){return"*"!=t.width?e.number(t.__width):void 0}),n.splitPanel.forEach(function(t,e){i.split[n.oriental].call(this,n,t,e,o,a)})}},a=function(t){for(var e=t.childQueIdxs.length;e--;)l.call(this,t.childQueIdxs[e])};return function(t,e,i){var o=this.queue[t];o.targetDimension={height:o.$target.innerHeight(),width:o.$target.innerWidth()},o.layout in n&&n[o.layout].call(this,o,i),o.childQueIdxs&&a.call(this,o,i),o.onResize&&setTimeout(function(){this.onResize.call(this,this)}.bind(o),1),e&&e.call(o,o)}}(),r={on:function(t,e,a){var o=this.queue[t],l=a.position(),u={width:a.width(),height:a.height()},c={left:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;e.__da=i.clientX-e.mousePosition.clientX;var n=e.minWidth||0,a=e.maxWidth||o.targetDimension.width-s.width(o,o.dockPanel.left)-s.width(o,o.dockPanel.right);return e.__width+e.__da<n?e.__da=-e.__width+n:a<e.__width+e.__da&&(e.__da=a-e.__width),{left:e.$splitter.position().left+e.__da}},right:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;e.__da=i.clientX-e.mousePosition.clientX;var n=e.minWidth||0,a=e.maxWidth||o.targetDimension.width-s.width(o,o.dockPanel.left)-s.width(o,o.dockPanel.right);return e.__width-e.__da<n?e.__da=e.__width-n:a<e.__width-e.__da&&(e.__da=-a+e.__width),{left:e.$splitter.position().left+e.__da}},top:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;e.__da=i.clientY-e.mousePosition.clientY;var n=e.minHeight||0,a=e.maxHeight||o.targetDimension.height-s.height(o,o.dockPanel.top)-s.height(o,o.dockPanel.bottom);return e.__height+e.__da<n?e.__da=-e.__height+n:a<e.__height+e.__da&&(e.__da=a-e.__height),{top:e.$splitter.position().top+e.__da}},bottom:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;e.__da=i.clientY-e.mousePosition.clientY;var n=e.minHeight||0,a=e.maxHeight||o.targetDimension.height-s.height(o,o.dockPanel.top)-s.height(o,o.dockPanel.bottom);return e.__height-e.__da<n?e.__da=e.__height-n:a<e.__height-e.__da&&(e.__da=-a+e.__height),{top:e.$splitter.position().top+e.__da}},split:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;if("vertical"==o.oriental){e.__da=i.clientY-e.mousePosition.clientY;var n=o.splitPanel[e.panelIndex-1],a=o.splitPanel[e.panelIndex+1],s=n.minHeight||0,l=a.minHeight||0;return e.offsetStart+e.__da<n.offsetStart+s?e.__da=n.offsetStart-e.offsetStart+s:e.offsetStart+e.__da>a.offsetEnd-l&&(e.__da=a.offsetEnd-e.offsetEnd-l),{top:e.$target.position().top+e.__da}}e.__da=i.clientX-e.mousePosition.clientX;var n=o.splitPanel[e.panelIndex-1],a=o.splitPanel[e.panelIndex+1],r=n.minWidth||0,u=a.minWidth||0;return e.offsetStart+e.__da<n.offsetStart+r?e.__da=n.offsetStart-e.offsetStart+r:e.offsetStart+e.__da>a.offsetEnd-u&&(e.__da=a.offsetEnd-e.offsetEnd-u),{left:Number(e.$target.position().left)+Number(e.__da)}}};e.__da=0,jQuery(document.body).bind(n.mousemove+".ax5layout-"+this.instanceId,function(t){i.resizer||(i.resizer=jQuery('<div class="ax5layout-resizer panel-'+e.resizerType+'" ondragstart="return false;"></div>'),i.resizer.css({left:l.left,top:l.top,width:u.width,height:u.height}),o.$target.append(i.resizer)),i.resizer.css(c[e.resizerType](t))}).bind(n.mouseup+".ax5layout-"+this.instanceId,function(n){r.off.call(i,t,e,a)}).bind("mouseleave.ax5layout-"+this.instanceId,function(n){r.off.call(i,t,e,a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(t,e,a){var o=this.queue[t],s={"dock-panel":{left:function(t,e){e.__width+=e.__da},right:function(){e.__width-=e.__da},top:function(){e.__height+=e.__da},bottom:function(){e.__height-=e.__da}},
"split-panel":{split:function(){"vertical"==o.oriental?(o.splitPanel[e.panelIndex-1].__height+=e.__da,o.splitPanel[e.panelIndex+1].__height-=e.__da):(o.splitPanel[e.panelIndex-1].__width+=e.__da,o.splitPanel[e.panelIndex+1].__width-=e.__da)}},"tab-panel":{}};i.resizer&&(i.resizer.remove(),i.resizer=null,s[this.queue[t].layout][e.resizerType].call(this,t,e),l.call(this,t)),jQuery(document.body).unbind(n.mousemove+".ax5layout-"+this.instanceId).unbind(n.mouseup+".ax5layout-"+this.instanceId).unbind("mouseleave.ax5layout-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},u={open:function(t,e,i){if(e.activePanelIndex!=i&&(e.tabPanel[i].active=!0,e.tabPanel[e.activePanelIndex].active=!1,e.$target.find('[data-tab-panel-label="'+i+'"]').attr("data-tab-active","true"),e.$target.find('[data-tab-panel-label="'+e.activePanelIndex+'"]').removeAttr("data-tab-active"),e.tabPanel[i].$target.attr("data-tab-active","true"),e.tabPanel[e.activePanelIndex].$target.removeAttr("data-tab-active"),e.activePanelIndex=i,e.onOpenTab)){var n={$target:e.$target,name:e.name,id:e.id,layout:e.layout,activePanelIndex:e.activePanelIndex,activePanel:e.tabPanel[e.activePanelIndex],tabPanel:e.tabPanel};e.onOpenTab.call(n)}}},c=function(){return'\n<div data-tab-panel-label-holder="{{id}}">\n    <div data-tab-panel-label-border="{{id}}"></div>\n    <div data-tab-panel-label-table="{{id}}">\n        <div data-tab-panel-aside="left"></div>\n    {{#tabPanel}}\n        <div data-tab-panel-label="{{panelIndex}}" data-tab-active="{{active}}">\n            <div data-tab-label="{{panelIndex}}">{{{label}}}</div>\n        </div>\n    {{/tabPanel}}\n        <div data-tab-panel-aside="right"></div>\n    </div>\n</div>\n'},d=function(){var t=function(t,i){return"*"==t?void 0:"%"==e.right(t,1)?i*e.number(t)/100:Number(t)},o={"dock-panel":function(o){var s=this.queue[o];s.dockPanel={},s.$target.find(">[data-dock-panel]").each(function(){var l={};!function(t){e.isObject(t)&&!t.error&&(l=jQuery.extend(!0,l,t))}(e.parseJson(this.getAttribute("data-dock-panel"),!0)),"dock"in l&&(l.$target=jQuery(this),l.$target.addClass("dock-panel-"+l.dock),(l.split=l.split&&"true"==l.split.toString())&&(l.$splitter=jQuery('<div data-splitter="" class="dock-panel-'+l.dock+'"></div>'),l.$splitter.bind(n.mousedown,function(t){l.mousePosition=a(t),r.on.call(i,o,l,l.$splitter)}).bind("dragstart",function(t){return e.stopEvent(t),!1}),s.$target.append(l.$splitter)),"top"==l.dock||"bottom"==l.dock?l.__height=t(l.height,s.targetDimension.height):l.__width=t(l.width,s.targetDimension.width),l.resizerType=l.dock,s.dockPanel[l.dock]=l)})},"split-panel":function(o){var s=this.queue[o];s.splitPanel=[],s.$target.find(">[data-split-panel], >[data-splitter]").each(function(l){var u={};!function(t){e.isObject(t)&&!t.error&&(u=jQuery.extend(!0,u,t))}(e.parseJson(this.getAttribute("data-split-panel")||this.getAttribute("data-splitter"),!0)),u.$target=jQuery(this),u.$target.addClass("split-panel-"+s.oriental),u.panelIndex=l,this.getAttribute("data-splitter")?(u.splitter=!0,u.$target.bind(n.mousedown,function(t){u.panelIndex>0&&u.panelIndex<s.splitPanel.length-1&&(u.mousePosition=a(t),r.on.call(i,o,u,u.$target))}).bind("dragstart",function(t){return e.stopEvent(t),!1}),u.resizerType="split"):"vertical"==s.oriental?u.__height=t(u.height,s.targetDimension.height):(s.oriental="horizontal",u.__width=t(u.width,s.targetDimension.width)),s.splitPanel.push(u)})},"tab-panel":function(t){var n=this.queue[t],a=!1;n.tabPanel=[],n.$target.find(">[data-tab-panel]").each(function(t){var i={};!function(t){e.isObject(t)&&!t.error&&(i=jQuery.extend(!0,i,t))}(e.parseJson(this.getAttribute("data-tab-panel"),!0)),a&&(i.active=!1),i.$target=jQuery(this),i.active&&"false"!=i.active&&(a=!0,n.activePanelIndex=t,i.$target.attr("data-tab-active","true")),i.panelIndex=t,n.tabPanel.push(i)}),a||(n.tabPanel[0].active=!0,n.tabPanel[0].$target.attr("data-tab-active","true"),n.activePanelIndex=0),n.$target.append(jQuery(ax5.mustache.render(c.call(this,t),n))),n.$target.on("click","[data-tab-panel-label]",function(e){var a=this.getAttribute("data-tab-panel-label");u.open.call(i,t,n,a)})}};return function(t){var e=this.queue[t];e.targetDimension={height:e.$target.innerHeight(),width:e.$target.innerWidth()},e.$target.parents("[data-ax5layout]").get(0)&&p.call(this,e.$target.parents("[data-ax5layout]").get(0),t),e.layout in o&&o[e.layout].call(this,t),l.call(this,t)}}(),h=function(t){return e.isString(t)||(t=jQuery(t).data("data-ax5layout-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5layout","402","getQueIdx"))},p=function(t,i){var n=e.isNumber(t)?t:h.call(this,t);this.queue[n].childQueIdxs||(this.queue[n].childQueIdxs=[]),this.queue[n].childQueIdxs.push(i),this.queue[i].parentQueIdx=n};this.init=function(){this.onStateChanged=t.onStateChanged,this.onClick=t.onClick,jQuery(window).bind("resize.ax5layout-"+this.instanceId,function(){o.call(this)}.bind(this))},this.bind=function(i){var n,a={};return i=jQuery.extend(!0,a,t,i),i.target?(i.$target=jQuery(i.target),i.id||(i.id=i.$target.data("data-ax5layout-id")),i.id||(i.id="ax5layout-"+ax5.getGuid(),i.$target.data("data-ax5layout-id",i.id)),i.name=i.$target.attr("data-ax5layout"),i.options&&(i.options=JSON.parse(JSON.stringify(i.options))),function(t){e.isObject(t)&&!t.error&&(i=jQuery.extend(!0,i,t))}(e.parseJson(i.$target.attr("data-config"),!0)),n=e.search(this.queue,function(){return this.id==i.id}),-1===n?(this.queue.push(i),d.call(this,this.queue.length-1)):(this.queue[n]=jQuery.extend(!0,{},this.queue[n],i),d.call(this,n)),a=null,n=null,this):(console.log(ax5.info.getError("ax5layout","401","bind")),this)},this.align=function(t,i){var n=e.isNumber(t)?t:h.call(this,t);return-1===n?void console.log(ax5.info.getError("ax5layout","402","align")):(l.call(this,n,null,i),this)},this.onResize=function(t,i){var n=e.isNumber(t)?t:h.call(this,t);return-1===n?void console.log(ax5.info.getError("ax5layout","402","onResize")):(this.queue[n].onResize=i,this)},this.resize=function(){var t={"dock-panel":function(t,i){["top","bottom","left","right"].forEach(function(n){i[n]&&t.dockPanel[n]&&("top"==n||"bottom"==n?t.dockPanel[n].__height=e.isObject(i[n])?i[n].height:i[n]:("left"==n||"right"==n)&&(t.dockPanel[n].__width=e.isObject(i[n])?i[n].width:i[n]))})},"split-panel":function(){},"tab-panel":function(){}};return function(i,n,a){var o=e.isNumber(i)?i:h.call(this,i);return-1===o?void console.log(ax5.info.getError("ax5layout","402","resize")):(t[this.queue[o].layout].call(this,this.queue[o],n),l.call(this,o,a),this)}}(),this.reset=function(){var t={"dock-panel":function(t){["top","bottom","left","right"].forEach(function(e){t.dockPanel[e]&&("top"==e||"bottom"==e?t.dockPanel[e].__height=t.dockPanel[e].height:("left"==e||"right"==e)&&(t.dockPanel[e].__width=t.dockPanel[e].width))})},"split-panel":function(){},"tab-panel":function(){}};return function(i,n){var a=e.isNumber(i)?i:h.call(this,i);return-1===a?void console.log(ax5.info.getError("ax5layout","402","reset")):(t[this.queue[a].layout].call(this,this.queue[a]),l.call(this,a,n),this)}}(),this.hide=function(){},this.tabOpen=function(){return function(t,i){var n=e.isNumber(t)?t:h.call(this,t);return-1===n?void console.log(ax5.info.getError("ax5layout","402","tabOpen")):(u.open.call(this,n,this.queue[n],i),this)}}(),this.main=function(){arguments&&e.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return t}())}(),ax5.ui.layout_instance=new ax5.ui.layout,jQuery.fn.ax5layout=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"align":return ax5.ui.layout_instance.align(this,arguments[1],arguments[2]);case"resize":return ax5.ui.layout_instance.resize(this,arguments[1],arguments[2]);case"reset":return ax5.ui.layout_instance.reset(this,arguments[1]);case"hide":return ax5.ui.layout_instance.hide(this,arguments[1]);case"onResize":return ax5.ui.layout_instance.onResize(this,arguments[1]);case"tabOpen":return ax5.ui.layout_instance.tabOpen(this,arguments[1]);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.layout_instance.bind(t)});return this}}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"binder",version:"0.2.0"},function(){var t=function(){var t;this.instanceId=ax5.getGuid(),this.config={},t=this.config,this.model={},this.tmpl={},this.view_target=null,this.change_trigger={},this.click_trigger={},this.update_trigger={},this.onerror=null;var i=Object.prototype.toString,n=function(t){var e;return null!=t&&t==t.window?e="window":t&&1==t.nodeType?e="element":t&&11==t.nodeType?e="fragment":"undefined"==typeof t?e="undefined":"[object Object]"==i.call(t)?e="object":"[object Array]"==i.call(t)?e="array":"[object String]"==i.call(t)?e="string":"[object Number]"==i.call(t)?e="number":"[object NodeList]"==i.call(t)?e="nodelist":"function"==typeof t&&(e="function"),e},a=function(t,e,i){return t+"["+e+"]"+("."==i?"":"."+i)},o=function(t){var e=[],i=[].concat(t.split(/[\.\[\]]/g));return i.forEach(function(t){""!==t&&e.push('["'+t.replace(/['\"]/g,"")+'"]')}),i=null,e.join("")};this.setModel=function(t,e){return this.model=t,!this.view_target&&e?(this.view_target=e,this._binding()):this._binding("update"),this},this.set=function(t,e){var i,a,s,l=this;if(Function("val","this"+o(t)+" = val;").call(this.model,e),i=n(e),"object"==i)for(var r in e)this.set(t+"."+r,e[r]);else if("array"==i)for(this.view_target.find('[data-ax-path="'+t+'"]').each(function(){s=(this.type||"").toLowerCase(),("checkbox"==s||"radio"==s)&&l.set_els_value(this,this.tagName.toLowerCase(),s,e,t,"change")}),a=e.length;a--;)this.set(t+"["+a+"]",e[a]);else this.view_target.find('[data-ax-path="'+t+'"]').each(function(){l.set_els_value(this,this.tagName.toLowerCase(),(this.type||"").toLowerCase(),e,t,"change")});return this},this.get=function(t){return"undefined"==typeof t?this.model:Function("","return this"+o(t)+";").call(this.model)},this.onChange=function(t,e){return this.change_trigger[t||"*"]=e,this},this.onClick=function(t,e){return this.click_trigger[t]=e,this},this.add=function(t,e){var i=Function("","return this"+o(t)+";").call(this.model),n=this.tmpl[t];e["@i"]=i.length,e["@r"]=i.length,e.__ADDED__=!0,Function("val","this"+o(t)+".push(val);").call(this.model,e);for(var a in n){var s=$(ax5.mustache.render(n[a].content,e));s.attr("data-ax-repeat-path",t),s.attr("data-ax-repeat-i",e["@i"]),this.bind_event_tmpl(s,t),n[a].container.append(s)}this.change("*");var l=this.update_trigger[t];if(l){var r={repeat_path:t,tmpl:n,list:i};l.call(r,r)}return this},this.remove=function(t,e){var i=Function("","return this"+o(t)+";").call(this.model),n=this.tmpl[t];"undefined"==typeof e&&(e=i.length-1);var a=i[e];a.__ADDED__?i.splice(e,1):i[e].__DELETED__=!0;for(var s in n)n[s].container.empty(),this.print_tmpl(t,n[s]);this.change("*");var l=this.update_trigger[t];if(l){var r={repeat_path:t,tmpl:n,list:i};l.call(r,r)}return this},this.update=function(t,e,i){var n=Function("","return this"+o(t)+";").call(this.model),a=this.tmpl[t];"undefined"!=typeof e&&i&&n.splice(e,1,i);for(var s in a)a[s].container.empty(),this.print_tmpl(t,a[s]);this.change("*");var l=this.update_trigger[t];if(l){var r={repeat_path:t,tmpl:a,list:n};l.call(r,r)}return this},this.childAdd=function(t,e,i,n){var a=Function("","return this"+o(t)+";").call(this.model),s=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model);n.__ADDED__=!0,s.push(n),this.update(t,e,a[e])},this.childRemove=function(t,e,i,n){var a=Function("","return this"+o(t)+";").call(this.model),s=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model),l=s[n];l.__ADDED__?s.splice(n,1):s[n].__DELETED__=!0,this.update(t,e,a[e])},this.childUpdate=function(t,e,i,n,a){var s=Function("","return this"+o(t)+";").call(this.model),l=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model);l[n]=a,this.update(t,e,s[e])},this.childSet=function(t,e,i,n){var a=this;return Function("val","this"+o(t)+"["+e+"]."+i+" = val;").call(this.model,n),this.view_target.find('[data-ax-repeat="'+t+'"]').find('[data-ax-repeat-i="'+e+'"]').find('[data-ax-item-path="'+i+'"]').each(function(){a.set_els_value(this,this.tagName.toLowerCase(),(this.type||"").toLowerCase(),n,t+"["+e+"]."+i)}),this},this.onUpdate=function(t,e){return this.update_trigger[t]=e,this},this._binding=function(t){var e=this;this.view_target.find("[data-ax-path]").each(function(){var t,i=$(this),n=i.attr("data-ax-path"),a=(this.type||"").toLowerCase();try{t=Function("","return this"+o(n)+";").call(e.model)}catch(s){e.onerror&&e.onerror("not found target [model."+o(n)+"]")}e.set_els_value(this,this.tagName.toLowerCase(),a,t||"",n)}),"undefined"==typeof t?this.view_target.find("[data-ax-repeat]").each(function(){var t=$(this),i=t.attr("data-ax-repeat"),n=t.attr("data-ax-repeat-idx");"undefined"==typeof e.tmpl[i]&&(e.tmpl[i]={}),"undefined"!=typeof n?e.tmpl[i][n]={container:t,content:t.find("script").html()}:e.tmpl[i][0]={container:t,content:t.find("script").html()},t.empty()}):this.view_target.find("[data-ax-repeat]").each(function(){var t=$(this);t.empty().show()}),this.view_target.find("[data-ax-path]").unbind("change.axbinder").bind("change.axbinder",function(t){var i,a,s=!1,l=[],r=$(t.target),u=r.attr("data-ax-path"),c=Function("","return this"+o(u)+";").call(e.model),d=(this.type||"").toLowerCase(),h=n(c),p=!0;if(("object"==h||"array"==h)&&(p=!1),"checkbox"==d){if(e.view_target.find('[data-ax-path="'+u+'"]').length>1){for("array"!=n(c)&&(c="undefined"==typeof c||""==c?[]:[].concat(c)),i=c.length,s=!1,a=this.checked;i--;)c[i]==this.value&&(s=!0);if(a)s||c.push(this.value);else{for(i=c.length;i--;)c[i]==this.value||l.push(c[i]);c=l}}else c=this.checked?this.value:"";Function("val","this"+o(u)+" = val;").call(e.model,c),e.change(u,{el:this,jquery:r,tagname:this.tagName.toLowerCase(),value:c})}else p&&(Function("val","this"+o(u)+" = val;").call(e.model,this.value),e.change(u,{el:this,jquery:r,tagname:this.tagName.toLowerCase(),value:this.value}));r.data("changedTime",(new Date).getTime())});var i;for(var a in e.tmpl){for(var s in e.tmpl[a])this.print_tmpl(a,e.tmpl[a][s],"isInit");if(i=this.update_trigger[a]){var l={repeat_path:a,tmpl:e.tmpl[a],list:Function("","return this."+a+";").call(this.model)};i.call(l,l)}}},this.set_els_value=function(t,e,i,n,a,s){n="undefined"==typeof n?[]:[].concat(n);var l,r;if("input"==e)if("checkbox"==i||"radio"==i){r=n.length;var u=!1;try{if(r>0)for(;r--;)"undefined"!=typeof n[r]&&t.value===n[r].toString()&&(u=!0)}catch(c){console.log(c)}t.checked=u}else t.value=n.join("");else if("select"==e){l=t.options,r=l.length;for(var d,h=!1;r--;){for(d=n.length;d--;)if("undefined"!=typeof n[d]&&l[r].value===n[d].toString()){l[r].selected=!0,h=!0;break}if(h)break}h||(l[0]?(l[0].selected=!0,Function("val","this"+o(a)+" = val;").call(this.model,l[0].value)):Function("val","this"+o(a)+" = val;").call(this.model,"")),window.AXSelect&&$("undefined"!=typeof n&&t).bindSelectSetValue(n[n.length-1])}else"textarea"==e?t.value=n.join("")||"":t.innerText?t.innerText=n.join(""):t.innerHTML=n.join("");return s&&this.change(a,{el:t,tagname:e,value:n}),this},this.change=function(t,e){var i=this.change_trigger[t];i&&i.call(e,e),"*"!=t&&this.change_trigger["*"]&&this.change_trigger["*"].call(e,e)},this.click=function(t,e){var i=this.click_trigger[t];i&&i.call(e,e)},this.sync_model=function(){},this.print_tmpl=function(t,e,i){var a=Function("","return this"+o(t)+";").call(this.model);if(a&&"array"==n(a))for(var s=0,l=a.length;l>s;s++){var r=a[s];if(jQuery.isPlainObject(r)?(r["@i"]=s,r["@r"]=s,0===s&&(r["@first"]=!0)):(r={"@i":s,"@value":r},0===s&&(r["@first"]=!0),console.log(r)),!r.__DELETED__){var u=$(ax5.mustache.render(e.content,r));u.attr("data-ax-repeat-path",t),u.attr("data-ax-repeat-i",r["@i"]),this.bind_event_tmpl(u,t),e.container.append(u)}}},this.bind_event_tmpl=function(t,e){var i=this,s=t.attr("data-ax-repeat-i"),l=Function("","return this"+o(e)+";").call(this.model);t.find("[data-ax-repeat-click]").unbind("click.axbinder").bind("click.axbinder",function(t){var n=ax5.util.findParentNode(t.target,function(t){return t.getAttribute("data-ax-repeat-click")});if(n){var a=$(n),o=a.attr("data-ax-repeat-click"),r=(a.attr("data-ax-repeat-path"),{el:n,jquery:a,tagname:n.tagName.toLowerCase(),value:o,repeat_path:e,item:l[s],item_index:s,item_path:e+"["+s+"]"});i.click(e,r)}}),t.find("[data-ax-item-path]").each(function(){var t,n=$(this),o=n.attr("data-ax-item-path"),l=a(e,s,o),r=(this.type||"").toLowerCase();try{t=Function("","return this."+l+";").call(i.model)}catch(u){i.onerror&&i.onerror("not found target [model."+l+"]")}i.set_els_value(this,this.tagName.toLowerCase(),r,t||"",l)}),t.find("[data-ax-item-path]").unbind("change.axbinder").bind("change.axbinder",function(o){var l,r,u=!1,c=[],d=(this.type||"").toLowerCase(),h=$(o.target),p=h.attr("data-ax-item-path"),f=a(e,s,p),m=Function("","return this."+f+";").call(i.model),g=n(m),v=!0;if(("object"==g||"array"==g)&&(v=!1),"checkbox"==d){if(t.find('[data-ax-item-path="'+p+'"]').length>1){for("array"!=n(m)&&(m="undefined"==typeof m||""==m?[]:[].concat(m)),l=m.length,u=!1,r=this.checked;l--;)m[l]==this.value&&(u=!0);if(r)u||m.push(this.value);else{for(l=m.length;l--;)m[l]==this.value||c.push(m[l]);m=c}}else m=this.checked?this.value:"";Function("val","this."+f+" = val;").call(i.model,m),i.change(f,{el:this,jquery:h,tagname:this.tagName.toLowerCase(),value:m})}else v&&(Function("val","this."+f+" = val;").call(i.model,this.value),i.change(f,{el:this,jquery:h,tagname:this.tagName.toLowerCase(),value:this.value}));h.data("changedTime",(new Date).getTime())}),t.find("[data-ax-item-path]").unbind("blur.axbinder").bind("blur.axbinder",function(t){var e=$(t.target);("undefined"==typeof e.data("changedTime")||e.data("changedTime")<(new Date).getTime()-10)&&e.trigger("change")})},this.focus=function(t){return this.view_target.find('[data-ax-path="'+t+'"]').focus(),this},this.validate=function(){var t=this,e=[];return this.view_target.find("[data-ax-path]").each(function(){var i=$(this),n=i.attr("data-ax-path"),a=i.attr("data-ax-validate");if(a){var s=Function("","return this"+o(n)+";").call(t.model);"undefined"==typeof s&&(s="");var l=s.toString(),r=!1;"required"==a&&""==l.trim()?r=!0:!/\D.?/g.test(a)&&l.trim().length<a.number()&&(r=!0),r&&e.push({type:a,dataPath:n,el:this,jquery:i,value:s})}}),this.view_target.find("[data-ax-repeat-path]").each(function(){var i=$(this),n=i.attr("data-ax-repeat-path"),a=i.attr("data-ax-repeat-i");i.find("[data-ax-validate]").each(function(){var i=$(this),s=i.attr("data-ax-validate"),l=i.attr("data-ax-item-path"),r=Function("","return this"+o(n)+"["+a+"]."+l+";").call(t.model);"undefined"==typeof r&&(r="");var u=r.toString();if(s){var c=!1;"required"==s&&""==u.trim()?c=!0:!/\D.?/g.test(s)&&u.trim().length<s.number()&&(c=!0),c&&e.push({type:s,dataPath:n,el:this,jquery:i,value:r})}})}),e.length>0?{error:e}:{}},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return t}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"multiUploader",version:"0.0.1"},function(){var i=function(){var i;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",file_types:"*/*"},this.queue=[],this.target=null,this.selectedFile=null,this.uploadedFile=null,i=this.config,this.init=function(){},this.main=function(){t.multiUploader_instance=t.multiUploader_instance||[],t.multiUploader_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"autocomplete",version:"0.0.4"},function(){var e=function(){var e,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,removeIcon:"X",lang:{noSelected:"",noOptions:"no options",loading:"Now Processing"},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeautocompleteOptionGroup=null,this.activeautocompleteQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,e=this.config;var a={18:"KEY_ALT",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},s=function(){for(var t,e=this.queue.length;e--;){var n=this.queue[e];if(n.$display&&(t=Math.max(n.$select.outerWidth(),i.number(n.minWidth)),n.$display.css({"min-width":t}),n.reset&&n.$display.find(".addon-icon-reset").css({"line-height":this.queue[e].$display.height()+"px"}),n.multiple)){var a=function(){return i.number(n.$display.css("border-top-width"))+i.number(n.$display.css("border-bottom-width"))}.call(this);n.$target.height(""),n.$display.height("");var o=n.$displayTable.outerHeight();Math.abs(o-n.$target.height())>a&&(n.$target.css({height:o+a}),n.$display.css({height:o+a}))}}return e=null,t=null,this},l=function(t){if(!this.activeautocompleteOptionGroup)return this;var e=this.queue[this.activeautocompleteQueueIndex],i={},n={};t&&jQuery(document.body).append(this.activeautocompleteOptionGroup),i=e.$target.offset(),n={width:e.$target.outerWidth(),height:e.$target.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction||(e.direction="top"),t&&this.activeautocompleteOptionGroup.addClass("direction-"+e.direction),this.activeautocompleteOptionGroup.css(function(){return"top"==e.direction?{left:i.left,top:i.top+n.height+1,width:n.width}:"bottom"==e.direction?{left:i.left,top:i.top-this.activeautocompleteOptionGroup.outerHeight()-1,width:n.width}:void 0}.call(this))},r=function(t,e){if(!this.activeautocompleteOptionGroup)return this;var n=this.queue[this.activeautocompleteQueueIndex],a="display";return(e=i.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(w.call(this,n.id,{optionIndex:{index:e.getAttribute("data-option-index")}},void 0,"optionItemClick"),i.selectRange(n.$displayLabel,"end"),n.multiple||this.close()),this):(this.close(),this)},u=function(e){if(e.keyCode==ax5.info.eventKeys.ESC)p.call(this,this.activeautocompleteQueueIndex),this.close();else if(e.which==ax5.info.eventKeys.RETURN){for(var i=[],n=this.queue[this.activeautocompleteQueueIndex],a=n.$displayLabel.get(0).childNodes,o=0,s=a.length;s>o;o++){var l=a[o];if(l.nodeType in t.util.nodeTypeProcessor){var r=t.util.nodeTypeProcessor[l.nodeType].call(this,this.activeautocompleteQueueIndex,l);"undefined"!=typeof r&&i.push(r)}}w.call(this,n.id,i,!0),h.call(this,this.activeautocompleteQueueIndex),n.multiple||this.close()}},c=function(e){var i=this.queue[e],n={};return n.id=i.id,n.theme=i.theme,n.size="ax5autocomplete-option-group-"+i.size,n.multiple=i.multiple,n.lang=i.lang,n.options=i.options,n.selected=i.selected,n.hasSelected=n.selected&&n.selected.length>0,n.removeIcon=i.removeIcon,ax5.mustache.render(t.tmpl.label.call(this,i.columnKeys),n)+"&nbsp;"},d=function(e){var n,a=this.queue[e];if(!a.multiple&&a.selected&&a.selected.length>0&&(a.selected=[].concat(a.selected[a.selected.length-1])),a.selected.forEach(function(t,e){t["@index"]=e}),a.$select.html(ax5.mustache.render(t.tmpl.formSelectOptions.call(this,a.columnKeys),{selected:a.selected})),a.$displayLabel.html(c.call(this,e)),a.$target.height(""),a.$display.height(""),a.$target.height()<(n=a.$displayTable.outerHeight())){var o=function(){return i.number(a.$display.css("border-top-width"))+i.number(a.$display.css("border-bottom-width"))}();a.$target.css({height:n+o}),a.$display.css({height:n+o})}},h=function(t){this.queue[t].$displayLabel.trigger("focus"),i.selectRange(this.queue[t].$displayLabel,"end")},p=function(t){this.queue[t].$displayLabel.trigger("blur")},f=function(e,n){if(-1==this.activeautocompleteQueueIndex)return this;var a=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;n=n.replace(a,""),this.queue[e].waitOptions=!0,this.queue[e].onSearch.call({self:this,item:this.queue[e],searchWord:n},function(e){var a={},o=this.queue[this.activeautocompleteQueueIndex];return o?(function(t,e){var n={};e.options.forEach(function(e,i){e["@index"]=i,e["@findex"]=i,n[e[t.columnKeys.optionValue]]=e}),i.isArray(t.selected)&&t.selected.forEach(function(i){n[i[t.columnKeys.optionValue]]&&(e.options[n[i[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(o,e),o.options=e.options,s.call(this),a.id=o.id,a.theme=o.theme,a.size="ax5autocomplete-option-group-"+o.size,a.multiple=o.multiple,a.lang=o.lang,a.options=o.options,this.activeautocompleteOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(t.tmpl.options.call(this,o.columnKeys),a))),void m.call(this,this.activeautocompleteQueueIndex,n)):!1}.bind(this))},m=function(t,e){if(-1==this.activeautocompleteQueueIndex)return this;var i,n=[],a=-1,o=this.queue[t].options.length-1;if(""!=e){for(;o-a++;){if(i=this.queue[t].options[a],(""+i.text).toLowerCase()==e.toLowerCase()){n=[{"@findex":i["@findex"],optionsSort:0}];break}var s=(""+i.text).toLowerCase().search(e.toLowerCase());if(s>-1&&(n.push({"@findex":i["@findex"],optionsSort:s}),n.length>2))break;s=null}n.sort(function(t,e){return t.optionsSort-e.optionsSort})}n&&n.length>0?v.call(this,t,void 0,n[0]["@findex"]):g.call(this,t)},g=function(t){this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected"),this.queue[t].optionFocusIndex=-1},v=function(t,e,n){var a,o,s,l,r=this.queue[t];if(this.activeautocompleteOptionGroup&&r.options&&r.options.length>0){if("undefined"!=typeof n?a=n:(o=-1==r.optionFocusIndex?r.optionSelectedIndex||-1:r.optionFocusIndex,-1==o?a=0:(a=o+e,0>a?a=0:a>r.optionItemLength-1&&(a=r.optionItemLength-1))),r.optionFocusIndex=a,r.options[a]&&r.options[a].hide){if("undefined"==typeof e)return this;for(;r.options[a].hide;){if(a+=e,0>a){a=0;break}if(a>r.optionItemLength-1){a=r.optionItemLength-1;break}}}if("undefined"!=typeof a&&(this.activeautocompleteOptionGroup.find("[data-option-focus-index]").removeClass("hover"),s=this.activeautocompleteOptionGroup.find('[data-option-focus-index="'+a+'"]').addClass("hover"),l=this.activeautocompleteOptionGroup.find('[data-els="content"]'),s.get(0))){var u=s.outerHeight(),c=l.innerHeight(),d=l.scrollTop(),h=s.position().top+l.scrollTop();h+u>c+d?l.scrollTop(h+u-c):d>h&&l.scrollTop(h),"undefined"!=typeof e&&i.selectRange(r.$displayLabel,"end")}}},b=function(t){return t instanceof jQuery?t=t.data("data-ax5autocomplete-id"):i.isString(t)||(t=jQuery(t).data("data-ax5autocomplete-id")),i.isString(t)?i.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5autocomplete","402","getQueIdx"))},y=function(t,e,i){return"undefined"==typeof i?t.multiple?!e:!0:i},x=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1})},w=function(){var t={selectedIndex:function(t,e,i,n){},removeSelectedIndex:function(t,e,i,n){for(var a=this.queue[t],o={},s=[],l=0,r=0;r<a.selected.length;r++)a.selected[r]["@index"]!=e.removeSelectedIndex.index&&(o={"@index":l,"@findex":l},o[a.columnKeys.optionValue]=a.selected[r][a.columnKeys.optionValue],o[a.columnKeys.optionText]=a.selected[r][a.columnKeys.optionText],s.push(o),l++);a.selected=s},optionIndex:function a(t,e,i,n){var o=this.queue[t],s={},a=o.selected.length,l=!0;s={"@index":a,"@findex":a},s[o.columnKeys.optionValue]=o.options[e.optionIndex.index][o.columnKeys.optionValue],s[o.columnKeys.optionText]=o.options[e.optionIndex.index][o.columnKeys.optionText];for(var r=0;r<o.selected.length;r++)o.selected[r][o.columnKeys.optionValue]==s[o.columnKeys.optionValue]&&(l=!1);l&&o.selected.push(s)},arr:function(e,a,o,s){a.forEach(function(a){if(i.isString(a)||i.isNumber(a))t.text.call(n,e,a,o,"justSetValue");else for(var s in t)if(a[s]){t[s].call(n,e,a,o,"justSetValue");break}})},value:function(t,n,a,o){var s,l=this.queue[t],r=i.search(l.options,function(){return this[l.columnKeys.optionValue]==n.value[l.columnKeys.optionValue]});if(r>-1)if(l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],a),l.options[r][l.columnKeys.optionSelected]){for(var u=!0,c=0;c<l.selected.length;c++)if(l.selected[c][e.columnKeys.optionValue]==l.options[r][e.columnKeys.optionValue]){u=!1;break}u&&(s={},s[l.columnKeys.optionValue]=l.options[r][l.columnKeys.optionValue],s[l.columnKeys.optionText]=l.options[r][l.columnKeys.optionText],l.selected.push(s))}else{for(var d=[],c=0;c<l.selected.length;c++)l.selected[c][e.columnKeys.optionValue]==l.options[r][e.columnKeys.optionValue]||(s={},s[l.columnKeys.optionValue]=l.selected[c][l.columnKeys.optionValue],s[l.columnKeys.optionText]=l.selected[c][l.columnKeys.optionText],d.push(s));l.selected=d}else{for(var u=!0,c=0;c<l.selected.length;c++)if(l.selected[c][e.columnKeys.optionValue]==n.value[e.columnKeys.optionValue]){u=!1;break}u&&(s={},s[l.columnKeys.optionValue]=n.value[e.columnKeys.optionValue],s[l.columnKeys.optionText]=n.value[e.columnKeys.optionText],l.selected.push(s))}},text:function(t,n,a,o){var s,l=this.queue[t],r=i.search(l.options,function(){return this[l.columnKeys.optionText]==n});if(r>-1)if(l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],a),l.options[r][l.columnKeys.optionSelected]){for(var u=!0,c=0;c<l.selected.length;c++)if(l.selected[c][e.columnKeys.optionText]==l.options[r][e.columnKeys.optionText]){u=!1;break}u&&(s={},s[l.columnKeys.optionValue]=l.options[r][l.columnKeys.optionValue],s[l.columnKeys.optionText]=l.options[r][l.columnKeys.optionText],l.selected.push(s))}else{for(var d=[],c=0;c<l.selected.length;c++)l.selected[c][e.columnKeys.optionText]==l.options[r][e.columnKeys.optionText]||(s={},s[l.columnKeys.optionValue]=l.selected[c][l.columnKeys.optionValue],s[l.columnKeys.optionText]=l.selected[c][l.columnKeys.optionText],d.push(s));l.selected=d}else{for(var u=!0,c=0;c<l.selected.length;c++)if(l.selected[c][e.columnKeys.optionText]==n){u=!1;break}u&&(s={},s[l.columnKeys.optionValue]=n,s[l.columnKeys.optionText]=n,l.selected.push(s))}},clear:function(t){x.call(this,t),g.call(this,t),this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.find("[data-option-index]").attr("data-option-Selected","false"),this.queue[t].optionSelectedIndex=-1}};return function(e,n,a,s){var r=i.isNumber(e)?e:b.call(this,e);if(-1===r)return void console.log(ax5.info.getError("ax5autocomplete","402","val"));if("undefined"==typeof n)throw"error not found value";if(i.isArray(n))t.clear.call(this,r),t.arr.call(this,r,this.queue[r].multiple||0==n.length?n:[n[n.length-1]],a);else if(i.isString(n)||i.isNumber(n))"undefined"==typeof n||null===n||this.queue[r].multiple||x.call(this,r),t.text.call(this,r,n,a);else if(null===n)t.clear.call(this,r);else{this.queue[r].multiple||x.call(this,r);for(var u in t)if(n[u]){t[u].call(this,r,n,a);break}}return d.call(this,r),l.call(this),"undefined"!=typeof n&&s&&!s.noStateChange&&o.call(this,this.queue[r],{self:this,item:this.queue[r],state:"changeValue",value:this.queue[r].selected}),e=null,this}}();this.init=function(){this.onStateChanged=e.onStateChanged,this.onChange=e.onChange,jQuery(window).bind("resize.ax5autocomplete-display-"+this.instanceId,function(){s.call(this)}.bind(this))},this.bind=function(o){var l,r=function(){
var e=i.debounce(function(e){if(-1==this.activeautocompleteQueueIndex)return this;for(var a=[],o="",s=!1,l=this.queue[e],r=l.$displayLabel.get(0).childNodes,u=0,c=r.length;c>u;u++){var d=r[u];if(d.nodeType in t.util.nodeTypeProcessor){var h=t.util.nodeTypeProcessor[d.nodeType].call(this,this.activeautocompleteQueueIndex,d,!0);"undefined"==typeof h||(i.isString(h)?o=h:(h.removeSelectedIndex&&(s=!0),a.push(h)))}}0==r.length?w.call(this,l.id,null,void 0,"internal"):""!=o?f.call(n,e,o):s&&(w.call(this,l.id,a,void 0,"internal"),i.selectRange(l.$displayLabel,"end"),n.close())},150),o=function(e){for(var n=[],a=this.queue[e],o=a.$displayLabel.get(0).childNodes,s=0,l=o.length;l>s;s++){var r=o[s];if(r.nodeType in t.util.nodeTypeProcessor){var u=t.util.nodeTypeProcessor[r.nodeType].call(this,e,r,!0);"undefined"==typeof u||i.isString(u)||n.push(u)}}w.call(this,a.id,n,void 0,"blurLabel")},l={click:function(t,e){var a,o=i.findParentNode(e.target,function(t){return t.getAttribute("data-ax5autocomplete-remove")?(a="optionItemRemove",!0):t.getAttribute("data-selected-clear")?(a="clear",!0):void 0});if(o){if("optionItemRemove"===a){var s=o.getAttribute("data-ax5autocomplete-remove-index");return this.queue[t].selected.splice(s,1),d.call(this,t),h.call(this,t),i.stopEvent(e),this}"clear"===a&&w.call(this,t,{clear:!0})}else n.activeautocompleteQueueIndex==t?-1==this.queue[t].optionFocusIndex&&n.close():""==this.queue[t].$displayLabel.text().replace(/^\W*|\W*$/g,"")&&(this.queue[t].$displayLabel.html(c.call(this,t)),h.call(this,t))},keyUp:function(t,o){return o.which==ax5.info.eventKeys.ESC&&-1===n.activeautocompleteQueueIndex?(i.stopEvent(o),this):(n.activeautocompleteQueueIndex!=t&&(n.open(t),i.stopEvent(o)),void(a[o.which]?i.stopEvent(o):e.call(this,t)))},keyDown:function(t,e){e.which==ax5.info.eventKeys.ESC?i.stopEvent(e):e.which==ax5.info.eventKeys.RETURN?i.stopEvent(e):e.which==ax5.info.eventKeys.DOWN?(v.call(this,t,1),i.stopEvent(e)):e.which==ax5.info.eventKeys.UP&&(v.call(this,t,-1),i.stopEvent(e))},focus:function(t,e){i.selectRange(this.queue[t].$displayLabel,"end")},blur:function(t,e){o.call(this,t),i.stopEvent(e)},selectChange:function(t,e){w.call(this,t,{value:this.queue[t].$select.val()},!0)}};return function(e){var i=this.queue[e],n={};return i.$display?(i.$displayLabel.html(c.call(this,e)),s.call(this)):(n.instanceId=this.instanceId,n.id=i.id,n.name=i.name,n.theme=i.theme,n.tabIndex=i.tabIndex,n.multiple=i.multiple,n.reset=i.reset,n.label=c.call(this,e),n.formSize=function(){return i.size?"input-"+i.size:""}(),i.$display=jQuery(ax5.mustache.render(t.tmpl.autocompleteDisplay.call(this,e),n)),i.$displayTable=i.$display.find('[data-els="display-table"]'),i.$displayLabel=i.$display.find('[data-ax5autocomplete-display="label"]'),i.$target.find("select").get(0)?(i.$select=i.$target.find("select"),i.$select.attr("tabindex","-1").attr("class","form-control "+n.formSize),n.name&&i.$select.attr("name","name"),i.$select.attr("multiple","multiple")):(i.$select=jQuery(ax5.mustache.render(t.tmpl.formSelect.call(this,e),n)),i.$target.append(i.$select)),i.$target.append(i.$display),s.call(this)),i.$display.unbind("click.ax5autocomplete").bind("click.ax5autocomplete",l.click.bind(this,e)),i.$displayLabel.unbind("focus.ax5autocomplete").bind("focus.ax5autocomplete",l.focus.bind(this,e)).unbind("blur.ax5autocomplete").bind("blur.ax5autocomplete",l.blur.bind(this,e)).unbind("keyup.ax5autocomplete").bind("keyup.ax5autocomplete",l.keyUp.bind(this,e)).unbind("keydown.ax5autocomplete").bind("keydown.ax5autocomplete",l.keyDown.bind(this,e)),i.$select.unbind("change.ax5autocomplete").bind("change.ax5autocomplete",l.selectChange.bind(this,e)),n=null,i=null,e=null,this}}(),u={};return o=jQuery.extend(!0,u,e,o),o.target?(o.$target=jQuery(o.target),o.id||(o.id=o.$target.data("data-ax5autocomplete-id")),o.id||(o.id="ax5autocomplete-"+ax5.getGuid(),o.$target.data("data-ax5autocomplete-id",o.id)),o.name=o.$target.attr("data-ax5autocomplete"),o.options=[],o.selected=[],function(t){i.isObject(t)&&!t.error&&(o=jQuery.extend(!0,o,t))}(i.parseJson(o.$target.attr("data-ax5autocomplete-config"),!0)),l=i.search(this.queue,function(){return this.id==o.id}),-1===l?(this.queue.push(o),r.call(this,this.queue.length-1)):(this.queue[l]=jQuery.extend(!0,{},this.queue[l],o),r.call(this,l)),u=null,l=null,this):(console.log(ax5.info.getError("ax5autocomplete","401","bind")),this)},this.open=function(){return function(n,a){this.waitOptionsCallback=null;var s,c,d=i.isNumber(n)?n:b.call(this,n),h=this.queue[d],p={};return h.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeautocompleteOptionGroup?this.activeautocompleteQueueIndex==d?this:a>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(d,(a||0)+1)}.bind(this),e.animateTime),this):(h.optionFocusIndex=-1,h.selected&&h.selected.length>0&&(h.optionSelectedIndex=h.selected[0]["@findex"]),p.id=h.id,p.theme=h.theme,p.size="ax5autocomplete-option-group-"+h.size,p.multiple=h.multiple,p.lang=h.lang,h.$display.attr("data-autocomplete-option-group-opened","true"),p.waitOptions=!0,p.options=[],this.activeautocompleteOptionGroup=jQuery(ax5.mustache.render(t.tmpl.optionGroup.call(this,h.columnKeys),p)),this.activeautocompleteOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(t.tmpl.options.call(this,h.columnKeys),p))),this.activeautocompleteQueueIndex=d,l.call(this,"append"),jQuery(window).bind("resize.ax5autocomplete-"+this.instanceId,function(){l.call(this)}.bind(this)),h.selected&&h.selected.length>0&&(c=this.activeautocompleteOptionGroup.find('[data-option-index="'+h.selected[0]["@index"]+'"]'),c.get(0)&&(s=c.position().top-this.activeautocompleteOptionGroup.height()/3,this.activeautocompleteOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:s},h.animateTime,"swing",function(){}))),jQuery(window).bind("keyup.ax5autocomplete-"+this.instanceId,function(t){t=t||window.event,u.call(this,t),i.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5autocomplete-"+this.instanceId,function(t){t=t||window.event,r.call(this,t),i.stopEvent(t)}.bind(this)),o.call(this,h,{self:this,state:"open",item:h}),p=null,s=null,c=null,this))}}(),this.setValue=function(t,e){var n=i.isNumber(t)?t:b.call(this,t);if(-1===n)return void console.log(ax5.info.getError("ax5autocomplete","402","val"));if(this.queue[n].selected=[],x.call(this,n),i.isArray(e)){var a=i.map(e,function(){return{value:this}});w.call(this,n,a,!0,{noStateChange:!0})}else i.isObject(e)&&(console.log(e),w.call(this,n,{value:e},!0,{noStateChange:!0}));return p.call(this,n),this},this.setText=function(t,e){var n=i.isNumber(t)?t:b.call(this,t);return-1===n?void console.log(ax5.info.getError("ax5autocomplete","402","val")):(this.queue[n].selected=[],x.call(this,n),w.call(this,n,e,!0,{noStateChange:!0}),p.call(this,n),this)},this.getSelectedOption=function(t){var e=i.isNumber(t)?t:b.call(this,t);return-1===e?void console.log(ax5.info.getError("ax5autocomplete","402","val")):i.deepCopy(this.queue[e].selected)},this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeautocompleteOptionGroup?(t=this.queue[this.activeautocompleteQueueIndex],t.optionFocusIndex=-1,t.$display.removeAttr("data-autocomplete-option-group-opened").trigger("focus"),this.activeautocompleteOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5autocomplete-"+this.instanceId).unbind("click.ax5autocomplete-"+this.instanceId).unbind("keyup.ax5autocomplete-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.remove(),this.activeautocompleteOptionGroup=null,this.activeautocompleteQueueIndex=-1,o.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime),this.waitOptionsCallback=null,this):this},this.blur=function(t){var e=i.isNumber(t)?t:b.call(this,t);return-1===e?void console.log(ax5.info.getError("ax5autocomplete","402","val")):(p.call(this,e),this)},this.enable=function(t){var e=b.call(this,t);return this.queue[e].$display.removeAttr("disabled"),this.queue[e].$input.removeAttr("disabled"),o.call(this,this.queue[e],{self:this,state:"enable"}),this},this.disable=function(t){var e=b.call(this,t);return this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$input.attr("disabled","disabled"),o.call(this,this.queue[e],{self:this,state:"disable"}),this},this.main=function(){arguments&&i.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return e}()),t=ax5.ui.autocomplete}(),ax5.ui.autocomplete_instance=new ax5.ui.autocomplete,jQuery.fn.ax5autocomplete=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.autocomplete_instance.open(this);case"close":return ax5.ui.autocomplete_instance.close(this);case"setValue":return ax5.ui.autocomplete_instance.setValue(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"setText":return ax5.ui.autocomplete_instance.setText(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"getSelectedOption":return ax5.ui.autocomplete_instance.getSelectedOption(this);case"enable":return ax5.ui.autocomplete_instance.enable(this);case"disable":return ax5.ui.autocomplete_instance.disable(this);case"blur":return ax5.ui.autocomplete_instance.blur(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.autocomplete_instance.bind(t)});return this}}();